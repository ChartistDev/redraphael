{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 03ac1623c6b40e00dd0c","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./source/raphael.core.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./source/raphael.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_to-index.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_keyof.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./source/eve/eve.js","webpack:///./source/raphael.svg.js","webpack:///./source/raphael.vml.js","webpack:///./source/raphael.canvas.js"],"names":["_win","window","global","R","first","args","f","_url","undefined","is","loaded","on","array","_engine","create","apply","splice","nu","add","Array","prototype","slice","call","arguments","length","pop","upgrade","version","eve","undef","E","S","UNIT_INTERVAL","proto","has","appendChild","concat","string","object","finite","toString","fillString","push","setAttribute","split","none","black","OBJECTSTRING","arrayToStr","objectToStr","arraySlice","arraySplice","arrayShift","shift","arrayPop","hasPrototypeBug","a","hasOwnProperty","g","doc","document","win","oldRaphael","was","Object","Raphael","supportsTouch","supportsOnlyTouch","navigator","maxTouchPoints","msMaxTouchPoints","CustomAttributes","pluck","checkWith","i","ii","caproto","ca","customAttributes","Paper","_CustomAttributes","_elementsById","id","_oid","paperproto","fn","elements","circle","rect","path","ellipse","text","image","group","events","touchMap","_touchMap","mousedown","mousemove","mouseup","dragEventMap","_dragEventMap","dragstart","dragmove","dragend","Str","String","toFloat","parseFloat","toInt","parseInt","math","Math","mmax","max","mmin","min","abs","pow","mathCos","cos","mathSin","sin","mathSqrt","sqrt","round","PI","deg2rad","rad2deg","lowerCase","toLowerCase","upperCase","toUpperCase","objectToString","paper","separator","formatrg","ISURL","_ISURL","colourRegExp","bezierrg","whitespace","commaSpaces","p2s","pathCommand","tCommand","pathValues","radial_gradient","_radial_gradient","isnan","hsrg","hs","rg","availableAttrs","_availableAttrs","blur","cursor","cx","cy","fill","font","gradient","height","href","opacity","r","rx","ry","src","stroke","target","title","transform","rotation","width","x","y","alpha","availableAnimAttrs","_availableAnimAttrs","eldata","sortByKey","b","key","sortByNumber","fun","pipe","rectPath","_rectPath","w","h","ellipsePath","getPath","_getPath","el","attr","attrs","bbox","_getBBox","mapPath","matrix","j","jj","pathi","path2curve","pick","arg","lastArgIfGroup","_lastArgIfGroup","clear","last","constructor","type","serializeArgs","_serializeArgs","arg0","pathString","checkCyclicRef","obj","parentArr","bIndex","merge","obj1","obj2","skipUndef","tgtArr","srcArr","item","srcVal","tgtVal","str","cRef","e","extend","o","isArray","createUUID","uuidRegEx","uuidReplacer","replace","c","random","v","getElementID","clone","res","Node","contains","parentNode","_g","PriorityQueue","comparator","_comparator","_elements","isEmpty","size","peek","deq","current","largest","left","right","_compare","_swap","enq","element","parent","floor","aux","ENABLE_RED_CANVAS","CanvasRenderingContext2D","createElement","getContext","SVGAngle","implementation","hasFeature","d","innerHTML","firstChild","style","behavior","adj","svg","vml","canvas","_Paper","_id","angle","x1","y1","x2","y2","x3","y3","atan2","rad","deg","snapTo","values","value","tolerance","rem","setWindow","newwin","initWin","toHex","color","trim","bod","docum","ActiveXObject","write","close","body","createPopup","range","createTextRange","cacher","queryCommandValue","display","defaultView","getComputedStyle","getPropertyValue","hsbtoString","s","hsltoString","l","rgbtoString","hex","prepareRGB","clr","getRGB","packageRGB","rgb","hsb2rgb","hsl2rgb","rgb2hsl","rgb2hsb","G","B","X","C","H","V","L","M","m","_path2string","join","repush","_cacher","scope","postprocessor","cachedfunction","cache","count","preload","_preload","img","cssText","onload","removeChild","onerror","clrToString","colour","red","green","blue","t","indexOf","error","substring","charAt","match","tintshade","percent","tint","offset","rgba","hsb","hsl","getColor","start","reset","catmullRom2bezier","crp","z","iLen","p","parsePathString","pth","paths","arr","pathClone","paramCounts","q","data","params","name","parseTransformString","TString","ps","sleep","setTimeout","findDotsAtSegment","p1x","p1y","c1x","c1y","c2x","c2y","p2x","p2y","t1","t13","t12","t2","t3","mx","my","nx","ny","ax","ay","n","end","bezierBBox","curveDim","isPointInsideBBox","isBBoxIntersect","bbox1","bbox2","base3","p1","p2","p3","p4","bezlen","x4","y4","z2","Tvalues","Cvalues","sum","ct","xbase","ybase","comb","getTatLen","ll","step","intersect","denominator","px","py","px2","toFixed","py2","inter","bez1","bez2","interHelper","interCount","justCount","l1","l2","n1","n2","dots1","dots2","xy","di","di1","dj","dj1","ci","cj","pathIntersection","path1","path2","interPathHelper","pathIntersectionNumber","_path2curve","x1m","y1m","x2m","y2m","pi","pj","intr","k","kk","segment1","segment2","isPointInsidePath","pathBBox","_removedFactory","methodname","pathDimensions","Y","dim","xmin","ymin","xmax","ymax","bb","pathArray","pathToRelative","_pathToRelative","rel","pa","len","pathToAbsolute","_pathToAbsolute","crz","dots","l2c","q2c","_13","_23","a2c","large_arc_flag","sweep_flag","recursive","_120","rotate","rx2","ry2","f1","asin","f2","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","newres","findDotAtSegment","dot","curve","bx","by","qx","qy","attrs2","processPath","T","Q","fixArc","pp","fixM","a1","a2","seg","seg2","seglen","seg2len","parseDots","_parseDots","par","tear","_tear","top","prev","bottom","next","tofront","_tofront","toback","_toback","insertafter","_insertafter","el2","paper2","insertbefore","_insertbefore","toMatrix","_","getBBox","extractTransform","transformPath","_extractTransform","tstr","tdata","dx","dy","sx","sy","Matrix","tlen","command","absolute","inver","invert","translate","scale","dirtyT","getEmpty","equaliseTransform","_equaliseTransform","maxlength","from","to","tt1","tt2","_getContainer","container","getElementById","tagName","pixelWidth","offsetWidth","pixelHeight","offsetHeight","matrixproto","out","me","get","fromCharCode","toMatrixString","toFilter","norm","normalize","mag","row","scalex","shear","scaley","acos","isSimple","isSuperSimple","noRotation","toTransformString","shorter","userAgent","vendor","platform","safari","remove","preventDefault","returnValue","preventTouch","originalEvent","stopPropagation","cancelBubble","stopTouch","addEvent","addEventListener","realName","scrollY","documentElement","scrollTop","scrollX","scrollLeft","targetTouches","nodeName","olde","clientX","clientY","removeEventListener","attachEvent","event","detacher","detachEvent","drag","dragMove","dragi","dummyEve","touches","touch","identifier","_drag","removed","node","getNode","nextSibling","opera","getElementByPoint","insertBefore","bind","move_scope","dragUp","undragmove","undragend","unmousemove","unmouseup","end_scope","start_scope","elproto","eventName","unbind","shape","removeData","getData","downables","mouseDown","untrack","mouseUp","track","undowned","hover","f_in","f_out","scope_in","scope_out","mouseover","mouseout","unhover","unmouseover","unmouseout","draggable","onmove","onstart","onend","onDragOver","undrag","unmousedown","undragstart","_dragstart","follow","callback","stalk","followers","before","after","cb","unfollow","hide","visibility","show","set","itemsArray","Set","__set__","setConfig","config","setStart","setFinish","setSize","setDimension","paramsObj","status","anim","animateWith","ms","easing","configObject","animate","setViewBox","fit","raphael","getOffset","elem","box","getBoundingClientRect","ownerDocument","docElem","clientTop","clientLeft","pageYOffset","pageXOffset","elementFromPoint","so","sr","createSVGRect","hits","getIntersectionList","getById","raphaelid","getElementsByBBox","forEach","thisArg","bot","getElementsByPoint","isPointInside","x_y","x_y_w_h","rp","realPath","tr","isWithoutTransform","dirty","bboxwt","glow","offsetx","offsety","curveslengths","getPointAtSegmentLength","getLengthFactory","istotal","subpath","onlystart","sp","subpaths","point","getTotalLength","getPointAtLength","getSubpathsAtLength","getSubpath","ef","easing_formulas","linear","backIn","backOut","elastic","bounce","oneBounceOut","easeIn","elasticOnce","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeOut","easeInOut","animationElements","requestAnimFrame","animation","Now","Date","deqArr","tmpOpacity","radial","animFrameFn","paused","parentEl","time","diff","that","now","origms","init","executeEvent","stopEvent","peekVal","animElements","pos","initstatus","stop","delayend","delaystart","cPos","isNaN","upto255","isRadial","f3","f4","f5","f6","position","real","from2","repeat","totalOrigin","runAnimation","percents","getInstantAnimFrameFn","getAnimFrameFn","checkPercentage","num","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","instantRequestAnimFrame","refOb","Animation","smartMorph","hookFn","executeOb","CubicBezierAtTime","duration","sampleCurveX","solve","epsilon","solveCurveX","t0","d2","onAnimation","newAnim","times","sort","delay","del","colorNormalizer","colorAr1","colorAr2","newColArr","newColArr2","temp","uniqArr","allToLinear","defaultAngleSet","converToRadialIfOneRadial","getColorAtPosition","temp2","prevVal","lastVal","counter","rPos","openBrPos","closedBrPos","unshift","substr","prevPos","nextPos","colPrev","colNext","ratio","col","pathNormalizer","finalp1","finalp2","pathArr1","toSvgPath","pathArr2","createElementNS","dPath","canFallback","str1","str2","testLen","testPoint","trimPathArray","getPathFromArray","_pathNormalizer","linetopath","removeBlanks","_divide","resArr","locArr","arrLen","diffTimes","divideArray","arrToDivide","countArr","transArr","isArr1","commonPathCalculator","uncommon1","uncommon2","lim1","lim2","nearestPoint1","nearestPoint2","map1","map2","groupedPath1","groupedPath2","gpIndex1","gpIndex2","isSame","splitter","mapper","ob","val","stringValue","getNearestExistingPoint","map","lim","index","mapValue","getCoordinateAsMove","pathToString","fPath1","fPath2","divisions","commonPath","tmp","normalizeUncommonPaths","dPath1","dPath2","pathLen1","pathLen2","ceil","isFinite","isInAnim","isInAnimSet","timestamp","tempDiff","change","colorsNormalized","toColour","toPath","pathes","eq","to2","easyeasy","origin","json","setTime","pause","pauseChildAnimation","pauseStart","resume","resumeChildAnimation","pauseEnd","stopChildAnimation","jumpToEnd","ele","executeAnimQueue","queue","stopAnimation","toFront","thisNode","follower","toBack","insertAfter","thatNode","getLastNode","items","setproto","method","insertion","tail","todel","arglen","exclude","collector","glowConfig","ret","shape2","index2","registerFont","face","fonts","fontcopy","glyphs","family","prop","glyph","getFont","weight","stretch","normal","bold","lighter","bolder","RegExp","fontName","test","thefont","print","letter_spacing","letters","notfirst","lineHeight","shifty","descent","curr","format","token","fullfill","tokenRegex","objNotationRegex","replacer","all","quote","quotedName","isFunc","ninja","crispFixer","crispBound","at","normalizer","crisp","st","define","readyState","isLoaded","glob","comaseparator","wildcard","numsort","current_event","firstDefined","lastDefined","objtos","ar","oldstop","listeners","indexed","ce","errors","zIndex","_events","names","nes","es","sep","exist","nt","subname","cur","nts","off","inodes","funcs","prune","once","showRecursively","origAttrTree","currentEl","currentNode","localEl","localNode","_doHide","LoadRefImage","RefImg","Image","zeroStrokeFix","appVersion","xlink","markers","block","classic","diamond","open","oval","markerCounter","updateReferenceUrl","location","paperConfig","capStyle","cachedFontHeight","updateGradientReference","newGradient","refCount","$","_createNode","setAttributeNS","gradientUnitNames","userSpaceOnUse","objectBoundingBox","gradientSpreadNames","pad","redlect","addGradientFill","defs","SVG","fx","fy","units","spread","opts","_fx","_fy","_r","_cx","_cy","shifted","dir","sqx","specs","vector","fillOpacity","updatePosition","pattern","patternTransform","addArrow","isEnd","se","refX","arrows","endPath","endMarker","startPath","startMarker","pathId","markerId","marker","use","markerHeight","markerWidth","orient","refY","getElementsByTagName","delta","startdx","enddx","dasharray","addDashes","predefValue","calculatedValues","butt","widthFactor","square","applyCustomAttributes","setFillAndStroke","_setFillAndStroke","vis","att","pn","hl","titleNode","pathClip","clipispath","clip","rc","getAttribute","documentMode","removeAttribute","startString","endString","_vbSize","isURL","ig","patternUnits","stops","fillOpacityDirty","strokeOpacity","strokeOpacityDirty","cssrule","tuneText","updateFollowers","_updateFollowers","followerElem","fnName","leading","computedStyle","fontSize","valign","direction","isIE","actualValign","fontFamily","_textdirty","texts","tspans","tspan","createTextNode","numDummyTspans","attributes","nodeValue","_getCustomBBox","dif","Element","sw","lines","isText","txtElem","theText","theMSG","availableFontFamily","availableFontSize","info","randomPos","bboxY","bboxHeight","align","isCalculated","def","subkey","fltr","stdDeviation","_blur","filter","eventType","handler","oldEventType","_tempTouchListeners","oldFn","newFn","newEvt","css","_viewBox","con","Error","cnvs","isFloating","xmlns","_left","_top","renderfix","aspectRatio","vb","viewBox","preserveAspectRatio","getScreenCTM","createSVGMatrix","_desc","txt","desc","Z","bites","blurregexp","cssDot","zoom","pathTypes","ovalTypes","path2vml","total","vals","isMove","compensation","setCoords","fillpos","flip","dxdy","kx","ky","coordsize","coordorigin","fillsize","oriOp","newpath","isOval","isGroup","div","clipRect","dstyle","textpath","textpathStyle","fontWeight","fontStyle","newfill","createNode","nonGradOpacity","opacity1","opacity2","newstroke","strokeColor","joinstyle","miterlimit","endcap","dashstyle","span","brect","W","bby","dirtyattrs","dd","bbx","oriFOpacity","oindex","fxfy","color2","clrs","colors","focus","focussize","focusposition","skew","notApplicableGroupAttrs","customGroupUpdate","childElem","ownAttr","getApplicableGroupAttributes","customAttr","inheritAttr","customElementUpdate","getApplicableAttributes","inheritAttrFromGroup","customAttrFromGroup","parentCustomAttr","parentInheritAttr","elemAttr","vbs","_viewBoxShift","vbt","oldt","isGrad","isPatt","bbt","xget","yget","soft","runtimeStyle","margin","evt","srcElement","className","tx","ty","tzoom","Path","textpathok","cs","createStyleSheet","addRule","namespaces","rvml","STRING","PX","mathFloor","DEFAULT_FILL","DEFAULT_STROKE","noHandle","FauxNode","onendHandler","_getConnectedNodes","above","below","_getTargetNode","coords","_containerEventHandler","offsetX","offsetY","owner","_rElement","mouseInteractions","outlinePath","conf","render","draw","setBBox","ctx","context","isClipped","validateAttrs","cr","save","fillStyle","strokeStyle","lineWidth","applyTransform","paint","restore","redraw","COMInstance","_bbox","clearRect","addMouseInteractivity","wrapper","_map","area","_mouseArea","eventListeners","updateMapAreaCoords","oArea","CircleFauxNode","pm","getTransformMatrix","setShapeBBox","drawPath","PathParser","setTokens","beginPath","nextCommand","getAsCurrentPoint","addMarker","moveTo","isCommandOrEnd","lineTo","newP","Point","isRelativeCommand","getScalar","getPoint","cntrl","getAsControlPoint","cp","bezierCurveTo","getReflectedControlPoint","quadraticCurveTo","control","xAxisRotation","largeArcFlag","sweepFlag","currp","cpp","centp","u","ad","ah","halfWay","addMarkerAngle","arc","closePath","checkPathHandler","_path","_mousemoveAdded","startListening","isInside","isOutside","transition","layerX","layerY","_transformPath","elAttrs","_isValid","NodeListItem","NodeList","addList","list","each","iterate","retVal","dispose","CanvasLayer","ncowner","ownerWrapper","_image","getCanvas","addToLayer","mergeWithLayerOnTop","layerObj","mergeWithLayerOnBottom","softDispose","NodeCollection","nodeItems","collectionItems","layerItems","layerOnTop","currentLayer","baseLayer","imageMap","getCurrentContext","setLayerOnTop","getCurrentCanvas","addNode","addCollection","collectionNode","ownerLayer","CanvasObjectModel","wrpr","com","root","layer","canvasEle","RectFauxNode","PathFauxNode","TextFauxNode","GroupFauxNode","nodeList","childNode","fNode","removeNode","refreshNode","refreshAll","angleTo","xp","yp","tokens","previousCommand","points","angles","getToken","makeAbsolute","priorTo","getMarkerPoints","getMarkerAngles","parentObj","strokeAlpha","globalAlpha","fillAlpha","maxR","sX","sY","tX","tY","strokeW","halign","fontArr","totalHeight","totalWidth","Infinity","startX","startY","textX","textY","measureText","fillText","parentMatrix","matrixApplied","styles","repaint","finalAttrs","positionChanged","dimensionChanged","preC","elAbove","elBelow","needsRepaint","mmap","delkeys","onmoveHandler","onstartHandler"],"mappings":"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CA;AACA;AACA,GAAG;AACH;AACA;AACA,E;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACPA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;ACNA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACLA;AACA;AACA;AACA;AACA,E;;;;;;ACJA,sB;;;;;;ACAA,6BAA6B;AAC7B,qCAAqC,gC;;;;;;ACDrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACXA,oB;;;;;;ACAA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA,mDAAmD;AACnD;AACA,uCAAuC;AACvC,E;;;;;;ACLA;AACA;AACA;AACA,a;;;;;;ACHA;AACA;AACA;;AAEA;AACA,kEAAkE,+BAA+B;AACjG,E;;;;;;ACNA,mC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB;AAChF,gFAAgF,sBAAsB;AACtG,E;;;;;;ACRA,cAAc,sB;;;;;;ACAd;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA,kBAAkB,wD;;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,wCAAwC,oCAAoC;AAC5E,4CAA4C,oCAAoC;AAChF,KAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,iCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,E;;;;;;ACrEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA,qFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB,yB;;;;;;AC5DA;AACA,qEAAsE,gBAAgB,UAAU,GAAG;AACnG,CAAC,E;;;;;;ACFD;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACNA,wC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;ACxCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChBA,iBAAiB;;AAEjB;AACA;AACA,E;;;;;;ACJA,kBAAkB,wD;;;;;;ACAlB,yC;;;;;;ACAA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;;;;;;;;;;;;;ACDA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA;;AAXA;;AAEA;;;;;;;;;;ACFA;AACA;AACA,uD;;;;;;;ACFA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,UAAU;AACV,CAAC,E;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACnBA;AACA;AACA;AACA,E;;;;;;;ACHA;AACA;AACA;AACA;AACA;;AAEA;AACA,yFAAgF,aAAa,EAAE;;AAE/F;AACA,qDAAqD,0BAA0B;AAC/E;AACA,E;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACZA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,WAAW,eAAe;AAC/B;AACA,KAAK;AACL;AACA,E;;;;;;ACpBA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D,E;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACNA,6E;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;ACZA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA,wGAAwG,OAAO;AAC/G;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,4B;;;;;;ACjCA,4BAA4B,e;;;;;;ACA5B;AACA,UAAU;AACV,E;;;;;;ACFA;AACA;AACA;AACA;AACA,gD;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,oBAAoB,uBAAuB,SAAS,IAAI;AACxD,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA,KAAK;AACL;AACA,sBAAsB,iCAAiC;AACvD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,8BAA8B;AAC5F;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,gBAAgB;;AAE1E;AACA;AACA;AACA,oBAAoB,oBAAoB;;AAExC,0CAA0C,oBAAoB;;AAE9D;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,wBAAwB,eAAe,EAAE;AACzC,wBAAwB,gBAAgB;AACxC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK,QAAQ,iCAAiC;AAClG,CAAC;AACD;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0C;;;;;;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,E;;;;;;ACdA;AACA;AACA;AACA;AACA,E;;;;;;ACJA;AACA;AACA;AACA,kBAAkB;;AAElB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,UAAU;AACb;AACA,E;;;;;;;;;;;;ACfA,yC;;;;;;ACAA,sC;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;qBAEgB,UAAU4jC,IAAV,EAAgB;AAC5B,QAAIpiC,UAAU,OAAd;AAAA,QACIO,MAAM,gBADV;AAAA,QAEIqG,YAAY,QAFhB;AAAA,QAGIy7B,gBAAgB,SAHpB;AAAA,QAIIC,WAAW,GAJf;AAAA,QAKIx4B,MAAM,SAANA,GAAM,GAAY,CAAE,CALxB;AAAA,QAMIy4B,UAAU,SAAVA,OAAU,CAAU1gC,CAAV,EAAa8H,CAAb,EAAgB;AACtB,eAAO9H,IAAI8H,CAAX;AACH,KARL;AAAA,QASI64B,aATJ;AAAA,QAUI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","file":"raphael.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"RedRaphael\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"RedRaphael\"] = factory();\n\telse\n\t\troot[\"RedRaphael\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 40);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 03ac1623c6b40e00dd0c","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 0\n// module chunks = 0","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 1\n// module chunks = 0","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 2\n// module chunks = 0","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 3\n// module chunks = 0","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 4\n// module chunks = 0","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 5\n// module chunks = 0","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 6\n// module chunks = 0","/**!\n * RedRaphael 1.0.0 - JavaScript Vector Library\n * Copyright (c) 2012-2013 FusionCharts Technologies <http://www.fusioncharts.com>\n *\n * Raphael 2.1.0\n * Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n * Copyright © 2008-2012 Sencha Labs <http://sencha.com>\n *\n * Licensed under the MIT license.\n */\n\nimport eve from './eve/eve';\n\nvar _win = (typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : null);\n\n    /*\\\n     * Raphael\n     [ method ]\n     **\n     * Creates a canvas object on which to draw.\n     * You must do this first, as all future calls to drawing methods\n     * from this instance will be bound to this canvas.\n     > Parameters\n     **\n     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - x (number)\n     - y (number)\n     - width (number)\n     - height (number)\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.\n     - callback (function) #optional callback function which is going to be executed in the context of newly created paper\n     * or\n     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eve’s “DOMLoad” event. In this case method returns `undefined`.\n     = (object) @Paper\n     > Usage\n     | // Each of the following examples create a canvas\n     | // that is 320px wide by 200px high.\n     | // Canvas is created at the viewport’s 10,50 coordinate.\n     | var paper = Raphael(10, 50, 320, 200);\n     | // Canvas is created at the top left corner of the #notepad element\n     | // (or its top right corner in dir=\"rtl\" elements)\n     | var paper = Raphael(document.getElementById(\"notepad\"), 320, 200);\n     | // Same as above\n     | var paper = Raphael(\"notepad\", 320, 200);\n     | // Image dump\n     | var set = Raphael([\"notepad\", 320, 200, {\n     |     type: \"rect\",\n     |     x: 10,\n     |     y: 10,\n     |     width: 25,\n     |     height: 25,\n     |     stroke: \"#f00\"\n     | }, {\n     |     type: \"text\",\n     |     x: 30,\n     |     y: 40,\n     |     text: \"Dump\"\n     | }]);\n    \\*/\n    function R(first) {\n        var args,\n            f;\n\n        // Code commented as resources will now be referenced using relative URLs.\n        // @todo Remove once we have ascertained that there are no issues in any environment.\n        // if (R._url) { // Reinitialize URLs to be safe from pop state event\n        //     R._url = (R._g && R._g.win || _window).location.href.replace(/#.*?$/, \"\");\n        // }\n        // If the URL is undefined only then initialize the URL with blank in order to support\n        // both relative as well as absolute URLs\n        // @todo Need to track the URL change and modify the URL for the gradient and other elements dynamically.\n        if (R._url === undefined) {\n            R._url = \"\";\n        }\n\n        if (R.is(first, \"function\")) {\n            return loaded ? first() : eve.on(\"raphael.DOMload\", first);\n        }\n        else if (R.is(first, array)) {\n            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);\n        }\n        else {\n            args = Array.prototype.slice.call(arguments, 0);\n            if (R.is(args[args.length - 1], \"function\")) {\n                f = args.pop();\n                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on(\"raphael.DOMload\", function() {\n                    f.call(R._engine.create[apply](R, args));\n                });\n            } else {\n                return R._engine.create[apply](R, arguments);\n            }\n        }\n    }\n\n    R.upgrade = \"1.0.0\";\n    R.version = \"2.1.0\";\n    R.eve = eve;\n    // RedRaphael = R;\n\n    var loaded,\n        undef,\n        E = \"\",\n        S = \" \",\n        UNIT_INTERVAL = 40,\n        proto = \"prototype\",\n        has = \"hasOwnProperty\",\n        appendChild = \"appendChild\",\n        apply = \"apply\",\n        concat = \"concat\",\n        nu = \"number\",\n        string = \"string\",\n        array = \"array\",\n        object = \"object\",\n        finite = \"finite\",\n        toString = \"toString\",\n        fillString = \"fill\",\n        push = \"push\",\n        setAttribute = \"setAttribute\",\n        split = \"split\",\n        none = \"none\",\n        black = \"#000\",\n        OBJECTSTRING = \"object\",\n        arrayToStr = \"[object Array]\",\n        objectToStr = \"[object Object]\",\n        arraySlice = Array.prototype.slice,\n        arraySplice = Array.prototype.splice,\n        arrayShift = Array.prototype.shift,\n        arrayPop = Array.prototype.pop,\n        hasPrototypeBug = (function () {\n            var a = function () {};\n            return a.hasOwnProperty(\"prototype\");\n        }()),\n        g = {\n            doc: _win.document,\n            win: _win\n        },\n        oldRaphael = {\n            was: Object.prototype[has].call(g.win, \"Raphael\"),\n            is: g.win.Raphael\n        },\n        doc = g.doc,\n        win = g.win,\n\n        supportsTouch = R.supportsTouch = \"createTouch\" in doc,\n\n        // The devices which both touch and pointer.\n        supportsOnlyTouch = R.supportsOnlyTouch = (supportsTouch &&\n                        !(win.navigator.maxTouchPoints ||\n                        win.navigator.msMaxTouchPoints)),\n\n        CustomAttributes = function () {\n            /*\\\n             * Raphael.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Raphael.customAttributes\n            \\*/\n            /*\\\n             * Raphael.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number across all papers you can do it\n             * easily with custom attributes:\n             > Usage\n             | Raphael.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: \"hsb(\" + num + \", 0.75, 1)\"};\n             | };\n             | // Custom attribute “hue” will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | Raphael.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: \"hsb(\" + [h, s, b].join(\",\") + \")\"};\n             | };\n             | c.attr({hsb: \"0.5 .8 1\"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n        },\n        pluck = function (checkWith) {\n            var i = 1,\n                ii = arguments.length;\n            for (; i < ii; ++i) {\n                if (arguments[i] !== checkWith) {\n                    return arguments[i]\n                }\n            }\n        },\n        caproto = R.ca = R.customAttributes = CustomAttributes.prototype,\n\n        Paper = function () {\n            /*\\\n             * Paper.ca\n             [ property (object) ]\n             **\n             * Shortcut for @Paper.customAttributes\n            \\*/\n            /*\\\n             * Paper.customAttributes\n             [ property (object) ]\n             **\n             * If you have a set of attributes that you would like to represent\n             * as a function of some number you can do it easily with custom attributes:\n             > Usage\n             | paper.customAttributes.hue = function (num) {\n             |     num = num % 1;\n             |     return {fill: \"hsb(\" + num + \", 0.75, 1)\"};\n             | };\n             | // Custom attribute “hue” will change fill\n             | // to be given hue with fixed saturation and brightness.\n             | // Now you can use it like this:\n             | var c = paper.circle(10, 10, 10).attr({hue: .45});\n             | // or even like this:\n             | c.animate({hue: 1}, 1e3);\n             |\n             | // You could also create custom attribute\n             | // with multiple parameters:\n             | paper.customAttributes.hsb = function (h, s, b) {\n             |     return {fill: \"hsb(\" + [h, s, b].join(\",\") + \")\"};\n             | };\n             | c.attr({hsb: \"0.5 .8 1\"});\n             | c.animate({hsb: [1, 0, 0.5]}, 1e3);\n            \\*/\n            this.ca = this.customAttributes = new CustomAttributes();\n            this._CustomAttributes = function () {};\n            this._CustomAttributes.prototype = this.ca;\n            this._elementsById = {};\n            this.id = R._oid++;\n            eve('raphael.new', this);\n        },\n\n        /*\\\n         * Raphael.fn\n         [ property (object) ]\n         **\n         * You can add your own method to the canvas. For example if you want to draw a pie chart,\n         * you can create your own pie chart function and ship it as a Raphaël plugin. To do this\n         * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a\n         * Raphaël instance is created, otherwise it will take no effect. Please note that the\n         * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to\n         * ensure any namespacing ensures proper context.\n         > Usage\n         | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {\n         |     return this.path( ... );\n         | };\n         | // or create namespace\n         | Raphael.fn.mystuff = {\n         |     arrow: function () {…},\n         |     star: function () {…},\n         |     // etc…\n         | };\n         | var paper = Raphael(10, 10, 630, 480);\n         | // then use it\n         | paper.arrow(10, 10, 30, 30, 5).attr({fill: \"#f00\"});\n         | paper.mystuff.arrow();\n         | paper.mystuff.star();\n        \\*/\n        paperproto = R.fn = Paper.prototype = R.prototype,\n\n        elements = {\n            circle: 1,\n            rect: 1,\n            path: 1,\n            ellipse: 1,\n            text: 1,\n            image: 1,\n            group: 1\n        },\n        // Add new dragstart, dragmove and dragend events in order to support touch drag in both touch and hybrid devices\n        events = \"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel dragstart dragmove dragend\"[split](S),\n        touchMap = R._touchMap = {\n            mousedown: \"touchstart\",\n            mousemove: \"touchmove\",\n            mouseup: \"touchend\"\n        },\n        dragEventMap = R._dragEventMap = {\n            dragstart: \"mousedown\",\n            dragmove: \"mousemove\",\n            dragend: \"mouseup\"\n        },\n\n        Str = String,\n        toFloat = win.parseFloat,\n        toInt = win.parseInt,\n        math = Math,\n        mmax = math.max,\n        mmin = math.min,\n        abs = math.abs,\n        pow = math.pow,\n        mathCos = math.cos,\n        mathSin = math.sin,\n        mathSqrt = math.sqrt,\n        round = math.round,\n        PI = math.PI,\n        deg2rad = PI / 180,\n        rad2deg = 180 / PI,\n\n        lowerCase = Str.prototype.toLowerCase,\n        upperCase = Str.prototype.toUpperCase,\n        objectToString = Object.prototype.toString,\n        paper = {},\n\n        separator = /[, ]+/,\n        formatrg = /\\{(\\d+)\\}/g,\n        ISURL = R._ISURL = /^url\\(['\"]?([^\\)]+?)['\"]?\\)$/i,\n        colourRegExp = /^\\s*((#[a-f\\d]{6})|(#[a-f\\d]{3})|rgba?\\(\\s*([\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+%?(?:\\s*,\\s*[\\d\\.]+%?)?)\\s*\\)|hsba?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\)|hsla?\\(\\s*([\\d\\.]+(?:deg|\\xb0|%)?\\s*,\\s*[\\d\\.]+%?\\s*,\\s*[\\d\\.]+(?:%?\\s*,\\s*[\\d\\.]+)?)%?\\s*\\))\\s*$/i,\n        bezierrg = /^(?:cubic-)?bezier\\(([^,]+),([^,]+),([^,]+),([^\\)]+)\\)/,\n        whitespace = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]/g,\n        commaSpaces = /[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/,\n        p2s = /,?([achlmqrstvxz]),?/gi,\n        pathCommand = /([achlmrqstvz])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        tCommand = /([rstm])[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029,]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*)+)/ig,\n        pathValues = /(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*,?[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029]*/ig,\n        radial_gradient = R._radial_gradient = /^x?r(?:\\(([^\\)]*?)\\))?/,\n\n        isnan = {\n            \"NaN\": 1,\n            \"Infinity\": 1,\n            \"-Infinity\": 1\n        },\n        hsrg = {\n            hs: 1,\n            rg: 1\n        },\n        availableAttrs = R._availableAttrs = {\n            \"arrow-end\": none,\n            \"arrow-start\": none,\n            blur: 0,\n            \"clip-rect\": \"0 0 1e9 1e9\",\n            \"clip-path\": E,\n            cursor: \"default\",\n            cx: 0,\n            cy: 0,\n            fill: \"#fff\",\n            \"fill-opacity\": 1,\n            font: '10px \"Arial\"',\n            \"font-family\": '\"Arial\"',\n            \"font-size\": \"10\",\n            \"font-style\": \"normal\",\n            \"font-weight\": 400,\n            gradient: 0,\n            height: 0,\n            href: \"about:blank\",\n            \"letter-spacing\": 0,\n            \"line-height\": 12,\n            \"vertical-align\": \"middle\",\n            opacity: 1,\n            path: \"M0,0\",\n            r: 0,\n            rx: 0,\n            ry: 0,\n            src: E,\n            stroke: \"#000\",\n            \"stroke-dasharray\": E,\n            \"stroke-linecap\": \"butt\",\n            \"stroke-linejoin\": \"butt\",\n            \"stroke-miterlimit\": 0,\n            \"stroke-opacity\": 1,\n            \"stroke-width\": 1,\n            target: \"_blank\",\n            \"text-anchor\": \"middle\",\n            \"visibility\": E,\n            title: E,\n            transform: E,\n            rotation: 0,\n            width: 0,\n            x: 0,\n            y: 0,\n            alpha: nu\n        },\n        availableAnimAttrs = R._availableAnimAttrs = {\n            blur: nu,\n            \"clip-rect\": \"csv\",\n            \"clip-path\": \"path\",\n            cx: nu,\n            cy: nu,\n            fill: \"colour\",\n            \"fill-opacity\": nu,\n            \"font-size\": nu,\n            height: nu,\n            opacity: nu,\n            path: \"path\",\n            r: nu,\n            rx: nu,\n            ry: nu,\n            stroke: \"colour\",\n            \"stroke-opacity\": nu,\n            \"stroke-width\": nu,\n            transform: \"transform\",\n            width: nu,\n            x: nu,\n            y: nu,\n            // Required for pie 3d\n            \"color\": \"colour\",\n            \"borderColor\": \"colour\",\n            \"borderWidth\": nu,\n            alpha: nu\n        },\n        eldata = {},\n\n        sortByKey = function(a, b) {\n            return a.key - b.key;\n        },\n        sortByNumber = function(a, b) {\n            return toFloat(a) - toFloat(b);\n        },\n        fun = function() {\n        },\n        pipe = function(x) {\n            return x;\n        },\n\n        rectPath = R._rectPath = function(x, y, w, h, r) {\n            if (r) {\n                return [[\"M\", x + r, y], [\"l\", w - r * 2, 0], [\"a\", r, r, 0, 0, 1, r, r], [\"l\", 0, h - r * 2], [\"a\", r, r, 0, 0, 1, -r, r], [\"l\", r * 2 - w, 0], [\"a\", r, r, 0, 0, 1, -r, -r], [\"l\", 0, r * 2 - h], [\"a\", r, r, 0, 0, 1, r, -r], [\"z\"]];\n            }\n            return [[\"M\", x, y], [\"l\", w, 0], [\"l\", 0, h], [\"l\", -w, 0], [\"z\"]];\n        },\n\n        ellipsePath = function(x, y, rx, ry) {\n            if (ry == null) {\n                ry = rx;\n            }\n            return [[\"M\", x, y], [\"m\", 0, -ry], [\"a\", rx, ry, 0, 1, 1, 0, 2 * ry], [\"a\", rx, ry, 0, 1, 1, 0, -2 * ry], [\"z\"]];\n        },\n\n        getPath = R._getPath = {\n            group: function() {\n                return false;\n            },\n            path: function(el) {\n                return el.attr(\"path\");\n            },\n            circle: function(el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.r);\n            },\n            ellipse: function(el) {\n                var a = el.attrs;\n                return ellipsePath(a.cx, a.cy, a.rx, a.ry);\n            },\n            rect: function(el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height, a.r);\n            },\n            image: function(el) {\n                var a = el.attrs;\n                return rectPath(a.x, a.y, a.width, a.height);\n            },\n            text: function(el) {\n                var bbox = el._getBBox();\n                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n\n        /*\\\n         * Raphael.mapPath\n         [ method ]\n         **\n         * Transform the path string with given matrix.\n         > Parameters\n         - path (string) path string\n         - matrix (object) see @Matrix\n         = (string) transformed path string\n        \\*/\n        mapPath = R.mapPath = function(path, matrix) {\n            if (!matrix) {\n                return path;\n            }\n            var x,\n                y,\n                i,\n                j,\n                ii,\n                jj,\n                pathi;\n\n            path = path2curve(path);\n            for (i = 0, ii = path.length; i < ii; i++) {\n                pathi = path[i];\n                for (j = 1, jj = pathi.length; j < jj; j += 2) {\n                    x = matrix.x(pathi[j], pathi[j + 1]);\n                    y = matrix.y(pathi[j], pathi[j + 1]);\n                    pathi[j] = x;\n                    pathi[j + 1] = y;\n                }\n            }\n            return path;\n        },\n\n        /*\\\n         * Raphael.pick\n         [ method ]\n         **\n         * Returns the first truthy argument.\n        \\*/\n        pick = R.pick = function() {\n            for (var arg, i = 0, ii = arguments.length; i < ii; i += 1) {\n                arg = arguments[i];\n                if (!arg && arg !== false && arg !== 0) {\n                    continue;\n                }\n                return arg;\n            }\n            return undef;\n        },\n\n        lastArgIfGroup = R._lastArgIfGroup = function (args, clear) {\n            var last = args.length - 1,\n                arg = args[last];\n\n            if (arg && (arg.constructor === R.el.constructor) && arg.type === 'group') {\n                if (clear) {\n                    args[last] = undefined;\n                    delete args[last];\n                    arraySplice.call(args, last, 1);\n                }\n                return arg;\n            }\n        },\n\n        serializeArgs = R._serializeArgs = function (args) {\n            var arg0 = args[0],\n                pathString,\n                attrs,\n                i,\n                ii;\n\n            if (R.is(arg0, 'object') && !R.is(arg0, 'array') && arg0.type !== 'group') {\n\n                attrs = arg0;\n\n                if (arg0.path) {\n                    pathString = arg0.path;\n                    pathString && !R.is(pathString, string) &&\n                        !R.is(pathString[0], array) && (pathString += E);\n                }\n\n                for (i = 1, ii = arguments.length; i < ii; i += 2) {\n                    if (!attrs[arguments[i]]) {\n                        attrs[arguments[i]] = arguments[i + 1];\n                    }\n                }\n            }\n            else {\n                attrs = {};\n                for (i = 1, ii = arguments.length; i < ii; i += 2) {\n                    attrs[arguments[i]] = args[(i-1) / 2] || arguments[i+1];\n                }\n            }\n            return attrs;\n        },\n\n        checkCyclicRef = function (obj, parentArr) {\n            var i = parentArr.length,\n                bIndex = -1;\n\n            while (i--) {\n                if (obj === parentArr[i]) {\n                    bIndex = i;\n                    return bIndex;\n                }\n            }\n            return bIndex;\n        },\n\n        merge = R.merge = function (obj1, obj2, skipUndef, tgtArr, srcArr) {\n            var item,\n                srcVal,\n                tgtVal,\n                str,\n                cRef;\n            //check whether obj2 is an array\n            //if array then iterate through it's index\n            //**** MOOTOOLS precution\n\n            if (!srcArr) {\n                tgtArr = [obj1];\n                srcArr = [obj2];\n            }\n            else {\n                tgtArr.push(obj1);\n                srcArr.push(obj2);\n            }\n\n            if (obj2 instanceof Array) {\n                for (item = 0; item < obj2.length; item += 1) {\n                    try {\n                        srcVal = obj1[item];\n                        tgtVal = obj2[item];\n                    }\n                    catch (e) {\n                        continue;\n                    }\n\n                    if (typeof tgtVal !== OBJECTSTRING) {\n                        if (!(skipUndef && tgtVal === undefined)) {\n                            obj1[item] = tgtVal;\n                        }\n                    }\n                    else {\n                        if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                            srcVal = obj1[item] = tgtVal instanceof Array ? [] : {};\n                        }\n                        cRef = checkCyclicRef(tgtVal, srcArr);\n                        if (cRef !== -1) {\n                            srcVal = obj1[item] = tgtArr[cRef];\n                        }\n                        else {\n                            merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                        }\n                    }\n                }\n            }\n            else {\n                for (item in obj2) {\n                    try {\n                        srcVal = obj1[item];\n                        tgtVal = obj2[item];\n                    }\n                    catch (e) {\n                        continue;\n                    }\n\n                    if (tgtVal !== null && typeof tgtVal === OBJECTSTRING) {\n                        // Fix for issue BUG: FWXT-602\n                        // IE < 9 Object.prototype.toString.call(null) gives\n                        // \"[object Object]\" instead of \"[object Null]\"\n                        // that's why null value becomes Object in IE < 9\n                        str = objectToString.call(tgtVal);\n                        if (str === objectToStr) {\n                            if (srcVal === null || typeof srcVal !== OBJECTSTRING) {\n                                srcVal = obj1[item] = {};\n                            }\n                            cRef = checkCyclicRef(tgtVal, srcArr);\n                            if (cRef !== -1) {\n                                srcVal = obj1[item] = tgtArr[cRef];\n                            }\n                            else {\n                                merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                            }\n                        }\n                        else if (str === arrayToStr) {\n                            if (srcVal === null || !(srcVal instanceof Array)) {\n                                srcVal = obj1[item] = [];\n                            }\n                            cRef = checkCyclicRef(tgtVal, srcArr);\n                            if (cRef !== -1) {\n                                srcVal = obj1[item] = tgtArr[cRef];\n                            }\n                            else {\n                                merge(srcVal, tgtVal, skipUndef, tgtArr, srcArr);\n                            }\n                        }\n                        else {\n                            obj1[item] = tgtVal;\n                        }\n                    }\n                    else {\n                        obj1[item] = tgtVal;\n                    }\n                }\n            }\n            return obj1;\n        },\n\n        extend = R.extend = function (obj1, obj2, skipUndef) {\n            if (typeof obj1 !== OBJECTSTRING && typeof obj2 !== OBJECTSTRING) {//if none of the arguments are object then return back\n                return null;\n            }\n\n            if (typeof obj2 !== OBJECTSTRING || obj2 === null) {\n                return obj1;\n            }\n\n            if (typeof obj1 !== OBJECTSTRING) {\n                obj1 = obj2 instanceof Array ? [] : {};\n            }\n            merge(obj1, obj2, skipUndef);\n            return obj1;\n\n        },\n\n        /*\\\n         * Raphael.is\n         [ method ]\n         **\n         * Handfull replacement for `typeof` operator.\n         > Parameters\n         - o (…) any object or primitive\n         - type (string) name of the type, i.e. “string”, “function”, “number”, etc.\n         = (boolean) is given value is of given type\n        \\*/\n        is = R.is = function(o, type) {\n            type = lowerCase.call(type);\n\n            if (type == finite) {\n                return !isnan[has](+o);\n            }\n            if (type == array) {\n                return o instanceof Array;\n            }\n            if (type === 'object' && (o === undef || o === null)) {\n                return false;\n            }\n            return  (type == \"null\" && o === null) ||\n                (type == typeof o && o !== null) ||\n                (type == object && o === Object(o)) ||\n                (type == \"array\" && Array.isArray && Array.isArray(o)) ||\n                objectToString.call(o).slice(8, -1).toLowerCase() == type;\n        },\n        /*\\\n          * Raphael.createUUID\n          [ method ]\n          **\n          * Returns RFC4122, version 4 ID\n         \\*/\n        createUUID = R.createUUID = (function(uuidRegEx, uuidReplacer) {\n            return function() {\n                return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(uuidRegEx, uuidReplacer).toUpperCase();\n            };\n        })(/[xy]/g, function(c) {\n            var r = math.random() * 16 | 0,\n                v = c == \"x\" ? r : (r & 3 | 8);\n            return v.toString(16);\n        }),\n\n        /*\\\n          * Raphael.getElementID\n          [ method ]\n          **\n          * Add 'rr-' prefix before created IDs\n         \\*/\n        getElementID = R.getElementID = function (id) {\n            return \"rr-\" + id;\n        },\n\n        /*\\\n          * Raphael.clone\n          [ method ]\n          **\n          * Returns a recursively cloned version of an object.\n         \\*/\n        clone = R.clone = hasPrototypeBug ? function (obj) {\n                if (Object(obj) !== obj) {\n                    return obj;\n                }\n                var res = new obj.constructor;\n                for (var key in obj)\n                    if (key !== \"prototype\" && obj[has](key)) {\n                        res[key] = clone(obj[key]);\n                    }\n                return res;\n            } : function (obj) {\n                if (Object(obj) !== obj) {\n                    return obj;\n                }\n                var res = new obj.constructor;\n                for (var key in obj)\n                    if (obj[has](key)) {\n                        res[key] = clone(obj[key]);\n                    }\n                return res;\n            },\n        Node = _win.Node;\n        //Adding pollyfill for IE11\n        if (Node && !Node.prototype.contains) {\n            Node.prototype.contains = function(el){\n                while (el = el.parentNode) {\n                    if (el === this) return true;\n                }\n                return false;\n            }\n        };\n\n    R._g = g;\n\n    // PriorityQueue Function Declaration\n    function PriorityQueue(comparator) {\n      this._comparator = comparator;\n      this._elements = [];\n    }\n\n    PriorityQueue.prototype.isEmpty = function() {\n      return this.size() === 0;\n    };\n\n    PriorityQueue.prototype.peek = function() {\n      if (this.isEmpty()) return null;\n\n      return this._elements[0];\n    };\n\n    PriorityQueue.prototype.deq = function() {\n      var first = this.peek();\n      var last = this._elements.pop();\n      var size = this.size();\n\n      if (size === 0) return first;\n\n      this._elements[0] = last;\n      var current = 0;\n\n      while (current < size) {\n        var largest = current;\n        var left = (2 * current) + 1;\n        var right = (2 * current) + 2;\n\n        if (left < size && this._compare(left, largest) >= 0) {\n          largest = left;\n        }\n\n        if (right < size && this._compare(right, largest) >= 0) {\n          largest = right;\n        }\n\n        if (largest === current) break;\n\n        this._swap(largest, current);\n        current = largest;\n      }\n\n      return first;\n    };\n\n    PriorityQueue.prototype.enq = function(element) {\n      var size = this._elements.push(element);\n      var current = size - 1;\n\n      while (current > 0) {\n        var parent = Math.floor((current - 1) / 2);\n\n        if (this._compare(current, parent) <= 0) break;\n\n        this._swap(parent, current);\n        current = parent;\n      }\n\n      return size;\n    };\n\n    PriorityQueue.prototype.size = function() {\n      return this._elements.length;\n    };\n\n    PriorityQueue.prototype._compare = function(a, b) {\n      return this._comparator(this._elements[a], this._elements[b]);\n    };\n\n    PriorityQueue.prototype._swap = function(a, b) {\n      var aux = this._elements[a];\n      this._elements[a] = this._elements[b];\n      this._elements[b] = aux;\n    };\n\n    /*\\\n     * Raphael.type\n     [ property (string) ]\n     **\n     * Can be “SVG”, “VML” or empty, depending on browser support.\n    \\*/\n    R.type = (win.ENABLE_RED_CANVAS && (win.CanvasRenderingContext2D || doc.createElement('canvas').getContext)) ? \"CANVAS\" :\n            (win.SVGAngle || doc.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\") ? \"SVG\" : \"VML\");\n\n    if (R.type == \"VML\") {\n        var d = doc.createElement(\"div\"),\n            b;\n\n        d.innerHTML = '<v:shape adj=\"1\"/>';\n        b = d.firstChild;\n        b.style.behavior = \"url(#default#VML)\";\n        if (!(b && typeof b.adj == object)) {\n            R.type = E;\n            // return (R.type = E);\n        }\n        d = null;\n    }\n\n    /*\\\n     * Raphael.svg\n     [ property (boolean) ]\n     **\n     * `true` if browser supports SVG.\n    \\*/\n    /*\\\n     * Raphael.vml\n     [ property (boolean) ]\n     **\n     * `true` if browser supports VML.\n    \\*/\n    R.svg = !((R.vml = R.type == \"VML\") || (R.canvas = R.type == \"CANVAS\"));\n\n    R._Paper = Paper;\n    R._id = 0;\n    R._oid = 0;\n\n    /*\\\n     * Raphael.angle\n     [ method ]\n     **\n     * Returns angle between two or three points\n     > Parameters\n     - x1 (number) x coord of first point\n     - y1 (number) y coord of first point\n     - x2 (number) x coord of second point\n     - y2 (number) y coord of second point\n     - x3 (number) #optional x coord of third point\n     - y3 (number) #optional y coord of third point\n     = (number) angle in degrees.\n    \\*/\n    R.angle = function (x1, y1, x2, y2, x3, y3) {\n        if (x3 == null) {\n            var x = x1 - x2,\n            y = y1 - y2;\n            if (!x && !y) {\n                return 0;\n            }\n            return (180 + math.atan2(-y, -x) * rad2deg + 360) % 360;\n        }\n        else {\n            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);\n        }\n    };\n\n    /*\\\n     * Raphael.rad\n     [ method ]\n     **\n     * Transform angle to radians\n     > Parameters\n     - deg (number) angle in degrees\n     = (number) angle in radians.\n    \\*/\n    R.rad = function (deg) {\n        return deg % 360 * deg2rad;\n    };\n\n    /*\\\n     * Raphael.deg\n     [ method ]\n     **\n     * Transform angle to degrees\n     > Parameters\n     - deg (number) angle in radians\n     = (number) angle in degrees.\n    \\*/\n    R.deg = function (rad) {\n        return rad * rad2deg % 360;\n    };\n\n    /*\\\n     * Raphael.snapTo\n     [ method ]\n     **\n     * Snaps given value to given grid.\n     > Parameters\n     - values (array|number) given array of values or step of the grid\n     - value (number) value to adjust\n     - tolerance (number) #optional tolerance for snapping. Default is `10`.\n     = (number) adjusted value.\n    \\*/\n    R.snapTo = function (values, value, tolerance) {\n        var rem,\n            i;\n\n        if (!is(tolerance, finite)) {\n            tolerance = 10;\n        }\n\n        if (is(values, array)) {\n            i = values.length;\n            while (i--) {\n                if (abs(values[i] - value) <= tolerance) {\n                    return values[i];\n                }\n            }\n        }\n        else {\n            values = +values;\n            rem = value % values;\n\n            if (rem < tolerance) {\n                return value - rem;\n            }\n            if (rem > values - tolerance) {\n                return value - rem + values;\n            }\n        }\n        return value;\n    };\n\n    /*\\\n     * Raphael.setWindow\n     [ method ]\n     **\n     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.\n     > Parameters\n     - newwin (window) new window object\n    \\*/\n    R.setWindow = function (newwin) {\n        eve(\"raphael.setWindow\", R, g.win, newwin);\n        win = g.win = newwin;\n        doc = g.doc = g.win.document;\n        if (R._engine.initWin) {\n            R._engine.initWin(g.win);\n        }\n    };\n\n    var toHex = function (color) {\n            if (R.vml) {\n                // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/\n                var trim = /^\\s+|\\s+$/g;\n                var bod;\n                try {\n                    var docum = new ActiveXObject(\"htmlfile\");\n                    docum.write(\"<body>\");\n                    docum.close();\n                    bod = docum.body;\n                } catch (e) {\n                    bod = createPopup().document.body;\n                }\n                var range = bod.createTextRange();\n                toHex = cacher(function(color) {\n                    try {\n                        bod.style.color = Str(color).replace(trim, E);\n                        var value = range.queryCommandValue(\"ForeColor\");\n                        value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);\n                        return \"#\" + (\"000000\" + value.toString(16)).slice(-6);\n                    } catch (e) {\n                        return none;\n                    }\n                });\n            } else {\n                var i = g.doc.createElement(\"i\");\n                i.title = \"Rapha\\xebl Colour Picker\";\n                i.style.display = none;\n                g.doc.body.appendChild(i);\n                toHex = cacher(function(color) {\n                    i.style.color = color;\n                    return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue(\"color\");\n                });\n            }\n            return toHex(color);\n        },\n        hsbtoString = function() {\n            return \"hsb(\" + [this.h, this.s, this.b] + \")\";\n        },\n        hsltoString = function() {\n            return \"hsl(\" + [this.h, this.s, this.l] + \")\";\n        },\n        rgbtoString = function() {\n            return this.hex;\n        },\n        prepareRGB = function(r, g, b) {\n            if (g == null && is(r, object) && \"r\" in r && \"g\" in r && \"b\" in r) {\n                b = r.b;\n                g = r.g;\n                r = r.r;\n            }\n            if (g == null && is(r, string)) {\n                var clr = R.getRGB(r);\n                r = clr.r;\n                g = clr.g;\n                b = clr.b;\n            }\n            if (r > 1 || g > 1 || b > 1) {\n                r /= 255;\n                g /= 255;\n                b /= 255;\n            }\n\n            return [r, g, b];\n        },\n        packageRGB = function(r, g, b, o) {\n            var rgb = {\n                r: (r *= 255),\n                g: (g *= 255),\n                b: (b *= 255),\n                hex: R.rgb(r, g, b),\n                toString: rgbtoString\n            };\n            is(o, \"finite\") && (rgb.opacity = o);\n            return rgb;\n        };\n\n    /*\\\n     * Raphael.color\n     [ method ]\n     **\n     * Parses the color string and returns object with all values for the given color.\n     > Parameters\n     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)\n     = (object) Combined RGB & HSB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #••••••,\n     o     error (boolean) `true` if string can’t be parsed,\n     o     h (number) hue,\n     o     s (number) saturation,\n     o     v (number) value (brightness),\n     o     l (number) lightness\n     o }\n    \\*/\n    R.color = function(clr) {\n        var rgb;\n        if (R.is(clr, object) && \"h\" in clr && \"s\" in clr && \"b\" in clr) {\n            rgb = R.hsb2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else if (R.is(clr, object) && \"h\" in clr && \"s\" in clr && \"l\" in clr) {\n            rgb = R.hsl2rgb(clr);\n            clr.r = rgb.r;\n            clr.g = rgb.g;\n            clr.b = rgb.b;\n            clr.hex = rgb.hex;\n        } else {\n            if (R.is(clr, \"string\")) {\n                clr = R.getRGB(clr);\n            }\n            if (R.is(clr, object) && \"r\" in clr && \"g\" in clr && \"b\" in clr) {\n                rgb = R.rgb2hsl(clr);\n                clr.h = rgb.h;\n                clr.s = rgb.s;\n                clr.l = rgb.l;\n                rgb = R.rgb2hsb(clr);\n                clr.v = rgb.b;\n            } else {\n                clr = {\n                    hex: none\n                };\n                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;\n            }\n        }\n        clr.toString = rgbtoString;\n        return clr;\n    };\n\n    /*\\\n     * Raphael.hsb2rgb\n     [ method ]\n     **\n     * Converts HSB values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - v (number) value or brightness\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #••••••\n     o }\n    \\*/\n    R.hsb2rgb = function(h, s, v, o) {\n        if (this.is(h, object) && \"h\" in h && \"s\" in h && \"b\" in h) {\n            v = h.b;\n            s = h.s;\n            h = h.h;\n            o = h.o;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = v * s;\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = v - C;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n\n    /*\\\n     * Raphael.hsl2rgb\n     [ method ]\n     **\n     * Converts HSL values to RGB object.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue,\n     o     hex (string) color in HTML/CSS format: #••••••\n     o }\n    \\*/\n    R.hsl2rgb = function(h, s, l, o) {\n        if (this.is(h, object) && \"h\" in h && \"s\" in h && \"l\" in h) {\n            l = h.l;\n            s = h.s;\n            h = h.h;\n        }\n        if (h > 1 || s > 1 || l > 1) {\n            h /= 360;\n            s /= 100;\n            l /= 100;\n        }\n        h *= 360;\n        var R, G, B, X, C;\n        h = (h % 360) / 60;\n        C = 2 * s * (l < .5 ? l : 1 - l);\n        X = C * (1 - abs(h % 2 - 1));\n        R = G = B = l - C / 2;\n\n        h = ~~h;\n        R += [C, X, 0, 0, X, C][h];\n        G += [X, C, C, X, 0, 0][h];\n        B += [0, 0, X, C, C, X][h];\n        return packageRGB(R, G, B, o);\n    };\n\n    /*\\\n     * Raphael.rgb2hsb\n     [ method ]\n     **\n     * Converts RGB values to HSB object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSB object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     b (number) brightness\n     o }\n    \\*/\n    R.rgb2hsb = function(r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, V, C;\n        V = mmax(r, g, b);\n        C = V - mmin(r, g, b);\n        H = (C == 0 ? null :\n            V == r ? (g - b) / C :\n            V == g ? (b - r) / C + 2 :\n            (r - g) / C + 4\n            );\n        H = ((H + 360) % 6) * 60 / 360;\n        S = C == 0 ? 0 : C / V;\n        return {\n            h: H,\n            s: S,\n            b: V,\n            toString: hsbtoString\n        };\n    };\n\n    /*\\\n     * Raphael.rgb2hsl\n     [ method ]\n     **\n     * Converts RGB values to HSL object.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (object) HSL object in format:\n     o {\n     o     h (number) hue\n     o     s (number) saturation\n     o     l (number) luminosity\n     o }\n    \\*/\n    R.rgb2hsl = function(r, g, b) {\n        b = prepareRGB(r, g, b);\n        r = b[0];\n        g = b[1];\n        b = b[2];\n\n        var H, S, L, M, m, C;\n        M = mmax(r, g, b);\n        m = mmin(r, g, b);\n        C = M - m;\n        H = (C == 0 ? null :\n            M == r ? (g - b) / C :\n            M == g ? (b - r) / C + 2 :\n            (r - g) / C + 4);\n        H = ((H + 360) % 6) * 60 / 360;\n        L = (M + m) / 2;\n        S = (C == 0 ? 0 :\n            L < .5 ? C / (2 * L) :\n            C / (2 - 2 * L));\n        return {\n            h: H,\n            s: S,\n            l: L,\n            toString: hsltoString\n        };\n    };\n\n    R._path2string = function() {\n        return this.join(\",\").replace(p2s, \"$1\");\n    };\n\n    function repush(array, item) {\n        for (var i = 0, ii = array.length; i < ii; i++) {\n            if (array[i] === item) {\n                return array.push(array.splice(i, 1)[0]);\n            }\n        }\n    }\n\n    var cacher = R._cacher = function (f, scope, postprocessor) {\n        function cachedfunction() {\n            var arg = arraySlice.call(arguments, 0),\n            args = arg.join(\"\\u2400\"),\n            cache = cachedfunction.cache = cachedfunction.cache || {},\n            count = cachedfunction.count = cachedfunction.count || [];\n            if (cache[has](args)) {\n                repush(count, args);\n                return postprocessor ? postprocessor(cache[args]) : cache[args];\n            }\n            count.length >= 1e3 && delete cache[count.shift()];\n            count.push(args);\n            cache[args] = f[apply](scope, arg);\n            return postprocessor ? postprocessor(cache[args]) : cache[args];\n        }\n        return cachedfunction;\n    };\n\n    var preload = R._preload = function(src, f) {\n        var img = doc.createElement(\"img\");\n        img.style.cssText = \"position:absolute;left:-9999em;top:-9999em\";\n        img.onload = function() {\n            f.call(this);\n            this.onload = null;\n            doc.body.removeChild(this);\n        };\n        img.onerror = function() {\n            doc.body.removeChild(this);\n        };\n        doc.body.appendChild(img);\n        img.src = src;\n    };\n\n    function clrToString() {\n        return this.hex;\n    }\n\n    /*\\\n     * Raphael.getRGB\n     [ method ]\n     **\n     * Parses colour string as RGB object\n     > Parameters\n     - colour (string) colour string in one of formats:\n     # <ul>\n     #     <li>Colour name (“<code>red</code>”, “<code>green</code>”, “<code>cornflowerblue</code>”, etc)</li>\n     #     <li>#••• — shortened HTML colour: (“<code>#000</code>”, “<code>#fc0</code>”, etc)</li>\n     #     <li>#•••••• — full length HTML colour: (“<code>#000000</code>”, “<code>#bd2300</code>”)</li>\n     #     <li>rgb(•••, •••, •••) — red, green and blue channels’ values: (“<code>rgb(200,&nbsp;100,&nbsp;0)</code>”)</li>\n     #     <li>rgb(•••%, •••%, •••%) — same as above, but in %: (“<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>”)</li>\n     #     <li>hsb(•••, •••, •••) — hue, saturation and brightness values: (“<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>”)</li>\n     #     <li>hsb(•••%, •••%, •••%) — same as above, but in %</li>\n     #     <li>hsl(•••, •••, •••) — same as hsb</li>\n     #     <li>hsl(•••%, •••%, •••%) — same as hsb</li>\n     # </ul>\n     = (object) RGB object in format:\n     o {\n     o     r (number) red,\n     o     g (number) green,\n     o     b (number) blue\n     o     hex (string) color in HTML/CSS format: #••••••,\n     o     error (boolean) true if string can’t be parsed\n     o }\n    \\*/\n    R.getRGB = cacher(function(colour) {\n        var opacity,\n            res,\n            red,\n            green,\n            blue,\n            t,\n            values,\n            rgb;\n\n        colour && is(colour, 'object') && \"opacity\" in colour &&\n            (opacity = colour.opacity);\n        if (!colour || !!((colour = Str(colour)).indexOf(\"-\") + 1)) {\n            return {\n                r: -1,\n                g: -1,\n                b: -1,\n                hex: none,\n                error: 1,\n                toString: clrToString\n            };\n        }\n        if (colour == none) {\n            return {\n                r: -1,\n                g: -1,\n                b: -1,\n                hex: none,\n                toString: clrToString\n            };\n        }\n        !(hsrg[has](colour.toLowerCase().substring(0, 2)) ||\n            colour.charAt() === \"#\") && (colour = toHex(colour));\n\n\n        if ((rgb = colour.match(colourRegExp))) {\n            if (rgb[2]) {\n                blue = toInt(rgb[2].substring(5), 16);\n                green = toInt(rgb[2].substring(3, 5), 16);\n                red = toInt(rgb[2].substring(1, 3), 16);\n            }\n            if (rgb[3]) {\n                blue = toInt((t = rgb[3].charAt(3)) + t, 16);\n                green = toInt((t = rgb[3].charAt(2)) + t, 16);\n                red = toInt((t = rgb[3].charAt(1)) + t, 16);\n            }\n            if (rgb[4]) {\n                values = rgb[4][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                rgb[1].toLowerCase().slice(0, 4) == \"rgba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n            }\n            if (rgb[5]) {\n                values = rgb[5][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsba\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsb2rgb(red, green, blue, opacity);\n            }\n            if (rgb[6]) {\n                values = rgb[6][split](commaSpaces);\n                red = toFloat(values[0]);\n                values[0].slice(-1) == \"%\" && (red *= 2.55);\n                green = toFloat(values[1]);\n                values[1].slice(-1) == \"%\" && (green *= 2.55);\n                blue = toFloat(values[2]);\n                values[2].slice(-1) == \"%\" && (blue *= 2.55);\n                (values[0].slice(-3) == \"deg\" || values[0].slice(-1) == \"\\xb0\") && (red /= 360);\n                rgb[1].toLowerCase().slice(0, 4) == \"hsla\" && (opacity = toFloat(values[3]));\n                values[3] && values[3].slice(-1) == \"%\" && (opacity /= 100);\n                return R.hsl2rgb(red, green, blue, opacity);\n            }\n            rgb = {\n                r: red,\n                g: green,\n                b: blue,\n                toString: clrToString\n            };\n            rgb.hex = \"#\" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);\n            R.is(opacity, \"finite\") && (rgb.opacity = opacity);\n            return rgb;\n        }\n        return {\n            r: -1,\n            g: -1,\n            b: -1,\n            hex: none,\n            error: 1,\n            toString: clrToString\n        };\n    }, R);\n\n    R.tintshade = cacher(function(colour, percent) {\n        var rgb = R.getRGB(colour),\n            tint,\n            offset = 255;\n\n        (percent < 0) && (percent *= -1, offset = 0);\n        (percent > 1) && (percent = 1);\n\n        tint = percent === 0 ? rgb : {\n            r: offset - (offset - rgb.r) * percent,\n            g: offset - (offset - rgb.g) * percent,\n            b: offset - (offset - rgb.b) * percent,\n            toString: clrToString\n        };\n        tint.hex = R.rgb(tint.r, tint.g, tint.b);\n        rgb.error && (tint.error = rgb.error);\n\n        if (\"opacity\" in rgb) {\n            tint.rgba = 'rgba(' + [tint.r, tint.g, tint.b, rgb.opacity].join(',') + ')';\n            tint.opacity = rgb.opacity;\n        }\n        else {\n            tint.rgba = 'rgb(' + [tint.r, tint.g, tint.b].join(',') + ')';\n        }\n        return tint;\n    }, R);\n\n    /*\\\n     * Raphael.hsb\n     [ method ]\n     **\n     * Converts HSB values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - b (number) value or brightness\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsb = cacher(function(h, s, b) {\n        return R.hsb2rgb(h, s, b).hex;\n    });\n\n    /*\\\n     * Raphael.hsl\n     [ method ]\n     **\n     * Converts HSL values to hex representation of the colour.\n     > Parameters\n     - h (number) hue\n     - s (number) saturation\n     - l (number) luminosity\n     = (string) hex representation of the colour.\n    \\*/\n    R.hsl = cacher(function(h, s, l) {\n        return R.hsl2rgb(h, s, l).hex;\n    });\n\n    /*\\\n     * Raphael.rgb\n     [ method ]\n     **\n     * Converts RGB values to hex representation of the colour.\n     > Parameters\n     - r (number) red\n     - g (number) green\n     - b (number) blue\n     = (string) hex representation of the colour.\n    \\*/\n    R.rgb = cacher(function(r, g, b) {\n        return \"#\" + (16777216 | b | (g << 8) | (r << 16)).toString(16).slice(1);\n    });\n\n    /*\\\n     * Raphael.getColor\n     [ method ]\n     **\n     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset\n     > Parameters\n     - value (number) #optional brightness, default is `0.75`\n     = (string) hex representation of the colour.\n    \\*/\n    R.getColor = function(value) {\n        var start = this.getColor.start = this.getColor.start || {\n            h: 0,\n            s: 1,\n            b: value || .75\n        },\n        rgb = this.hsb2rgb(start.h, start.s, start.b);\n        start.h += .075;\n        if (start.h > 1) {\n            start.h = 0;\n            start.s -= .2;\n            start.s <= 0 && (this.getColor.start = {\n                h: 0,\n                s: 1,\n                b: start.b\n            });\n        }\n        return rgb.hex;\n    };\n\n    /*\\\n     * Raphael.getColor.reset\n     [ method ]\n     **\n     * Resets spectrum position for @Raphael.getColor back to red.\n    \\*/\n    R.getColor.reset = function() {\n        delete this.start;\n    };\n\n    // http://schepers.cc/getting-to-the-point\n    function catmullRom2bezier(crp, z) {\n        var d = [];\n        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {\n            var p = [\n            {\n                x: +crp[i - 2],\n                y: +crp[i - 1]\n            },\n            {\n                x: +crp[i],\n                y: +crp[i + 1]\n            },\n            {\n                x: +crp[i + 2],\n                y: +crp[i + 3]\n            },\n            {\n                x: +crp[i + 4],\n                y: +crp[i + 5]\n            }\n            ];\n            if (z) {\n                if (!i) {\n                    p[0] = {\n                        x: +crp[iLen - 2],\n                        y: +crp[iLen - 1]\n                    };\n                } else if (iLen - 4 == i) {\n                    p[3] = {\n                        x: +crp[0],\n                        y: +crp[1]\n                    };\n                } else if (iLen - 2 == i) {\n                    p[2] = {\n                        x: +crp[0],\n                        y: +crp[1]\n                    };\n                    p[3] = {\n                        x: +crp[2],\n                        y: +crp[3]\n                    };\n                }\n            } else {\n                if (iLen - 4 == i) {\n                    p[3] = p[2];\n                } else if (!i) {\n                    p[0] = {\n                        x: +crp[i],\n                        y: +crp[i + 1]\n                    };\n                }\n            }\n            d.push([\"C\",\n                (-p[0].x + 6 * p[1].x + p[2].x) / 6,\n                (-p[0].y + 6 * p[1].y + p[2].y) / 6,\n                (p[1].x + 6 * p[2].x - p[3].x) / 6,\n                (p[1].y + 6 * p[2].y - p[3].y) / 6,\n                p[2].x,\n                p[2].y\n                ]);\n        }\n\n        return d;\n    }\n\n    /*\\\n     * Raphael.parsePathString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of arrays of path segments.\n     > Parameters\n     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)\n     = (array) array of segments.\n    \\*/\n    R.parsePathString = function(pathString) {\n        if (!pathString) {\n            return null;\n        }\n        var pth = paths(pathString);\n        if (pth.arr) {\n            return pathClone(pth.arr);\n        }\n\n        var paramCounts = {\n            a: 7,\n            c: 6,\n            h: 1,\n            l: 2,\n            m: 2,\n            r: 4,\n            q: 4,\n            s: 4,\n            t: 2,\n            v: 1,\n            z: 0\n        },\n        data = [];\n        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption\n            data = pathClone(pathString);\n        }\n        if (!data.length) {\n            Str(pathString).replace(pathCommand, function(a, b, c) {\n                var params = [],\n                name = b.toLowerCase();\n                c.replace(pathValues, function(a, b) {\n                    b && params.push(+b);\n                });\n                if (name == \"m\" && params.length > 2) {\n                    data.push([b][concat](params.splice(0, 2)));\n                    name = \"l\";\n                    b = b == \"m\" ? \"l\" : \"L\";\n                }\n                if (name == \"r\") {\n                    data.push([b][concat](params));\n                } else\n                    while (params.length >= paramCounts[name]) {\n                        data.push([b][concat](params.splice(0, paramCounts[name])));\n                        if (!paramCounts[name]) {\n                            break;\n                        }\n                    }\n            });\n        }\n        data.toString = R._path2string;\n        pth.arr = pathClone(data);\n        return data;\n    };\n\n    /*\\\n     * Raphael.parseTransformString\n     [ method ]\n     **\n     * Utility method\n     **\n     * Parses given path string into an array of transformations.\n     > Parameters\n     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)\n     = (array) array of transformations.\n    \\*/\n    R.parseTransformString = cacher(function(TString) {\n        if (!TString) {\n            return null;\n        }\n        var paramCounts = {\n            r: 3,\n            s: 4,\n            t: 2,\n            m: 6\n        },\n        data = [];\n        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption\n            data = pathClone(TString);\n        }\n        if (!data.length) {\n            Str(TString).replace(tCommand, function(a, b, c) {\n                var params = [],\n                name = lowerCase.call(b);\n                c.replace(pathValues, function(a, b) {\n                    b && params.push(+b);\n                });\n                data.push([b][concat](params));\n            });\n        }\n        data.toString = R._path2string;\n        return data;\n    });\n    // PATHS\n    var paths = function(ps) {\n        var p = paths.ps = paths.ps || {};\n        if (p[ps]) {\n            p[ps].sleep = 100;\n        } else {\n            p[ps] = {\n                sleep: 100\n            };\n        }\n        setTimeout(function() {\n            for (var key in p)\n                if (p[has](key) && key != ps) {\n                    p[key].sleep--;\n                    !p[key].sleep && delete p[key];\n                }\n        });\n        return p[ps];\n    };\n\n    /*\\\n     * Raphael.findDotsAtSegment\n     [ method ]\n     **\n     * Utility method\n     **\n     * Find dot coordinates on the given cubic bezier curve at the given t.\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     - t (number) position on the curve (0..1)\n     = (object) point information in format:\n     o {\n     o     x: (number) x coordinate of the point\n     o     y: (number) y coordinate of the point\n     o     m: {\n     o         x: (number) x coordinate of the left anchor\n     o         y: (number) y coordinate of the left anchor\n     o     }\n     o     n: {\n     o         x: (number) x coordinate of the right anchor\n     o         y: (number) y coordinate of the right anchor\n     o     }\n     o     start: {\n     o         x: (number) x coordinate of the start of the curve\n     o         y: (number) y coordinate of the start of the curve\n     o     }\n     o     end: {\n     o         x: (number) x coordinate of the end of the curve\n     o         y: (number) y coordinate of the end of the curve\n     o     }\n     o     alpha: (number) angle of the curve derivative at the point\n     o }\n    \\*/\n    R.findDotsAtSegment = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t,\n        t13 = pow(t1, 3),\n        t12 = pow(t1, 2),\n        t2 = t * t,\n        t3 = t2 * t,\n        x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,\n        y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,\n        mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),\n        my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),\n        nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),\n        ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),\n        ax = t1 * p1x + t * c1x,\n        ay = t1 * p1y + t * c1y,\n        cx = t1 * c2x + t * p2x,\n        cy = t1 * c2y + t * p2y,\n        alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);\n        (mx > nx || my < ny) && (alpha += 180);\n        return {\n            x: x,\n            y: y,\n            m: {\n                x: mx,\n                y: my\n            },\n            n: {\n                x: nx,\n                y: ny\n            },\n            start: {\n                x: ax,\n                y: ay\n            },\n            end: {\n                x: cx,\n                y: cy\n            },\n            alpha: alpha\n        };\n    };\n\n    /*\\\n     * Raphael.bezierBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given cubic bezier curve\n     > Parameters\n     - p1x (number) x of the first point of the curve\n     - p1y (number) y of the first point of the curve\n     - c1x (number) x of the first anchor of the curve\n     - c1y (number) y of the first anchor of the curve\n     - c2x (number) x of the second anchor of the curve\n     - c2y (number) y of the second anchor of the curve\n     - p2x (number) x of the second point of the curve\n     - p2y (number) y of the second point of the curve\n     * or\n     - bez (array) array of six points for bezier curve\n     = (object) point information in format:\n     o {\n     o     min: {\n     o         x: (number) x coordinate of the left point\n     o         y: (number) y coordinate of the top point\n     o     }\n     o     max: {\n     o         x: (number) x coordinate of the right point\n     o         y: (number) y coordinate of the bottom point\n     o     }\n     o }\n    \\*/\n    R.bezierBBox = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        if (!R.is(p1x, \"array\")) {\n            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];\n        }\n        var bbox = curveDim.apply(null, p1x);\n        return {\n            x: bbox.min.x,\n            y: bbox.min.y,\n            x2: bbox.max.x,\n            y2: bbox.max.y,\n            width: bbox.max.x - bbox.min.x,\n            height: bbox.max.y - bbox.min.y\n        };\n    };\n\n    /*\\\n     * Raphael.isPointInsideBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside bounding boxes.\n     > Parameters\n     - bbox (string) bounding box\n     - x (string) x coordinate of the point\n     - y (string) y coordinate of the point\n     = (boolean) `true` if point inside\n    \\*/\n    R.isPointInsideBBox = function(bbox, x, y) {\n        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;\n    };\n\n    /*\\\n     * Raphael.isBBoxIntersect\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if two bounding boxes intersect\n     > Parameters\n     - bbox1 (string) first bounding box\n     - bbox2 (string) second bounding box\n     = (boolean) `true` if they intersect\n    \\*/\n    R.isBBoxIntersect = function(bbox1, bbox2) {\n        var i = R.isPointInsideBBox;\n        return i(bbox2, bbox1.x, bbox1.y) ||\n            i(bbox2, bbox1.x2, bbox1.y) ||\n            i(bbox2, bbox1.x, bbox1.y2) ||\n            i(bbox2, bbox1.x2, bbox1.y2) ||\n            i(bbox1, bbox2.x, bbox2.y) ||\n            i(bbox1, bbox2.x2, bbox2.y) ||\n            i(bbox1, bbox2.x, bbox2.y2) ||\n            i(bbox1, bbox2.x2, bbox2.y2) ||\n            (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x ||\n                bbox2.x < bbox1.x2 && bbox2.x > bbox1.x) &&\n            (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);\n    };\n\n    function base3(t, p1, p2, p3, p4) {\n        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,\n        t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;\n        return t * t2 - 3 * p1 + 3 * p2;\n    }\n\n    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {\n        if (z == null) {\n            z = 1;\n        }\n        z = z > 1 ? 1 : z < 0 ? 0 : z;\n        var z2 = z / 2,\n        n = 12,\n        Tvalues = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816],\n        Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472],\n        sum = 0;\n        for (var i = 0; i < n; i++) {\n            var ct = z2 * Tvalues[i] + z2,\n            xbase = base3(ct, x1, x2, x3, x4),\n            ybase = base3(ct, y1, y2, y3, y4),\n            comb = xbase * xbase + ybase * ybase;\n            sum += Cvalues[i] * mathSqrt(comb);\n        }\n        return z2 * sum;\n    }\n\n    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {\n        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {\n            return;\n        }\n        var t = 1,\n        step = t / 2,\n        t2 = t - step,\n        l,\n        e = .01;\n        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        while (abs(l - ll) > e) {\n            step /= 2;\n            t2 += (l < ll ? 1 : -1) * step;\n            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);\n        }\n        return t2;\n    }\n\n    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {\n        if (\n            mmax(x1, x2) < mmin(x3, x4) ||\n            mmin(x1, x2) > mmax(x3, x4) ||\n            mmax(y1, y2) < mmin(y3, y4) ||\n            mmin(y1, y2) > mmax(y3, y4)\n            ) {\n            return;\n        }\n        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),\n        ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),\n        denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n\n        if (!denominator) {\n            return;\n        }\n        var px = nx / denominator,\n        py = ny / denominator,\n        px2 = +px.toFixed(2),\n        py2 = + py.toFixed(2);\n        if (\n            px2 < +mmin(x1, x2).toFixed(2) ||\n            px2 > +mmax(x1, x2).toFixed(2) ||\n            px2 < +mmin(x3, x4).toFixed(2) ||\n            px2 > +mmax(x3, x4).toFixed(2) ||\n            py2 < +mmin(y1, y2).toFixed(2) ||\n            py2 > +mmax(y1, y2).toFixed(2) ||\n            py2 < +mmin(y3, y4).toFixed(2) ||\n            py2 > +mmax(y3, y4).toFixed(2)\n            ) {\n            return;\n        }\n        return {\n            x: px,\n            y: py\n        };\n    }\n\n    function inter(bez1, bez2) {\n        return interHelper(bez1, bez2);\n    }\n\n    function interCount(bez1, bez2) {\n        return interHelper(bez1, bez2, 1);\n    }\n\n    function interHelper(bez1, bez2, justCount) {\n        var bbox1 = R.bezierBBox(bez1),\n            bbox2 = R.bezierBBox(bez2);\n\n        if (!R.isBBoxIntersect(bbox1, bbox2)) {\n            return justCount ? 0 : [];\n        }\n        var l1 = bezlen.apply(0, bez1),\n            l2 = bezlen.apply(0, bez2),\n            n1 = mmax(~~(l1 / 5), 1),\n            n2 = mmax(~~(l2 / 5), 1),\n            dots1 = [],\n            dots2 = [],\n            xy = {},\n            res = justCount ? 0 : [];\n\n        for (var i = 0; i < n1 + 1; i++) {\n            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));\n            dots1.push({\n                x: p.x,\n                y: p.y,\n                t: i / n1\n            });\n        }\n        for (i = 0; i < n2 + 1; i++) {\n            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));\n            dots2.push({\n                x: p.x,\n                y: p.y,\n                t: i / n2\n            });\n        }\n        for (i = 0; i < n1; i++) {\n            for (var j = 0; j < n2; j++) {\n                var di = dots1[i],\n                di1 = dots1[i + 1],\n                dj = dots2[j],\n                dj1 = dots2[j + 1],\n                ci = abs(di1.x - di.x) < .001 ? \"y\" : \"x\",\n                cj = abs(dj1.x - dj.x) < .001 ? \"y\" : \"x\",\n                is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);\n                if (is) {\n                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {\n                        continue;\n                    }\n                    xy[is.x.toFixed(4)] = is.y.toFixed(4);\n                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),\n                    t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);\n                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {\n                        if (justCount) {\n                            res++;\n                        } else {\n                            res.push({\n                                x: is.x,\n                                y: is.y,\n                                t1: mmin(t1, 1),\n                                t2: mmin(t2, 1)\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.pathIntersection\n     [ method ]\n     **\n     * Utility method\n     **\n     * Finds intersections of two paths\n     > Parameters\n     - path1 (string) path string\n     - path2 (string) path string\n     = (array) dots of intersection\n     o [\n     o     {\n     o         x: (number) x coordinate of the point\n     o         y: (number) y coordinate of the point\n     o         t1: (number) t value for segment of path1\n     o         t2: (number) t value for segment of path2\n     o         segment1: (number) order number for segment of path1\n     o         segment2: (number) order number for segment of path2\n     o         bez1: (array) eight coordinates representing beziér curve for the segment of path1\n     o         bez2: (array) eight coordinates representing beziér curve for the segment of path2\n     o     }\n     o ]\n    \\*/\n    R.pathIntersection = function(path1, path2) {\n        return interPathHelper(path1, path2);\n    };\n    R.pathIntersectionNumber = function(path1, path2) {\n        return interPathHelper(path1, path2, 1);\n    };\n    function interPathHelper(path1, path2, justCount) {\n        path1 = R._path2curve(path1);\n        path2 = R._path2curve(path2);\n        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,\n        res = justCount ? 0 : [];\n        for (var i = 0, ii = path1.length; i < ii; i++) {\n            var pi = path1[i];\n            if (pi[0] == \"M\") {\n                x1 = x1m = pi[1];\n                y1 = y1m = pi[2];\n            } else {\n                if (pi[0] == \"C\") {\n                    bez1 = [x1, y1].concat(pi.slice(1));\n                    x1 = bez1[6];\n                    y1 = bez1[7];\n                } else {\n                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];\n                    x1 = x1m;\n                    y1 = y1m;\n                }\n                for (var j = 0, jj = path2.length; j < jj; j++) {\n                    var pj = path2[j];\n                    if (pj[0] == \"M\") {\n                        x2 = x2m = pj[1];\n                        y2 = y2m = pj[2];\n                    } else {\n                        if (pj[0] == \"C\") {\n                            bez2 = [x2, y2].concat(pj.slice(1));\n                            x2 = bez2[6];\n                            y2 = bez2[7];\n                        } else {\n                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];\n                            x2 = x2m;\n                            y2 = y2m;\n                        }\n                        var intr = interHelper(bez1, bez2, justCount);\n                        if (justCount) {\n                            res += intr;\n                        } else {\n                            for (var k = 0, kk = intr.length; k < kk; k++) {\n                                intr[k].segment1 = i;\n                                intr[k].segment2 = j;\n                                intr[k].bez1 = bez1;\n                                intr[k].bez2 = bez2;\n                            }\n                            res = res.concat(intr);\n                        }\n                    }\n                }\n            }\n        }\n        return res;\n    }\n\n    /*\\\n     * Raphael.isPointInsidePath\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns `true` if given point is inside a given closed path.\n     > Parameters\n     - path (string) path string\n     - x (number) x of the point\n     - y (number) y of the point\n     = (boolean) true, if point is inside the path\n    \\*/\n    R.isPointInsidePath = function(path, x, y) {\n        var bbox = R.pathBBox(path);\n        return R.isPointInsideBBox(bbox, x, y) &&\n        ((interPathHelper(path, [[\"M\", x, y], [\"H\", bbox.x2 + 10]], 1) % 2 == 1) ||\n        (interPathHelper(path, [[\"M\", x, y], [\"V\", bbox.y2 + 10]], 1) % 2 == 1))\n    };\n    R._removedFactory = function(methodname) {\n        return function() {\n            eve(\"raphael.log\", null, \"Rapha\\xebl: you are calling to method \\u201c\" + methodname + \"\\u201d of removed object\", methodname);\n        };\n    };\n\n    /*\\\n     * Raphael.pathBBox\n     [ method ]\n     **\n     * Utility method\n     **\n     * Return bounding box of a given path\n     > Parameters\n     - path (string) path string\n     = (object) bounding box\n     o {\n     o     x: (number) x coordinate of the left top point of the box\n     o     y: (number) y coordinate of the left top point of the box\n     o     x2: (number) x coordinate of the right bottom point of the box\n     o     y2: (number) y coordinate of the right bottom point of the box\n     o     width: (number) width of the box\n     o     height: (number) height of the box\n     o     cx: (number) x coordinate of the center of the box\n     o     cy: (number) y coordinate of the center of the box\n     o }\n    \\*/\n    var pathDimensions = R.pathBBox = function(path) {\n        var pth = paths(path);\n        if (!path) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n                x2: 0,\n                y2: 0\n            };\n        }\n        path = path2curve(path);\n        var x = 0,\n        y = 0,\n        X = [],\n        Y = [],\n        p;\n        for (var i = 0, ii = path.length; i < ii; i++) {\n            p = path[i];\n            if (p[0] == \"M\") {\n                x = p[1];\n                y = p[2];\n                X.push(x);\n                Y.push(y);\n            } else {\n                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                X = X[concat](dim.min.x, dim.max.x);\n                Y = Y[concat](dim.min.y, dim.max.y);\n                x = p[5];\n                y = p[6];\n            }\n        }\n        var xmin = mmin[apply](0, X),\n        ymin = mmin[apply](0, Y),\n        xmax = mmax[apply](0, X),\n        ymax = mmax[apply](0, Y),\n        bb = {\n            x: xmin,\n            y: ymin,\n            x2: xmax,\n            y2: ymax,\n            width: xmax - xmin,\n            height: ymax - ymin\n        };\n        pth.bbox = clone(bb);\n        return bb;\n    },\n    pathClone = function(pathArray) {\n        var res = clone(pathArray);\n        res.toString = R._path2string;\n        return res;\n    },\n    pathToRelative = R._pathToRelative = function(pathArray) {\n        var pth = paths(pathArray);\n        if (pth.rel) {\n            return pathClone(pth.rel);\n        }\n        if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n            pathArray = R.parsePathString(pathArray);\n        }\n        var res = [],\n        x = 0,\n        y = 0,\n        mx = 0,\n        my = 0,\n        start = 0;\n        if (pathArray[0][0] == \"M\") {\n            x = pathArray[0][1];\n            y = pathArray[0][2];\n            mx = x;\n            my = y;\n            start++;\n            res.push([\"M\", x, y]);\n        }\n        for (var i = start, ii = pathArray.length; i < ii; i++) {\n            var r = res[i] = [],\n            pa = pathArray[i];\n            if (pa[0] != lowerCase.call(pa[0])) {\n                r[0] = lowerCase.call(pa[0]);\n                switch (r[0]) {\n                    case \"a\":\n                        r[1] = pa[1];\n                        r[2] = pa[2];\n                        r[3] = pa[3];\n                        r[4] = pa[4];\n                        r[5] = pa[5];\n                        r[6] = +(pa[6] - x).toFixed(3);\n                        r[7] = +(pa[7] - y).toFixed(3);\n                        break;\n                    case \"v\":\n                        r[1] = +(pa[1] - y).toFixed(3);\n                        break;\n                    case \"m\":\n                        mx = pa[1];\n                        my = pa[2];\n                    default:\n                        for (var j = 1, jj = pa.length; j < jj; j++) {\n                            r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);\n                        }\n                }\n            } else {\n                r = res[i] = [];\n                if (pa[0] == \"m\") {\n                    mx = pa[1] + x;\n                    my = pa[2] + y;\n                }\n                for (var k = 0, kk = pa.length; k < kk; k++) {\n                    res[i][k] = pa[k];\n                }\n            }\n            var len = res[i].length;\n            switch (res[i][0]) {\n                case \"z\":\n                    x = mx;\n                    y = my;\n                    break;\n                case \"h\":\n                    x += +res[i][len - 1];\n                    break;\n                case \"v\":\n                    y += +res[i][len - 1];\n                    break;\n                default:\n                    x += +res[i][len - 2];\n                    y += +res[i][len - 1];\n            }\n        }\n        res.toString = R._path2string;\n        pth.rel = pathClone(res);\n        return res;\n    },\n    pathToAbsolute = R._pathToAbsolute = function(pathArray) {\n        var pth = paths(pathArray), res;\n        if (pth.abs) {\n            return pathClone(pth.abs);\n        }\n        if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption\n            pathArray = R.parsePathString(pathArray);\n        }\n        if (!pathArray || !pathArray.length) {\n            res = [[\"M\", 0, 0]];\n            res.toString = R._path2string;\n            return res;\n        }\n        var x = 0,\n            y = 0,\n            mx = 0,\n            my = 0,\n            start = 0;\n        res = [];\n        if (pathArray[0][0] == \"M\") {\n            x = +pathArray[0][1];\n            y = +pathArray[0][2];\n            mx = x;\n            my = y;\n            start++;\n            res[0] = [\"M\", x, y];\n        }\n        var crz = pathArray.length == 3 && pathArray[0][0] == \"M\" && pathArray[1][0].toUpperCase() == \"R\" && pathArray[2][0].toUpperCase() == \"Z\";\n        for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {\n            res.push(r = []);\n            pa = pathArray[i];\n            if (pa[0] != upperCase.call(pa[0])) {\n                r[0] = upperCase.call(pa[0]);\n                switch (r[0]) {\n                    case \"A\":\n                        r[1] = pa[1];\n                        r[2] = pa[2];\n                        r[3] = pa[3];\n                        r[4] = pa[4];\n                        r[5] = pa[5];\n                        r[6] = +(pa[6] + x);\n                        r[7] = +(pa[7] + y);\n                        break;\n                    case \"V\":\n                        r[1] = +pa[1] + y;\n                        break;\n                    case \"H\":\n                        r[1] = +pa[1] + x;\n                        break;\n                    case \"R\":\n                        var dots = [x, y][concat](pa.slice(1));\n                        for (var j = 2, jj = dots.length; j < jj; j++) {\n                            dots[j] = +dots[j] + x;\n                            dots[++j] = +dots[j] + y;\n                        }\n                        res.pop();\n                        res = res[concat](catmullRom2bezier(dots, crz));\n                        break;\n                    case \"M\":\n                        mx = +pa[1] + x;\n                        my = +pa[2] + y;\n                    default:\n                        for (j = 1, jj = pa.length; j < jj; j++) {\n                            r[j] = +pa[j] + ((j % 2) ? x : y);\n                        }\n                }\n            } else if (pa[0] == \"R\") {\n                dots = [x, y][concat](pa.slice(1));\n                res.pop();\n                res = res[concat](catmullRom2bezier(dots, crz));\n                r = [\"R\"][concat](pa.slice(-2));\n            } else {\n                for (var k = 0, kk = pa.length; k < kk; k++) {\n                    r[k] = pa[k];\n                }\n            }\n            switch (r[0]) {\n                case \"Z\":\n                    x = mx;\n                    y = my;\n                    break;\n                case \"H\":\n                    x = r[1];\n                    break;\n                case \"V\":\n                    y = r[1];\n                    break;\n                case \"M\":\n                    mx = r[r.length - 2];\n                    my = r[r.length - 1];\n                default:\n                    x = r[r.length - 2];\n                    y = r[r.length - 1];\n            }\n        }\n        res.toString = R._path2string;\n        pth.abs = pathClone(res);\n        return res;\n    },\n    l2c = function(x1, y1, x2, y2) {\n        return [x1, y1, x2, y2, x2, y2];\n    },\n    q2c = function(x1, y1, ax, ay, x2, y2) {\n        var _13 = 1 / 3,\n        _23 = 2 / 3;\n        return [\n        _13 * x1 + _23 * ax,\n        _13 * y1 + _23 * ay,\n        _13 * x2 + _23 * ax,\n        _13 * y2 + _23 * ay,\n        x2,\n        y2\n        ];\n    },\n    a2c = function(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n        // for more information of where this math came from visit:\n        // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n        var _120 = PI * 120 / 180,\n        rad = deg2rad * (+angle || 0),\n        res = [],\n        xy,\n        rotate = cacher(function(x, y, rad) {\n            var X = x * mathCos(rad) - y * mathSin(rad),\n            Y = x * mathSin(rad) + y * mathCos(rad);\n            return {\n                x: X,\n                y: Y\n            };\n        });\n        if (!recursive) {\n            xy = rotate(x1, y1, -rad);\n            x1 = xy.x;\n            y1 = xy.y;\n            xy = rotate(x2, y2, -rad);\n            x2 = xy.x;\n            y2 = xy.y;\n            var cos = mathCos(deg2rad * angle),\n            sin = mathSin(deg2rad * angle),\n            x = (x1 - x2) / 2,\n            y = (y1 - y2) / 2;\n            var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n            if (h > 1) {\n                h = mathSqrt(h);\n                rx = h * rx;\n                ry = h * ry;\n            }\n            var rx2 = rx * rx,\n            ry2 = ry * ry,\n            k = (large_arc_flag == sweep_flag ? -1 : 1) *\n            mathSqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n            cx = k * rx * y / ry + (x1 + x2) / 2,\n            cy = k * -ry * x / rx + (y1 + y2) / 2,\n            f1 = math.asin(((y1 - cy) / ry).toFixed(9)),\n            f2 = math.asin(((y2 - cy) / ry).toFixed(9));\n\n            f1 = x1 < cx ? PI - f1 : f1;\n            f2 = x2 < cx ? PI - f2 : f2;\n            f1 < 0 && (f1 = PI * 2 + f1);\n            f2 < 0 && (f2 = PI * 2 + f2);\n            if (sweep_flag && f1 > f2) {\n                f1 = f1 - PI * 2;\n            }\n            if (!sweep_flag && f2 > f1) {\n                f2 = f2 - PI * 2;\n            }\n        } else {\n            f1 = recursive[0];\n            f2 = recursive[1];\n            cx = recursive[2];\n            cy = recursive[3];\n        }\n        var df = f2 - f1;\n        if (abs(df) > _120) {\n            var f2old = f2,\n            x2old = x2,\n            y2old = y2;\n            f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n            x2 = cx + rx * mathCos(f2);\n            y2 = cy + ry * mathSin(f2);\n            res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n        }\n        df = f2 - f1;\n        var c1 = mathCos(f1),\n        s1 = mathSin(f1),\n        c2 = mathCos(f2),\n        s2 = mathSin(f2),\n        t = math.tan(df / 4),\n        hx = 4 / 3 * rx * t,\n        hy = 4 / 3 * ry * t,\n        m1 = [x1, y1],\n        m2 = [x1 + hx * s1, y1 - hy * c1],\n        m3 = [x2 + hx * s2, y2 - hy * c2],\n        m4 = [x2, y2];\n        m2[0] = 2 * m1[0] - m2[0];\n        m2[1] = 2 * m1[1] - m2[1];\n        if (recursive) {\n            return [m2, m3, m4][concat](res);\n        } else {\n            res = [m2, m3, m4][concat](res).join()[split](\",\");\n            var newres = [];\n            for (var i = 0, ii = res.length; i < ii; i++) {\n                newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n            }\n            return newres;\n        }\n    },\n    findDotAtSegment = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {\n        var t1 = 1 - t;\n        return {\n            x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,\n            y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y\n        };\n    },\n    curveDim = cacher(function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {\n        var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),\n        b = 2 * (c1x - p1x) - 2 * (c2x - c1x),\n        c = p1x - c1x,\n        t1 = (-b + mathSqrt(b * b - 4 * a * c)) / 2 / a,\n        t2 = (-b - mathSqrt(b * b - 4 * a * c)) / 2 / a,\n        y = [p1y, p2y],\n        x = [p1x, p2x],\n        dot;\n        abs(t1) > \"1e12\" && (t1 = .5);\n        abs(t2) > \"1e12\" && (t2 = .5);\n        if (t1 > 0 && t1 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        if (t2 > 0 && t2 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);\n        b = 2 * (c1y - p1y) - 2 * (c2y - c1y);\n        c = p1y - c1y;\n        t1 = (-b + mathSqrt(b * b - 4 * a * c)) / 2 / a;\n        t2 = (-b - mathSqrt(b * b - 4 * a * c)) / 2 / a;\n        abs(t1) > \"1e12\" && (t1 = .5);\n        abs(t2) > \"1e12\" && (t2 = .5);\n        if (t1 > 0 && t1 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        if (t2 > 0 && t2 < 1) {\n            dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);\n            x.push(dot.x);\n            y.push(dot.y);\n        }\n        return {\n            min: {\n                x: mmin[apply](0, x),\n                y: mmin[apply](0, y)\n            },\n            max: {\n                x: mmax[apply](0, x),\n                y: mmax[apply](0, y)\n            }\n        };\n    }),\n    path2curve = R._path2curve = cacher(function(path, path2) {\n        var pth = !path2 && paths(path);\n        if (!path2 && pth.curve) {\n            return pathClone(pth.curve);\n        }\n        var p = pathToAbsolute(path),\n        p2 = path2 && pathToAbsolute(path2),\n        attrs = {\n            x: 0,\n            y: 0,\n            bx: 0,\n            by: 0,\n            X: 0,\n            Y: 0,\n            qx: null,\n            qy: null\n        },\n        attrs2 = {\n            x: 0,\n            y: 0,\n            bx: 0,\n            by: 0,\n            X: 0,\n            Y: 0,\n            qx: null,\n            qy: null\n        },\n        processPath = function(path, d) {\n            var nx, ny;\n            if (!path) {\n                return [\"C\", d.x, d.y, d.x, d.y, d.x, d.y];\n            }\n            !(path[0] in {\n                T: 1,\n                Q: 1\n            }) && (d.qx = d.qy = null);\n            switch (path[0]) {\n                case \"M\":\n                    d.X = path[1];\n                    d.Y = path[2];\n                    break;\n                case \"A\":\n                    path = [\"C\"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));\n                    break;\n                case \"S\":\n                    nx = d.x + (d.x - (d.bx || d.x));\n                    ny = d.y + (d.y - (d.by || d.y));\n                    path = [\"C\", nx, ny][concat](path.slice(1));\n                    break;\n                case \"T\":\n                    d.qx = d.x + (d.x - (d.qx || d.x));\n                    d.qy = d.y + (d.y - (d.qy || d.y));\n                    path = [\"C\"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n                    break;\n                case \"Q\":\n                    d.qx = path[1];\n                    d.qy = path[2];\n                    path = [\"C\"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n                    break;\n                case \"L\":\n                    path = [\"C\"][concat](l2c(d.x, d.y, path[1], path[2]));\n                    break;\n                case \"H\":\n                    path = [\"C\"][concat](l2c(d.x, d.y, path[1], d.y));\n                    break;\n                case \"V\":\n                    path = [\"C\"][concat](l2c(d.x, d.y, d.x, path[1]));\n                    break;\n                case \"Z\":\n                    path = [\"C\"][concat](l2c(d.x, d.y, d.X, d.Y));\n                    break;\n            }\n            return path;\n        },\n        fixArc = function(pp, i) {\n            if (pp[i].length > 7) {\n                pp[i].shift();\n                var pi = pp[i];\n                while (pi.length) {\n                    pp.splice(i++, 0, [\"C\"][concat](pi.splice(0, 6)));\n                }\n                pp.splice(i, 1);\n                ii = mmax(p.length, p2 && p2.length || 0);\n            }\n        },\n        fixM = function(path1, path2, a1, a2, i) {\n            if (path1 && path2 && path1[i][0] == \"M\" && path2[i][0] != \"M\" && !i) {\n                path2.splice(i, 0, [\"M\", a2.x, a2.y]);\n                a1.bx = 0;\n                a1.by = 0;\n                a1.x = path1[i][1];\n                a1.y = path1[i][2];\n                ii = mmax(p.length, p2 && p2.length || 0);\n            }\n        };\n        for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {\n            p[i] = processPath(p[i], attrs);\n            fixArc(p, i);\n            p2 && (p2[i] = processPath(p2[i], attrs2));\n            p2 && fixArc(p2, i);\n            fixM(p, p2, attrs, attrs2, i);\n            fixM(p2, p, attrs2, attrs, i);\n            var seg = p[i],\n            seg2 = p2 && p2[i],\n            seglen = seg.length,\n            seg2len = p2 && seg2.length;\n            attrs.x = seg[seglen - 2];\n            attrs.y = seg[seglen - 1];\n            attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;\n            attrs.by = toFloat(seg[seglen - 3]) || attrs.y;\n            attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);\n            attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);\n            attrs2.x = p2 && seg2[seg2len - 2];\n            attrs2.y = p2 && seg2[seg2len - 1];\n        }\n        if (!p2) {\n            pth.curve = pathClone(p);\n        }\n        return p2 ? [p, p2] : p;\n    }, null, pathClone),\n    parseDots = R._parseDots = cacher(function(gradient) {\n        var dots = [];\n        for (var i = 0, ii = gradient.length; i < ii; i++) {\n            var dot = {},\n            par = gradient[i].match(/^([^:]*):?([\\d\\.]*)/);\n            dot.color = R.getRGB(par[1]);\n            if (dot.color.error) {\n                return null;\n            }\n            //store opacity information\n            dot.opacity = dot.color.opacity;\n            dot.color = dot.color.hex;\n            par[2] && (dot.offset = par[2] + \"%\");\n            dots.push(dot);\n        }\n        for (i = 1, ii = dots.length - 1; i < ii; i++) {\n            if (!dots[i].offset) {\n                var start = toFloat(dots[i - 1].offset || 0),\n                end = 0;\n                for (var j = i + 1; j < ii; j++) {\n                    if (dots[j].offset) {\n                        end = dots[j].offset;\n                        break;\n                    }\n                }\n                if (!end) {\n                    end = 100;\n                    j = ii;\n                }\n                end = toFloat(end);\n                var d = (end - start) / (j - i + 1);\n                for (; i < j; i++) {\n                    start += d;\n                    dots[i].offset = start + \"%\";\n                }\n            }\n        }\n        return dots;\n    }),\n    tear = R._tear = function(el, paper) {\n        el == paper.top && (paper.top = el.prev);\n        el == paper.bottom && (paper.bottom = el.next);\n        el.next && (el.next.prev = el.prev);\n        el.prev && (el.prev.next = el.next);\n    },\n    tofront = R._tofront = function(el, paper) {\n        if (paper.top === el) {\n            return false;\n        }\n        tear(el, paper);\n        el.next = null;\n        el.prev = paper.top;\n        paper.top.next = el;\n        paper.top = el;\n        return true;\n    },\n    toback = R._toback = function(el, paper) {\n        if (paper.bottom === el) {\n            return false;\n        }\n        tear(el, paper);\n        el.next = paper.bottom;\n        el.prev = null;\n        paper.bottom.prev = el;\n        paper.bottom = el;\n        return true;\n    },\n    insertafter = R._insertafter = function(el, el2, paper, paper2) {\n        tear(el, paper);\n        el.parent = paper2;\n        el2 === paper2.top && (paper2.top = el);\n        el2.next && (el2.next.prev = el);\n        el.next = el2.next;\n        el.prev = el2;\n        el2.next = el;\n    },\n    insertbefore = R._insertbefore = function(el, el2, paper, paper2) {\n        tear(el, paper);\n        el.parent = paper2;\n        el2 === paper2.bottom && (paper2.bottom = el);\n        el2.prev && (el2.prev.next = el);\n        el.prev = el2.prev;\n        el2.prev = el;\n        el.next = el2;\n    },\n\n        /*\\\n         * Raphael.toMatrix\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns matrix of transformations applied to a given path\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (object) @Matrix\n        \\*/\n    toMatrix = R.toMatrix = function(path, transform) {\n        var bb = pathDimensions(path),\n        el = {\n            _: {\n                transform: E\n            },\n            getBBox: function() {\n                return bb;\n            }\n        };\n        extractTransform(el, transform);\n        return el.matrix;\n    },\n\n        /*\\\n         * Raphael.transformPath\n         [ method ]\n         **\n         * Utility method\n         **\n         * Returns path transformed by a given transformation\n         > Parameters\n         - path (string) path string\n         - transform (string|array) transformation string\n         = (string) path\n        \\*/\n    transformPath = R.transformPath = function(path, transform) {\n        return mapPath(path, toMatrix(path, transform));\n    },\n    extractTransform = R._extractTransform = function(el, tstr) {\n        if (tstr == null) {\n            return el._.transform;\n        }\n        tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, el._.transform || E);\n        var tdata = R.parseTransformString(tstr),\n        deg = 0,\n        dx = 0,\n        dy = 0,\n        sx = 1,\n        sy = 1,\n        _ = el._,\n        m = new Matrix;\n        _.transform = tdata || [];\n        if (tdata) {\n            for (var i = 0, ii = tdata.length; i < ii; i++) {\n                var t = tdata[i],\n                tlen = t.length,\n                command = Str(t[0]).toLowerCase(),\n                absolute = t[0] != command,\n                inver = absolute ? m.invert() : 0,\n                x1,\n                y1,\n                x2,\n                y2,\n                bb;\n                if (command == \"t\" && tlen == 3) {\n                    if (absolute) {\n                        x1 = inver.x(0, 0);\n                        y1 = inver.y(0, 0);\n                        x2 = inver.x(t[1], t[2]);\n                        y2 = inver.y(t[1], t[2]);\n                        m.translate(x2 - x1, y2 - y1);\n                    } else {\n                        m.translate(t[1], t[2]);\n                    }\n                } else if (command == \"r\") {\n                    if (tlen == 2) {\n                        bb = _.bb || (_.bb = el.getBBox(1));\n                        m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                        deg += t[1];\n                    } else if (tlen == 4) {\n                        if (absolute) {\n                            x2 = inver.x(t[2], t[3]);\n                            y2 = inver.y(t[2], t[3]);\n                            m.rotate(t[1], x2, y2);\n                        } else {\n                            m.rotate(t[1], t[2], t[3]);\n                        }\n                        deg += t[1];\n                    }\n                } else if (command == \"s\") {\n                    if (tlen == 2 || tlen == 3) {\n                        bb = _.bb || (_.bb = el.getBBox(1));\n                        m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);\n                        sx *= t[1];\n                        sy *= t[tlen - 1];\n                    } else if (tlen == 5) {\n                        if (absolute) {\n                            x2 = inver.x(t[3], t[4]);\n                            y2 = inver.y(t[3], t[4]);\n                            m.scale(t[1], t[2], x2, y2);\n                        } else {\n                            m.scale(t[1], t[2], t[3], t[4]);\n                        }\n                        sx *= t[1];\n                        sy *= t[2];\n                    }\n                } else if (command == \"m\" && tlen == 7) {\n                    m.add(t[1], t[2], t[3], t[4], t[5], t[6]);\n                }\n                _.dirtyT = 1;\n                el.matrix = m;\n            }\n        }\n\n        /*\\\n         * Element.matrix\n         [ property (object) ]\n         **\n         * Keeps @Matrix object, which represents element transformation\n        \\*/\n        el.matrix = m;\n\n        _.sx = sx;\n        _.sy = sy;\n        _.deg = deg;\n        _.dx = dx = m.e;\n        _.dy = dy = m.f;\n\n        if (sx == 1 && sy == 1 && !deg && _.bbox) {\n            _.bbox.x += +dx;\n            _.bbox.y += +dy;\n        } else {\n            _.dirtyT = 1;\n        }\n    },\n    getEmpty = function(item) {\n        var l = item[0];\n        switch (l.toLowerCase()) {\n            case \"t\":\n                return [l, 0, 0];\n            case \"m\":\n                return [l, 1, 0, 0, 1, 0, 0];\n            case \"r\":\n                if (item.length == 4) {\n                    return [l, 0, item[2], item[3]];\n                } else {\n                    return [l, 0];\n                }\n            case \"s\":\n                if (item.length == 5) {\n                    return [l, 1, 1, item[3], item[4]];\n                } else if (item.length == 3) {\n                    return [l, 1, 1];\n                } else {\n                    return [l, 1];\n                }\n        }\n    },\n    equaliseTransform = R._equaliseTransform = function(t1, t2) {\n        t2 = Str(t2).replace(/\\.{3}|\\u2026/g, t1);\n        t1 = R.parseTransformString(t1) || [];\n        t2 = R.parseTransformString(t2) || [];\n        var maxlength = mmax(t1.length, t2.length),\n        from = [],\n        to = [],\n        i = 0, j, jj,\n        tt1, tt2;\n        for (; i < maxlength; i++) {\n            tt1 = t1[i] || getEmpty(t2[i]);\n            tt2 = t2[i] || getEmpty(tt1);\n            if ((tt1[0] != tt2[0]) ||\n                (tt1[0].toLowerCase() == \"r\" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||\n                (tt1[0].toLowerCase() == \"s\" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))\n                ) {\n                return;\n            }\n            from[i] = [];\n            to[i] = [];\n            for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {\n                j in tt1 && (from[i][j] = tt1[j]);\n                j in tt2 && (to[i][j] = tt2[j]);\n            }\n        }\n        return {\n            from: from,\n            to: to\n        };\n    };\n    R._getContainer = function(x, y, w, h) {\n        var container;\n        container = h == null && !R.is(x, object) ? g.doc.getElementById(x) : x;\n        if (container == null) {\n            return;\n        }\n        if (container.tagName) {\n            if (y == null) {\n                return {\n                    container: container,\n                    width: container.style.pixelWidth || container.offsetWidth,\n                    height: container.style.pixelHeight || container.offsetHeight\n                };\n            } else {\n                return {\n                    container: container,\n                    width: y,\n                    height: w\n                };\n            }\n        }\n        return {\n            container: 1,\n            x: x,\n            y: y,\n            width: w,\n            height: h\n        };\n    };\n\n    /*\\\n     * Raphael.pathToRelative\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to relative form\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.pathToRelative = pathToRelative;\n    R._engine = {};\n\n    /*\\\n     * Raphael.path2curve\n     [ method ]\n     **\n     * Utility method\n     **\n     * Converts path to a new path where all segments are cubic bezier curves.\n     > Parameters\n     - pathString (string|array) path string or array of segments\n     = (array) array of segments.\n    \\*/\n    R.path2curve = path2curve;\n\n    /*\\\n     * Raphael.matrix\n     [ method ]\n     **\n     * Utility method\n     **\n     * Returns matrix based on given parameters.\n     > Parameters\n     - a (number)\n     - b (number)\n     - c (number)\n     - d (number)\n     - e (number)\n     - f (number)\n     = (object) @Matrix\n    \\*/\n    R.matrix = function(a, b, c, d, e, f) {\n        return new Matrix(a, b, c, d, e, f);\n    };\n\n    function Matrix(a, b, c, d, e, f) {\n        if (a != null) {\n            this.a = +a;\n            this.b = +b;\n            this.c = +c;\n            this.d = +d;\n            this.e = +e;\n            this.f = +f;\n        } else {\n            this.a = 1;\n            this.b = 0;\n            this.c = 0;\n            this.d = 1;\n            this.e = 0;\n            this.f = 0;\n        }\n    }\n    (function(matrixproto) {\n\n        /*\\\n         * Matrix.add\n         [ method ]\n         **\n         * Adds given matrix to existing one.\n         > Parameters\n         - a (number)\n         - b (number)\n         - c (number)\n         - d (number)\n         - e (number)\n         - f (number)\n         or\n         - matrix (object) @Matrix\n        \\*/\n        matrixproto.add = function(a, b, c, d, e, f) {\n            var out = [[], [], []],\n            m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],\n            matrix = [[a, c, e], [b, d, f], [0, 0, 1]],\n            x, y, z, res;\n\n            if (a && a instanceof Matrix) {\n                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];\n            }\n\n            for (x = 0; x < 3; x++) {\n                for (y = 0; y < 3; y++) {\n                    res = 0;\n                    for (z = 0; z < 3; z++) {\n                        res += m[x][z] * matrix[z][y];\n                    }\n                    out[x][y] = res;\n                }\n            }\n            this.a = out[0][0];\n            this.b = out[1][0];\n            this.c = out[0][1];\n            this.d = out[1][1];\n            this.e = out[0][2];\n            this.f = out[1][2];\n        };\n\n        /*\\\n         * Matrix.invert\n         [ method ]\n         **\n         * Returns inverted version of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.invert = function() {\n            var me = this,\n            x = me.a * me.d - me.b * me.c;\n            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);\n        };\n\n        /*\\\n         * Matrix.clone\n         [ method ]\n         **\n         * Returns copy of the matrix\n         = (object) @Matrix\n        \\*/\n        matrixproto.clone = function() {\n            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\n        };\n\n        /*\\\n         * Matrix.translate\n         [ method ]\n         **\n         * Translate the matrix\n         > Parameters\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.translate = function(x, y) {\n            this.add(1, 0, 0, 1, x, y);\n        };\n\n        /*\\\n         * Matrix.scale\n         [ method ]\n         **\n         * Scales the matrix\n         > Parameters\n         - x (number)\n         - y (number) #optional\n         - cx (number) #optional\n         - cy (number) #optional\n        \\*/\n        matrixproto.scale = function(x, y, cx, cy) {\n            y == null && (y = x);\n            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);\n            this.add(x, 0, 0, y, 0, 0);\n            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);\n        };\n\n        /*\\\n         * Matrix.rotate\n         [ method ]\n         **\n         * Rotates the matrix\n         > Parameters\n         - a (number)\n         - x (number)\n         - y (number)\n        \\*/\n        matrixproto.rotate = function(a, x, y) {\n            a = R.rad(a);\n            x = x || 0;\n            y = y || 0;\n            var cos = +mathCos(a).toFixed(9),\n            sin = + mathSin(a).toFixed(9);\n            this.add(cos, sin, -sin, cos, x, y);\n            this.add(1, 0, 0, 1, -x, -y);\n        };\n\n        /*\\\n         * Matrix.x\n         [ method ]\n         **\n         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) x\n        \\*/\n        matrixproto.x = function(x, y) {\n            return x * this.a + y * this.c + this.e;\n        };\n\n        /*\\\n         * Matrix.y\n         [ method ]\n         **\n         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x\n         > Parameters\n         - x (number)\n         - y (number)\n         = (number) y\n        \\*/\n        matrixproto.y = function(x, y) {\n            return x * this.b + y * this.d + this.f;\n        };\n        matrixproto.get = function(i) {\n            return +this[Str.fromCharCode(97 + i)].toFixed(4);\n        };\n        matrixproto.toString = function() {\n            return R.svg ?\n            \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\" :\n            [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();\n        };\n        matrixproto.toMatrixString = function() {\n            return \"matrix(\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + \")\";\n        };\n        matrixproto.toFilter = function() {\n            return \"progid:DXImageTransform.Microsoft.Matrix(M11=\" + this.get(0) +\n            \", M12=\" + this.get(2) + \", M21=\" + this.get(1) + \", M22=\" + this.get(3) +\n            \", Dx=\" + this.get(4) + \", Dy=\" + this.get(5) + \", sizingmethod='auto expand')\";\n        };\n        matrixproto.offset = function() {\n            return [this.e.toFixed(4), this.f.toFixed(4)];\n        };\n        function norm(a) {\n            return a[0] * a[0] + a[1] * a[1];\n        }\n        function normalize(a) {\n            var mag = mathSqrt(norm(a));\n            a[0] && (a[0] /= mag);\n            a[1] && (a[1] /= mag);\n        }\n\n        /*\\\n         * Matrix.split\n         [ method ]\n         **\n         * Splits matrix into primitive transformations\n         = (object) in format:\n         o dx (number) translation by x\n         o dy (number) translation by y\n         o scalex (number) scale by x\n         o scaley (number) scale by y\n         o shear (number) shear\n         o rotate (number) rotation in deg\n         o isSimple (boolean) could it be represented via simple transformations\n        \\*/\n        matrixproto.split = function() {\n            var out = {};\n            // translation\n            out.dx = this.e;\n            out.dy = this.f;\n\n            // scale and shear\n            var row = [[this.a, this.c], [this.b, this.d]];\n            out.scalex = mathSqrt(norm(row[0]));\n            normalize(row[0]);\n\n            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];\n            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];\n\n            out.scaley = mathSqrt(norm(row[1]));\n            normalize(row[1]);\n            out.shear /= out.scaley;\n\n            // rotation\n            var sin = -row[0][1],\n            cos = row[1][1];\n            if (cos < 0) {\n                out.rotate = R.deg(math.acos(cos));\n                if (sin < 0) {\n                    out.rotate = 360 - out.rotate;\n                }\n            } else {\n                out.rotate = R.deg(math.asin(sin));\n            }\n\n            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);\n            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;\n            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;\n            return out;\n        };\n\n        /*\\\n         * Matrix.toTransformString\n         [ method ]\n         **\n         * Return transform string that represents given matrix\n         = (string) transform string\n        \\*/\n        matrixproto.toTransformString = function(shorter) {\n            var s = shorter || this[split]();\n            if (s.isSimple) {\n                s.scalex = +s.scalex.toFixed(4);\n                s.scaley = +s.scaley.toFixed(4);\n                s.rotate = +s.rotate.toFixed(4);\n                return  (s.dx || s.dy ? \"t\" + [s.dx, s.dy] : E) +\n                (s.scalex != 1 || s.scaley != 1 ? \"s\" + [s.scalex, s.scaley, 0, 0] : E) +\n                (s.rotate ? \"r\" + [s.rotate, 0, 0] : E);\n            } else {\n                return \"m\" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];\n            }\n        };\n    })(Matrix.prototype);\n\n    // WebKit rendering bug workaround method\n    var navigator = win.navigator,\n        version = navigator.userAgent.match(/Version\\/(.*?)\\s/) || navigator.userAgent.match(/Chrome\\/(\\d+)/);\n\n    if ((navigator.vendor == \"Apple Computer, Inc.\") && (version && version[1] < 4 || navigator.platform.slice(0, 2) == \"iP\") ||\n        (navigator.vendor == \"Google Inc.\" && version && version[1] < 8)) {\n\n        /*\\\n         * Paper.safari\n         [ method ]\n         **\n         * There is an inconvenient rendering bug in Safari (WebKit):\n         * sometimes the rendering should be forced.\n         * This method should help with dealing with this bug.\n        \\*/\n        paperproto.safari = function() {\n            var rect = this.rect(-99, -99, this.width + 99, this.height + 99).attr({\n                stroke: \"none\"\n            });\n            setTimeout(function() {\n                rect.remove();\n            });\n            return true;\n        };\n    } else {\n        paperproto.safari = fun;\n    }\n\n    var preventDefault = function() {\n        this.returnValue = false;\n    },\n    preventTouch = function() {\n        return this.originalEvent.preventDefault();\n    },\n    stopPropagation = function() {\n        this.cancelBubble = true;\n    },\n    stopTouch = function() {\n        return this.originalEvent.stopPropagation();\n    },\n    addEvent = R.addEvent = (function() {\n        if (g.doc.addEventListener) {\n            return function(obj, type, fn, element) {\n                var realName = supportsOnlyTouch && touchMap[type] || type,\n                    f;\n\n                touchMap[dragEventMap[type]] && (realName = touchMap[dragEventMap[type]]);\n\n                f = function(e) {\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                        target;\n                    if (supportsTouch && touchMap[has](supportsOnlyTouch ? type : dragEventMap[type])) {\n                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {\n                            target = e.targetTouches[i].target;\n                            if (target == obj || (target.nodeName == 'tspan' && target.parentNode == obj)) {\n                                var olde = e;\n                                e = e.targetTouches[i];\n                                e.originalEvent = olde;\n                                e.preventDefault = preventTouch;\n                                e.stopPropagation = stopTouch;\n                                break;\n                            }\n                        }\n                    }\n                    return fn.call(element, e, e.clientX + scrollX, e.clientY + scrollY);\n                };\n                obj.addEventListener(realName, f, false);\n                return function() {\n                    obj.removeEventListener(realName, f, false);\n                    return true;\n                };\n            };\n        } else if (g.doc.attachEvent) {\n            return function(obj, type, fn, element) {\n                var f = function(e) {\n                    e = e || g.win.event;\n                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                    scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                    x = e.clientX + scrollX,\n                    y = e.clientY + scrollY;\n                    e.preventDefault = e.preventDefault || preventDefault;\n                    e.stopPropagation = e.stopPropagation || stopPropagation;\n                    return fn.call(element, e, x, y);\n                };\n                obj.attachEvent(\"on\" + type, f);\n                var detacher = function() {\n                    obj.detachEvent(\"on\" + type, f);\n                    return true;\n                };\n                return detacher;\n            };\n        }\n    })(),\n\n    drag = [],\n\n    dragMove = function(e) {\n        var x = e.clientX,\n            y = e.clientY,\n            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            dragi,\n            data,\n            dummyEve = {},\n            key,\n            j = drag.length;\n\n        while (j--) {\n            dragi = drag[j];\n            if (supportsTouch && e.type === 'touchmove') {\n                var i = e.touches.length,\n                touch;\n                while (i--) {\n                    touch = e.touches[i];\n                    if (touch.identifier == dragi.el._drag.id) {\n                        x = touch.clientX;\n                        y = touch.clientY;\n                        (e.originalEvent ? e.originalEvent : e).preventDefault();\n                        break;\n                    }\n                }\n            } else {\n                e.preventDefault();\n            }\n\n            if (dragi.el.removed) {\n                continue;\n            }\n\n            var node = R._engine.getNode(dragi.el),\n                o,\n                next = node.nextSibling,\n                parent = node.parentNode,\n                display = node.style.display;\n\n            g.win.opera && parent.removeChild(node);\n\n            node.style.display = \"none\";\n            o = dragi.el.paper.getElementByPoint(x, y);\n            node.style.display = display;\n            g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n            o && eve(\"raphael.drag.over.\" + dragi.el.id, dragi.el, o);\n            x += scrollX;\n            y += scrollY;\n            for (key in e) {\n                if (typeof e[key] === 'function') {\n                    dummyEve[key] = e[key].bind(e);\n                } else {\n                    dummyEve[key] = e[key];\n                }\n            }\n            data = dummyEve.data = [x - dragi.el._drag.x, y - dragi.el._drag.y, x, y];\n            eve(\"raphael.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, dummyEve, data);\n        }\n    },\n    dragUp = function(e) {\n        R.undragmove(dragMove).undragend(dragUp);\n        R.unmousemove(dragMove).unmouseup(dragUp);\n        var i = drag.length,\n            dragi;\n\n        while (i--) {\n            dragi = drag[i];\n            dragi.el._drag = {};\n            eve(\"raphael.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n        }\n        drag = [];\n    },\n\n    /*\\\n     * Raphael.el\n     [ property (object) ]\n     **\n     * You can add your own method to elements. This is usefull when you want to hack default functionality or\n     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,\n     * you can redefine element method at any time. Expending element methods wouldn’t affect set.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: \"#f00\"});\n     | };\n     | // then use it\n     | paper.circle(100, 100, 20).red();\n    \\*/\n    elproto = R.el = {};\n\n    /*\\\n     * Element.click\n     [ method ]\n     **\n     * Adds event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unclick\n     [ method ]\n     **\n     * Removes event handler for click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.dblclick\n     [ method ]\n     **\n     * Adds event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.undblclick\n     [ method ]\n     **\n     * Removes event handler for double click for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousedown\n     [ method ]\n     **\n     * Adds event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousedown\n     [ method ]\n     **\n     * Removes event handler for mousedown for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mousemove\n     [ method ]\n     **\n     * Adds event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmousemove\n     [ method ]\n     **\n     * Removes event handler for mousemove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseout\n     [ method ]\n     **\n     * Adds event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseout\n     [ method ]\n     **\n     * Removes event handler for mouseout for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseover\n     [ method ]\n     **\n     * Adds event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseover\n     [ method ]\n     **\n     * Removes event handler for mouseover for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.mouseup\n     [ method ]\n     **\n     * Adds event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.unmouseup\n     [ method ]\n     **\n     * Removes event handler for mouseup for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchstart\n     [ method ]\n     **\n     * Adds event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchstart\n     [ method ]\n     **\n     * Removes event handler for touchstart for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchmove\n     [ method ]\n     **\n     * Adds event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchmove\n     [ method ]\n     **\n     * Removes event handler for touchmove for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchend\n     [ method ]\n     **\n     * Adds event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchend\n     [ method ]\n     **\n     * Removes event handler for touchend for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n\n    /*\\\n     * Element.touchcancel\n     [ method ]\n     **\n     * Adds event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    /*\\\n     * Element.untouchcancel\n     [ method ]\n     **\n     * Removes event handler for touchcancel for the element.\n     > Parameters\n     - handler (function) handler for the event\n     = (object) @Element\n    \\*/\n    for (var i = events.length; i--; ) {\n        (function(eventName) {\n            R[eventName] = elproto[eventName] = function(fn, scope) {\n                if (R.is(fn, \"function\")) {\n                    this.events = this.events || [];\n                    this.events.push({\n                        name: eventName,\n                        f: fn,\n                        unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)\n                    });\n                }\n                return this;\n            };\n            R[\"un\" + eventName] = elproto[\"un\" + eventName] = function(fn) {\n                var events = this.events || [],\n                l = events.length;\n                while (l--)\n                    if (events[l].name == eventName && events[l].f == fn) {\n                        events[l].unbind();\n                        events.splice(l, 1);\n                        !events.length && delete this.events;\n                        return this;\n                    }\n                return this;\n            };\n        })(events[i]);\n    }\n\n    /*\\\n     * Element.data\n     [ method ]\n     **\n     * Adds or retrieves given value asociated with given key.\n     **\n     * See also @Element.removeData\n     > Parameters\n     - key (string) key to store data\n     - value (any) #optional value to store\n     = (object) @Element\n     * or, if value is not specified:\n     = (any) value\n     > Usage\n     | for (var i = 0, i < 5, i++) {\n     |     paper.circle(10 + 15 * i, 10, 10)\n     |          .attr({fill: \"#000\"})\n     |          .data(\"i\", i)\n     |          .click(function () {\n     |             alert(this.data(\"i\"));\n     |          });\n     | }\n    \\*/\n    elproto.data = function(key, value) {\n        var data = eldata[this.id] = eldata[this.id] || {};\n        if (arguments.length == 1) {\n            if (R.is(key, object)) {\n                for (var i in key)\n                    if (key[has](i)) {\n                        this.data(i, key[i]);\n                    }\n                return this;\n            }\n            eve(\"raphael.data.get.\" + this.id, this, data[key], key);\n            return data[key];\n        }\n        data[key] = value;\n        eve(\"raphael.data.set.\" + this.id, this, value, key);\n        return this;\n    };\n\n    /*\\\n     * Element.removeData\n     [ method ]\n     **\n     * Removes value associated with an element by given key.\n     * If key is not provided, removes all the data of the element.\n     > Parameters\n     - key (string) #optional key\n     = (object) @Element\n    \\*/\n    elproto.removeData = function (key) {\n        if (key == null) {\n            delete eldata[this.id];\n        } else {\n            eldata[this.id] && delete eldata[this.id][key];\n        }\n        return this;\n    };\n\n     /*\\\n     * Element.getData\n     [ method ]\n     **\n     * Retrieves the element data\n     = (object) data\n    \\*/\n    elproto.getData = function () {\n        return clone(eldata[this.id] || {});\n    };\n\n    var downables = [],\n        mouseDown = function () {\n            this.untrack = addEvent(g.doc, 'mouseup', mouseUp, this);\n        },\n        mouseUp = function () {\n            this.untrack();\n            this.untrack = null;\n            return this.fn && this.fn.apply(this.scope || this.el, arguments);\n\n        };\n    elproto.mouseup = function (fn, scope, track) {\n        if (!track) {\n            return R.mouseup.apply(this, arguments);\n        }\n        downables.push(track = {\n            el: this,\n            fn: fn,\n            scope: scope\n        });\n        track.unbind = addEvent(this.shape || this.node || g.doc,\n            'mousedown', mouseDown, track);\n\n        return this;\n    };\n\n    elproto.unmouseup = function (fn) {\n        var i = downables.length,\n            undowned;\n        while (i--) {\n            if (downables[i].el === this && downables[i].fn === fn) {\n                undowned = downables[i];\n                undowned.unbind();\n                undowned.untrack && undowned.untrack();\n                downables.splice(i, 1);\n            }\n        }\n        return undowned ? this : R.unmouseup.apply(this, arguments);\n    };\n\n    /*\\\n     * Element.hover\n     [ method ]\n     **\n     * Adds event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     - icontext (object) #optional context for hover in handler\n     - ocontext (object) #optional context for hover out handler\n     = (object) @Element\n    \\*/\n    elproto.hover = function(f_in, f_out, scope_in, scope_out) {\n        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);\n    };\n\n    /*\\\n     * Element.unhover\n     [ method ]\n     **\n     * Removes event handlers for hover for the element.\n     > Parameters\n     - f_in (function) handler for hover in\n     - f_out (function) handler for hover out\n     = (object) @Element\n    \\*/\n    elproto.unhover = function(f_in, f_out) {\n        return this.unmouseover(f_in).unmouseout(f_out);\n    };\n    var draggable = [];\n\n    /*\\\n     * Element.drag\n     [ method ]\n     **\n     * Adds event handlers for drag of the element.\n     > Parameters\n     - onmove (function) handler for moving\n     - onstart (function) handler for drag start\n     - onend (function) handler for drag end\n     - mcontext (object) #optional context for moving handler\n     - scontext (object) #optional context for drag start handler\n     - econtext (object) #optional context for drag end handler\n     * Additionaly following `drag` events will be triggered: `drag.start.<id>` on start,\n     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element\n     * `drag.over.<id>` will be fired as well.\n     *\n     * Start event and start handler will be called in specified context or in context of the element with following parameters:\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * Move event and move handler will be called in specified context or in context of the element with following parameters:\n     o dx (number) shift by x from the start point\n     o dy (number) shift by y from the start point\n     o x (number) x position of the mouse\n     o y (number) y position of the mouse\n     o event (object) DOM event object\n     * End event and end handler will be called in specified context or in context of the element with following parameters:\n     o event (object) DOM event object\n     = (object) @Element\n    \\*/\n    elproto.drag = function(onmove, onstart, onend, move_scope, start_scope, end_scope) {\n        function start(e) {\n            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n                key,\n                dummyEve = {},\n                data;\n\n            this._drag.x = e.clientX + scrollX;\n            this._drag.y = e.clientY + scrollY;\n            this._drag.id = e.identifier;\n\n            // Add the drag events for the browsers that doesn't fire mouse event on touch and drag\n            if (supportsTouch && !supportsOnlyTouch) {\n                !drag.length && R.dragmove(dragMove).dragend(dragUp);\n            }\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n\n\n            drag = [{\n                el: this,\n                move_scope: move_scope,\n                start_scope: start_scope,\n                end_scope: end_scope\n            }];\n            for (key in e) {\n                if (typeof e[key] === 'function') {\n                    dummyEve[key] = e[key].bind(e);\n                } else {\n                    dummyEve[key] = e[key];\n                }\n            }\n            data = dummyEve.data = [e.clientX + scrollX, e.clientY + scrollY];\n            onstart && onstart.call(start_scope || move_scope || this, dummyEve, data);\n            // onstart && eve.on(\"raphael.drag.start.\" + this.id, onstart);\n            onmove && eve.on(\"raphael.drag.move.\" + this.id, onmove);\n            onend && eve.on(\"raphael.drag.end.\" + this.id, onend);\n            // onstart && eve(\"raphael.drag.start.\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n        }\n        this._drag = {};\n        draggable.push({\n            el: this,\n            start: start,\n            onstart: onstart,\n            onmove: onmove,\n            onend: onend\n        });\n        // Add the drag events for the browsers that doesn't fire mouse event on touch and drag\n        if (supportsTouch && !supportsOnlyTouch) {\n            this.dragstart(start);\n        }\n        this.mousedown(start);\n\n        return this;\n    };\n\n    /*\\\n     * Element.onDragOver\n     [ method ]\n     **\n     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).\n     > Parameters\n     - f (function) handler for event, first argument would be the element you are dragging over\n    \\*/\n    elproto.onDragOver = function(f) {\n        f ? eve.on(\"raphael.drag.over.\" + this.id, f) : eve.unbind(\"raphael.drag.over.\" + this.id);\n    };\n\n    /*\\\n     * Element.undrag\n     [ method ]\n     **\n     * Removes all drag event handlers from given element.\n    \\*/\n    elproto.undrag = function() {\n        var i = draggable.length;\n        while (i--) {\n            if (draggable[i].el == this) {\n                this.unmousedown(draggable[i].start);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.*.\" + this.id);\n            }\n        }\n\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n        delete this._drag;\n    };\n\n    /*\\\n     * Element.undragmove\n     [ method ]\n     **\n     * Removes all dragmove event handlers from given element.\n    \\*/\n    elproto.undragmove = function() {\n        var i = draggable.length;\n        while (i--) {\n            if (draggable[i].el == this && draggable[i].onmove) {\n                this.unmousedown(draggable[i].start);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.move.\" + this.id);\n            }\n        }\n\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n    };\n\n    /*\\\n     * Element.undragend\n     [ method ]\n     **\n     * Removes all dragend event handlers from given element.\n    \\*/\n    elproto.undragend = function() {\n        var i = draggable.length;\n        while (i--) {\n            if (draggable[i].el == this && draggable[i].onend) {\n                this.unmousedown(draggable[i].start);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.end.\" + this.id);\n            }\n        }\n\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n    };\n\n    /*\\\n     * Element.undragstart\n     [ method ]\n     **\n     * Removes all dragstart event handlers from given element.\n    \\*/\n    elproto.undragstart = function() {\n        var i = draggable.length;\n        while (i--) {\n            if (draggable[i].el == this && draggable[i].onstart) {\n                this.unmousedown(draggable[i].start);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.start.\" + this.id);\n                this._dragstart = false;\n            }\n        }\n\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n    };\n\n    elproto.follow = function(el, callback, stalk) {\n        if (el.removed || el.constructor !== R.el.constructor) {\n            return this;\n        }\n        el.followers.push({\n            el: this,\n            stalk: (stalk = {before: 'insertBefore', after: 'insertAfter'}[stalk]),\n            cb: callback\n        });\n\n        stalk && this[stalk](el);\n        return this;\n    };\n\n    elproto.unfollow = function(el) {\n        if (el.removed || el.constructor !== R.el.constructor) {\n            return this;\n        }\n        for (var i = 0, ii = el.followers.length; i < ii; i++) {\n            if (el.followers[i].el === this) {\n                el.followers.splice(i, 1);\n                break;\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Paper.hide\n     [ method ]\n     **\n     * Hides a paper\n     **\n     > Usage\n     | paper.hide();\n    \\*/\n    paperproto.hide = function () {\n        var paper = this;\n        paper.canvas.style.visibility = \"hidden\";\n        return paper;\n    };\n\n    /*\\\n     * Paper.show\n     [ method ]\n     **\n     * Shows a hidden paper\n     **\n     > Usage\n     | paper.show();\n    \\*/\n    paperproto.show = function () {\n        var paper = this;\n        paper.canvas.style.visibility = E;\n        return paper;\n    };\n\n    /*\\\n     * Paper.set\n     [ method ]\n     **\n     * Creates array-like object to keep and operate several elements at once.\n     * Warning: it doesn’t create any elements for itself in the page, it just groups existing elements.\n     * Sets act as pseudo elements — all methods available to an element can be used on a set.\n     = (object) array-like object that represents set of elements\n     **\n     > Usage\n     | var st = paper.set();\n     | st.push(\n     |     paper.circle(10, 10, 5),\n     |     paper.circle(30, 10, 5)\n     | );\n     | st.attr({fill: \"red\"}); // changes the fill of both circles\n    \\*/\n    paperproto.set = function(itemsArray) {\n        !R.is(itemsArray, \"array\") && (itemsArray = arraySplice.call(arguments, 0, arguments.length));\n        var out = new Set(itemsArray);\n        this.__set__ && this.__set__.push(out);\n        return out;\n    };\n\n    /*\\\n     * Paper.setConfig\n     [ method ]\n     **\n     * If you need to store any configuration in paper, call this method\n     **\n     > Parameters\n     **\n     - key (String) key name of the key-value pair\n     - value (String or number) value of the key-value pair\n    \\*/\n    paperproto.setConfig = function (key, value) {\n        var paper = this;\n\n        if ((key !== undefined) && (value !== undefined)) {\n\n            paper.config = paper.config || {};\n            paper.config[key] = value;\n        }\n        return paper.config;\n    };\n\n    /*\\\n     * Paper.setStart\n     [ method ]\n     **\n     * Creates @Paper.set. All elements that will be created after calling this method and before calling\n     * @Paper.setFinish will be added to the set.\n     **\n     > Usage\n     | paper.setStart();\n     | paper.circle(10, 10, 5),\n     | paper.circle(30, 10, 5)\n     | var st = paper.setFinish();\n     | st.attr({fill: \"red\"}); // changes the fill of both circles\n    \\*/\n    paperproto.setStart = function(set) {\n        this.__set__ = set || this.set();\n    };\n\n    /*\\\n     * Paper.setFinish\n     [ method ]\n     **\n     * See @Paper.setStart. This method finishes catching and returns resulting set.\n     **\n     = (object) set\n    \\*/\n    paperproto.setFinish = function(set) {\n        var out = this.__set__;\n        delete this.__set__;\n        return out;\n    };\n\n    /*\\\n     * Paper.setSize\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - width (number) new width of the canvas\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setSize = function(width, height) {\n        return R._engine.setSize.call(this, width, height);\n    };\n\n    /*\\\n     * paper.setDimension\n     [ method ]\n     **\n     * If you need to change dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - paramsObj (Object or number)\n        - paramsObj (Object)\n        **\n        > Properties of paramsObj\n        - width (number) new width of the canvas\n        - height (number) new height of the canvas\n        **\n        - paramsObj (number) new width of the canvas\n        **\n     - height (number) new height of the canvas\n    \\*/\n    paperproto.setDimension = function(paramsObj, height) {\n        var paper = this,\n            width;\n        // Check if the first argument is an object or not\n        if (typeof(paramsObj) === 'object') {\n            width = paramsObj.width;\n            height = paramsObj.height;\n            paper.setSize(paramsObj.width, paramsObj.height);\n        }\n        else {\n            width = paramsObj;\n            paper.setSize(width, height);\n        }\n    };\n\n    paperproto.attr = function (name) {\n        var element = this;\n        if (name == null) {\n            return {\n                width : element.width,\n                height : element.height\n            };\n        }\n        if (R.is(name, \"string\")) {\n            return element[name];\n        }\n\n        element.setDimension(name);\n        return element;\n    };\n\n    paperproto.status = function(anim, value) {\n        return elproto.status.call(this, anim, value);\n    };\n\n    // Works exactly as paper.animateWith()\n    paperproto.animateWith = function(el, anim, params, ms, easing, callback, configObject) {\n        return elproto.animateWith.call(this, el, anim, params, ms, easing, callback, configObject);\n    };\n\n    /*\\\n     * Paper.animate\n     [ method ]\n     **\n     * If you need to animate dimensions of the canvas call this method\n     **\n     > Parameters\n     **\n     - paramsObj (Object)\n        > Properties of paramsObj\n        **\n        - width (number) new width of the canvas\n        - height (number) new height of the canvas\n     - duration (number) time stretch in milliseconds to complete animation\n     - effect (String) animation style\n     - callback (function reference) method which will execute at end of animation\n    \\*/\n    paperproto.animate = function(params, ms, easing, callback) {\n        return elproto.animate.call(this, params, ms, easing, callback);\n    };\n\n    /*\\\n     * Paper.setViewBox\n     [ method ]\n     **\n     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by\n     * specifying new boundaries.\n     **\n     > Parameters\n     **\n     - x (number) new x position, default is `0`\n     - y (number) new y position, default is `0`\n     - w (number) new width of the canvas\n     - h (number) new height of the canvas\n     - fit (boolean) `true` if you want graphics to fit into new boundary box\n    \\*/\n    paperproto.setViewBox = function(x, y, w, h, fit) {\n        return R._engine.setViewBox.call(this, x, y, w, h, fit);\n    };\n\n    /*\\\n     * Paper.top\n     [ property ]\n     **\n     * Points to the topmost element on the paper\n    \\*/\n    /*\\\n     * Paper.bottom\n     [ property ]\n     **\n     * Points to the bottom element on the paper\n    \\*/\n    paperproto.top = paperproto.bottom = null;\n\n    /*\\\n     * Paper.raphael\n     [ property ]\n     **\n     * Points to the @Raphael object/function\n    \\*/\n    paperproto.raphael = R;\n\n    var getOffset = function(elem) {\n        var box = elem.getBoundingClientRect(),\n        doc = elem.ownerDocument,\n        body = doc.body,\n        docElem = doc.documentElement,\n        clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,\n        top = box.top + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop) - clientTop,\n        left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;\n        return {\n            y: top,\n            x: left\n        };\n    };\n\n    /*\\\n     * Paper.getElementByPoint\n     [ method ]\n     **\n     * Returns you topmost element under given point.\n     **\n     = (object) Raphaël element object\n     > Parameters\n     **\n     - x (number) x coordinate from the top left corner of the window\n     - y (number) y coordinate from the top left corner of the window\n     > Usage\n     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: \"#f00\"});\n    \\*/\n    paperproto.getElementByPoint = function(x, y) {\n        var paper = this,\n        svg = paper.canvas,\n        target = g.doc.elementFromPoint(x, y);\n        if (g.win.opera && target.tagName == \"svg\") {\n            var so = getOffset(svg),\n            sr = svg.createSVGRect();\n            sr.x = x - so.x;\n            sr.y = y - so.y;\n            sr.width = sr.height = 1;\n            var hits = svg.getIntersectionList(sr, null);\n            if (hits.length) {\n                target = hits[hits.length - 1];\n            }\n        }\n        if (!target) {\n            return null;\n        }\n        while (target.parentNode && target != svg.parentNode && !target.raphael) {\n            target = target.parentNode;\n        }\n        target == paper.canvas.parentNode && (target = svg);\n        target = target && target.raphael ? paper.getById(target.raphaelid) : null;\n        return target;\n    };\n\n    /*\\\n     * Paper.getElementsByBBox\n     [ method ]\n     **\n     * Returns set of elements that have an intersecting bounding box\n     **\n     > Parameters\n     **\n     - bbox (object) bbox to check with\n     = (object) @Set\n     \\*/\n     paperproto.getElementsByBBox = function (bbox) {\n         var set = this.set();\n         this.forEach(function (el) {\n             if (R.isBBoxIntersect(el.getBBox(), bbox)) {\n                 set.push(el);\n             }\n         });\n         return set;\n     };\n\n    paperproto.getById = function(id) {\n        return this._elementsById[id] || null;\n    };\n\n    /*\\\n     * Paper.forEach\n     [ method ]\n     **\n     * Executes given function for each element on the paper\n     *\n     * If callback function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Paper object\n     > Usage\n     | paper.forEach(function (el) {\n     |     el.attr({ stroke: \"blue\" });\n     | });\n    \\*/\n    paperproto.forEach = function(callback, thisArg) {\n        var bot = this.bottom;\n        while (bot) {\n            if (callback.call(thisArg, bot) === false) {\n                return this;\n            }\n            bot = bot.next;\n        }\n        return this;\n    };\n\n    /*\\\n     * Paper.getElementsByPoint\n     [ method ]\n     **\n     * Returns set of elements that have common point inside\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (object) @Set\n    \\*/\n    paperproto.getElementsByPoint = function(x, y) {\n        var set = this.set();\n        this.forEach(function(el) {\n            if (el.isPointInside(x, y)) {\n                set.push(el);\n            }\n        });\n        return set;\n    };\n    function x_y() {\n        return this.x + S + this.y;\n    };\n    function x_y_w_h() {\n        return this.x + S + this.y + S + this.width + \" \\xd7 \" + this.height;\n    };\n\n    /*\\\n     * Element.isPointInside\n     [ method ]\n     **\n     * Determine if given point is inside this element’s shape\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the point\n     - y (number) y coordinate of the point\n     = (boolean) `true` if point inside the shape\n    \\*/\n    elproto.isPointInside = function(x, y) {\n        var rp = this.realPath = this.realPath || getPath[this.type](this),\n            tr;\n        return R.isPointInsidePath(((tr = this.attr('transform')) &&\n            tr.length && R.transformPath(rp, tr)) || rp, x, y);\n    };\n\n    /*\\\n     * Element.getBBox\n     [ method ]\n     **\n     * Return bounding box for a given element\n     **\n     > Parameters\n     **\n     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.\n     = (object) Bounding box object:\n     o {\n     o     x: (number) top left corner x\n     o     y: (number) top left corner y\n     o     x2: (number) bottom right corner x\n     o     y2: (number) bottom right corner y\n     o     width: (number) width\n     o     height: (number) height\n     o }\n    \\*/\n    elproto.getBBox = function(isWithoutTransform) {\n        if (this.removed) {\n            return {};\n        }\n        var _ = this._;\n        if (isWithoutTransform) {\n            if (_.dirty || !_.bboxwt) {\n                this.realPath = getPath[this.type](this);\n                _.bboxwt = pathDimensions(this.realPath);\n                _.bboxwt.toString = x_y_w_h;\n                _.dirty = 0;\n            }\n            return _.bboxwt;\n        }\n        if (_.dirty || _.dirtyT || !_.bbox) {\n            if (_.dirty || !this.realPath) {\n                _.bboxwt = 0;\n                this.realPath = getPath[this.type](this);\n            }\n            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));\n            _.bbox.toString = x_y_w_h;\n            _.dirty = _.dirtyT = 0;\n        }\n        return _.bbox;\n    };\n\n    /*\\\n     * Element.clone\n     [ method ]\n     **\n     = (object) clone of a given element\n     **\n    \\*/\n    elproto.clone = function() {\n        if (this.removed) {\n            return null;\n        }\n        var o = this,\n            out = o.paper[o.type]().attr(o.attr());\n        o.__set__ && o.__set__.push(out);\n        return out;\n    };\n\n    /*\\\n     * Element.glow\n     [ method ]\n     **\n     * Return set of elements that create glow-like effect around given element. See @Paper.set.\n     *\n     * Note: Glow is not connected to the element. If you change element attributes it won’t adjust itself.\n     **\n     > Parameters\n     **\n     - glow (object) #optional parameters object with all properties optional:\n     o {\n     o     width (number) size of the glow, default is `10`\n     o     fill (boolean) will it be filled, default is `false`\n     o     opacity (number) opacity, default is `0.5`\n     o     offsetx (number) horizontal offset, default is `0`\n     o     offsety (number) vertical offset, default is `0`\n     o     color (string) glow colour, default is `black`\n     o }\n     = (object) @Paper.set of elements that represents glow\n    \\*/\n    elproto.glow = function(glow) {\n        if (this.type == \"text\") {\n            return null;\n        }\n        glow = glow || {};\n        var s = {\n            width: (glow.width || 10) + (+this.attr(\"stroke-width\") || 1),\n            fill: glow.fill || false,\n            opacity: glow.opacity || .5,\n            offsetx: glow.offsetx || 0,\n            offsety: glow.offsety || 0,\n            color: glow.color || \"#000\"\n        },\n        c = s.width / 2,\n        r = this.paper,\n        out = r.set(),\n        path = this.realPath || getPath[this.type](this);\n        path = this.matrix ? mapPath(path, this.matrix) : path;\n        for (var i = 1; i < c + 1; i++) {\n            out.push(r.path(path).attr({\n                stroke: s.color,\n                fill: s.fill ? s.color : \"none\",\n                \"stroke-linejoin\": \"round\",\n                \"stroke-linecap\": \"round\",\n                \"stroke-width\": +(s.width / c * i).toFixed(3),\n                opacity: +(s.opacity / c).toFixed(3)\n            }));\n        }\n        return out.insertBefore(this).translate(s.offsetx, s.offsety);\n    };\n    var curveslengths = {},\n    getPointAtSegmentLength = function(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {\n        if (length == null) {\n            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);\n        } else {\n            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));\n        }\n    },\n    getLengthFactory = function(istotal, subpath) {\n        return function(path, length, onlystart) {\n            path = path2curve(path);\n            var x, y, p, l, sp = \"\", subpaths = {}, point,\n            len = 0;\n            for (var i = 0, ii = path.length; i < ii; i++) {\n                p = path[i];\n                if (p[0] == \"M\") {\n                    x = +p[1];\n                    y = +p[2];\n                } else {\n                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);\n                    if (len + l > length) {\n                        if (subpath && !subpaths.start) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            sp += [\"C\" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];\n                            if (onlystart) {\n                                return sp;\n                            }\n                            subpaths.start = sp;\n                            sp = [\"M\" + point.x, point.y + \"C\" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();\n                            len += l;\n                            x = +p[5];\n                            y = +p[6];\n                            continue;\n                        }\n                        if (!istotal && !subpath) {\n                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);\n                            return {\n                                x: point.x,\n                                y: point.y,\n                                alpha: point.alpha\n                            };\n                        }\n                    }\n                    len += l;\n                    x = +p[5];\n                    y = +p[6];\n                }\n                sp += p.shift() + p;\n            }\n            subpaths.end = sp;\n            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);\n            point.alpha && (point = {\n                x: point.x,\n                y: point.y,\n                alpha: point.alpha\n            });\n            return point;\n        };\n    },\n    getTotalLength = getLengthFactory(1),\n    getPointAtLength = getLengthFactory(),\n    getSubpathsAtLength = getLengthFactory(0, 1);\n\n    R.getTotalLength = getTotalLength;\n\n    R.getPointAtLength = getPointAtLength;\n\n    R.getSubpath = function(path, from, to) {\n        if (this.getTotalLength(path) - to < 1e-6) {\n            return getSubpathsAtLength(path, from).end;\n        }\n        var a = getSubpathsAtLength(path, to, 1);\n        return from ? getSubpathsAtLength(a, from).end : a;\n    };\n\n    /*\\\n     * Raphael.getTotalLength\n     [ method ]\n     **\n     * Returns length of the given path in pixels.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string.\n     **\n     = (number) length.\n    \\*/\n    elproto.getTotalLength = function() {\n        if (this.type != \"path\") {\n            return;\n        }\n        if (this.node.getTotalLength) {\n            return this.node.getTotalLength();\n        }\n        return getTotalLength(this.attrs.path);\n    };\n\n    /*\\\n     * Raphael.getPointAtLength\n     [ method ]\n     **\n     * Return coordinates of the point located at the given length on the given path.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - length (number)\n     **\n     = (object) representation of the point:\n     o {\n     o     x: (number) x coordinate\n     o     y: (number) y coordinate\n     o     alpha: (number) angle of derivative\n     o }\n    \\*/\n    elproto.getPointAtLength = function(length) {\n        if (this.type != \"path\") {\n            return;\n        }\n        return getPointAtLength(this.attrs.path, length);\n    };\n\n    /*\\\n     * Raphael.getSubpath\n     [ method ]\n     **\n     * Return subpath of a given path from given length to given length.\n     **\n     > Parameters\n     **\n     - path (string) SVG path string\n     - from (number) position of the start of the segment\n     - to (number) position of the end of the segment\n     **\n     = (string) pathstring for the segment\n    \\*/\n    elproto.getSubpath = function(from, to) {\n        if (this.type != \"path\") {\n            return;\n        }\n        return R.getSubpath(this.attrs.path, from, to);\n    };\n\n    /*\\\n     * Raphael.easing_formulas\n     [ property ]\n     **\n     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:\n     # <ul>\n     #     <li>“linear”</li>\n     #     <li>“&lt;” or “easeIn” or “ease-in”</li>\n     #     <li>“>” or “easeOut” or “ease-out”</li>\n     #     <li>“&lt;>” or “easeInOut” or “ease-in-out”</li>\n     #     <li>“backIn” or “back-in”</li>\n     #     <li>“backOut” or “back-out”</li>\n     #     <li>“elastic”</li>\n     #     <li>“bounce”</li>\n     # </ul>\n     # <p>See also <a href=\"http://raphaeljs.com/easing.html\">Easing demo</a>.</p>\n    \\*/\n    var ef = R.easing_formulas = {\n        linear: function(n) {\n            return n;\n        },\n        \"<\": function(n) {\n            return pow(n, 1.7);\n        },\n        \">\": function(n) {\n            return pow(n, .48);\n        },\n        \"<>\": function(n) {\n            var q = .48 - n / 1.04,\n            Q = mathSqrt(.1734 + q * q),\n            x = Q - q,\n            X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),\n            y = -Q - q,\n            Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),\n            t = X + Y + .5;\n            return (1 - t) * 3 * t * t + t * t * t;\n        },\n        backIn: function(n) {\n            var s = 1.70158;\n            return n * n * ((s + 1) * n - s);\n        },\n        backOut: function(n) {\n            n = n - 1;\n            var s = 1.70158;\n            return n * n * ((s + 1) * n + s) + 1;\n        },\n        elastic: function(n) {\n            if (n == !!n) {\n                return n;\n            }\n            return pow(2, -10 * n) * mathSin((n - .075) * (2 * PI) / .3) + 1;\n        },\n        bounce: function(n) {\n            var s = 7.5625,\n            p = 2.75,\n            l;\n            if (n < (1 / p)) {\n                l = s * n * n;\n            } else {\n                if (n < (2 / p)) {\n                    n -= (1.5 / p);\n                    l = s * n * n + .75;\n                } else {\n                    if (n < (2.5 / p)) {\n                        n -= (2.25 / p);\n                        l = s * n * n + .9375;\n                    } else {\n                        n -= (2.625 / p);\n                        l = s * n * n + .984375;\n                    }\n                }\n            }\n            return l;\n        },\n        // used in line chart anchor animation\n        oneBounceOut: function (n) {\n            var top = 120;\n            if (n <= 0.9) {\n                return ef.easeIn(n) * 1.33;\n            }\n            return 1.2 - n / 5;\n        },\n        // Used in translating bubble plots\n        elasticOnce: function(n) {\n            var p = 0.9;\n            if (n == !!n) {\n                return n;\n            }\n            return Math.pow(2, -10 * n) * Math.sin((n - p / 4) * (2 * Math.PI) / p) + 1;\n        },\n        // accelerating from zero velocity\n        easeInQuad: function (t) { return t*t },\n        // decelerating to zero velocity\n        easeOutQuad: function (t) { return t*(2-t) },\n        // acceleration until halfway, then deceleration\n        easeInOutQuad: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n        // accelerating from zero velocity\n        easeInCubic: function (t) { return t*t*t },\n        // decelerating to zero velocity\n        easeOutCubic: function (t) { return (--t)*t*t+1 },\n        // acceleration until halfway, then deceleration\n        easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n        // accelerating from zero velocity\n        easeInQuart: function (t) { return t*t*t*t },\n        // decelerating to zero velocity\n        easeOutQuart: function (t) { return 1-(--t)*t*t*t },\n        // acceleration until halfway, then deceleration\n        easeInOutQuart: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n        // accelerating from zero velocity\n        easeInQuint: function (t) { return t*t*t*t*t },\n        // decelerating to zero velocity\n        easeOutQuint: function (t) { return 1+(--t)*t*t*t*t },\n        // acceleration until halfway, then deceleration\n        easeInOutQuint: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\n    };\n    ef.easeIn = ef[\"ease-in\"] = ef[\"<\"];\n    ef.easeOut = ef[\"ease-out\"] = ef[\">\"];\n    ef.easeInOut = ef[\"ease-in-out\"] = ef[\"<>\"];\n    ef[\"back-in\"] = ef.backIn;\n    ef[\"back-out\"] = ef.backOut;\n\n    var animationElements = [],\n    requestAnimFrame,\n    // This a temporary fix so that animation can be handled from the scheduler module.\n    animation = function() {\n        var Now = +new Date,\n            l = 0,\n            deqArr = [],\n            i = 0,\n            ll = 0,\n            tmpOpacity,\n            radial,\n            animFrameFn;\n\n        for (; l < animationElements.length; l++) {\n            var e = animationElements[l];\n            if (e.el.removed || e.paused || e.parentEl && e.parentEl.e && e.parentEl.e.paused) {\n                continue;\n            }\n            var time = Now - e.start,\n            ms = e.ms,\n            easing = e.easing,\n            from = e.from,\n            diff = e.diff,\n            to = e.to,\n            t = e.t,\n            that = e.el,\n            set = {},\n            now,\n            origms,\n            init = {},\n            executeEvent = R.stopEvent !== false,\n            key,\n            i = 0,\n            peekVal = e.el && e.el.animElements &&\n                e.el.animElements.peek();\n            // Checking hooks\n            while (peekVal && peekVal.pos <= time / ms) {\n                deqArr.push(e.el.animElements.deq());\n                peekVal = e.el.animElements.peek();\n            }\n            if (e.initstatus) {\n                time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;\n                e.status = e.initstatus;\n                delete e.initstatus;\n                if (e.stop) {\n                    delete e.el;\n                    animationElements.splice(l--, 1);\n                }\n            } else {\n                e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;\n            }\n            origms = ms;\n            // If has parentEl\n            if (e.parentEl && e.parentEl.animElements) {\n                ms = e.delayend - e.delaystart;\n                time = e.parentEl.cPos - e.delaystart;\n            } else if (e.el.animElements) {\n                e.el.cPos = time / ms;\n            }\n            if (time < 0) {\n                continue;\n            }\n            if (time < ms) {\n                var pos = easing(time / ms);\n                ms = origms;\n                for (var attr in from)\n                    if (from[has](attr)) {\n                        switch (availableAnimAttrs[attr]) {\n                            case nu:\n                                now = +from[attr] + pos * ms * diff[attr];\n                                break;\n                            case \"colour\":\n                                    if (!diff[attr].length) {\n                                        tmpOpacity = (from[attr].opacity + pos * ms * diff[attr].opacity);\n                                        if(isNaN(tmpOpacity)){\n                                            tmpOpacity = 1;\n                                        }\n                                        now = \"rgba(\" + [\n                                            upto255(round(from[attr].r + pos * ms * diff[attr].r)),\n                                            upto255(round(from[attr].g + pos * ms * diff[attr].g)),\n                                            upto255(round(from[attr].b + pos * ms * diff[attr].b)),\n                                            tmpOpacity\n                                        ].join(\",\") + \")\";\n                                    } else {\n                                        now = [];\n                                        for (i = 0, ii = from[attr].length; i < ii; ++i) {\n                                            if (i === 0) {\n                                                if(from[attr].isRadial || diff[attr].isRadial){\n                                                    radial = \"xr(\";\n                                                    radial += from[attr][0].f1 * (1 - pos) + diff[attr][0].f1 * pos || '';\n                                                    radial += ',';\n                                                    radial += from[attr][0].f2 * (1 - pos) + diff[attr][0].f2 * pos || '';\n                                                    radial += ',';\n                                                    radial += (from[attr][0].f3 * (1 - pos) + diff[attr][0].f3 * pos) * 100 || '';\n                                                    radial += '%,';\n                                                    radial += from[attr][0].f4 * (1 - pos) + diff[attr][0].f4 * pos || '';\n                                                    radial += ',';\n                                                    radial += from[attr][0].f5 * (1 - pos) + diff[attr][0].f5 * pos;\n                                                    radial += ',';\n                                                    radial += from[attr][0].f6;\n                                                    radial += ')';\n                                                    now.push(radial)\n                                                } else {\n                                                    now.push((from[attr][i] * (1 - pos)) + (pos * diff[attr][i]));\n                                                    if (now[0] <= 0) {\n                                                        now[0] += 360;\n                                                    }\n                                                }\n                                            } else {\n                                                now.push(\"rgba(\" + [\n                                                    upto255(round(from[attr][i].r + pos * ms * diff[attr][i].r)),\n                                                    upto255(round(from[attr][i].g + pos * ms * diff[attr][i].g)),\n                                                    upto255(round(from[attr][i].b + pos * ms * diff[attr][i].b)),\n                                                    (from[attr][i].opacity + pos * ms * diff[attr][i].opacity)\n                                                ].join(\",\") + \"):\" + from[attr][i].position);\n                                            }\n                                        }\n                                        now = now.join(\"-\");\n                                        // If radial focus doesnt have a separator\n                                        if(from[attr].isRadial || diff[attr].isRadial){\n                                            now = now.replace('-', '');\n                                        }\n                                    }\n                                    break;\n                                case \"path\":\n                                    now = [];\n                                    for (var i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        var jj;\n                                        jj = from[attr][i] ? from[attr][i].length : 0;\n                                        for (var j = 1  ; j < jj; j++) {\n                                            now[i][j] = (+from[attr][i][j] + pos * ms * diff[attr][i][j]).toFixed(4);\n                                        }\n                                        now[i] = now[i].join(S);\n                                    }\n                                    now = now.join(S);\n                                    break;\n                                case \"transform\":\n                                if (diff[attr].real) {\n                                    now = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        now[i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];\n                                        }\n                                    }\n                                } else {\n                                    var get = function(i) {\n                                        return +from[attr][i] + pos * ms * diff[attr][i];\n                                    };\n                                    // now = [[\"r\", get(2), 0, 0], [\"t\", get(3), get(4)], [\"s\", get(0), get(1), 0, 0]];\n                                    now = [[\"m\", get(0), get(1), get(2), get(3), get(4), get(5)]];\n                                }\n                                break;\n                            case \"csv\":\n                                if (attr == \"clip-rect\") {\n                                    now = [];\n                                    i = 4;\n                                    while (i--) {\n                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];\n                                    }\n                                }\n                                break;\n                            default:\n                                var from2 = [][concat](from[attr]);\n                                now = [];\n                                i = that.ca[attr].length;\n                                while (i--) {\n                                    now[i] = +from2[i] + pos * ms * diff[attr][i];\n                                }\n                                break;\n                        }\n                        set[attr] = now;\n                    }\n                that.attr(set);\n                if (executeEvent) {\n                    (function(id, that, anim) {\n                        setTimeout(function() {\n                            eve(\"raphael.anim.frame.\" + id, that, anim);\n                        });\n                    })(that.id, that, e.anim);\n                }\n            } else {\n                (function(f, el, a) {\n                    setTimeout(function() {\n                        executeEvent && eve(\"raphael.anim.frame.\" + el.id, el, a);\n                        executeEvent && eve(\"raphael.anim.finish.\" + el.id, el, a);\n                        R.is(f, \"function\") && f.call(el);\n                    });\n                })(e.callback, that, e.anim);\n\n                that.attr(to);\n                delete e.el;\n                animationElements.splice(l--, 1);\n                if (e.repeat > 1 && !e.next) {\n                    for (key in to)\n                        if (to[has](key)) {\n                            init[key] = e.totalOrigin[key];\n                        }\n                    e.el.attr(init);\n                    runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);\n                }\n                if (e.next && !e.stop) {\n                    runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);\n                }\n            }\n        }\n        R.svg && that && that.paper && that.paper.safari();\n\n         // Starting animation on timer 0\n        for (l = 0, ll = deqArr.length; l < ll; ++l) {\n            // lib.schedular.addJob((function (l) {\n            //     return function ()  {\n            //         runAnimation.apply(null, deqArr[l].params);\n            //     };\n            // })(l), lib.priorityList.instant);\n            animFrameFn = R.getInstantAnimFrameFn();\n            animFrameFn((function (l) {\n                return function ()  {\n                    runAnimation.apply(null, deqArr[l].params);\n                };\n            })(l));\n        }\n\n        animationElements.length && (requestAnimFrame || R.getAnimFrameFn())(animation);\n    },\n    upto255 = function(color) {\n        return color > 255 ? 255 : color < 0 ? 0 : color;\n    },\n    checkPercentage = function (num) {\n        num > 1 && (num = 1);\n        num < 0 && (num = 0);\n        return num;\n    };\n\n    R.getAnimFrameFn = function () {\n        return requestAnimFrame = R.requestAnimFrame ||\n        _win.webkitRequestAnimationFrame ||\n        _win.mozRequestAnimationFrame ||\n        _win.oRequestAnimationFrame ||\n        _win.msRequestAnimationFrame ||\n        function(callback) {\n            setTimeout(callback, 16);\n        };\n    };\n\n    R.getInstantAnimFrameFn = function () {\n        return R.instantRequestAnimFrame ||\n        _win.webkitRequestAnimationFrame ||\n        _win.mozRequestAnimationFrame ||\n        _win.oRequestAnimationFrame ||\n        _win.msRequestAnimationFrame ||\n        function(callback) {\n            setTimeout(callback, 16);\n        };\n    };\n\n    /*\\\n     * Element.animateWith\n     [ method ]\n     **\n     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.\n     **\n     > Parameters\n     **\n     - el (object) element to sync with\n     - anim (object) animation to sync with\n     - params (object) #optional final attributes for the element, see also @Element.attr\n     - ms (number) #optional number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     - configObject (object) #optional takes an object with optional properties like\n        start(what percentage to start aniation), end(what percentage to end animation), hookFn(function\n        to be called before applying animation), smartMorph(whether to use smartMorphing in path animation)\n     * or\n     - element (object) element to sync with\n     - anim (object) animation to sync with\n     - animation (object) #optional animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animateWith = function(el, anim, params, ms, easing, callback, configObject) {\n        var element = this,\n            refOb = {},\n            key;\n        // Copying the reference object\n        configObject = configObject || {};\n        for (key in configObject) {\n            if (configObject.hasOwnProperty(key)) {\n                refOb[key] = configObject[key];\n            }\n        }\n        configObject = refOb;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        if (ms == 0) {\n            if (R.is(callback, \"function\")) {\n                setTimeout(function () {\n                    callback.call(element);\n                }, 0);\n            }\n            return element.attr (params);\n        }\n        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),\n        x, y;\n\n        configObject.start = checkPercentage(configObject.start || 0);\n        configObject.end = checkPercentage(configObject.end || 1);\n        if (configObject.start >= configObject.end){\n            configObject.start = configObject.end;\n        }\n\n        if (!configObject.from && configObject.start > 0.01) {\n            // Initializing new Priority Queue if not present already\n            el.animElements = el.animElements || new PriorityQueue(function comparator (a, b) {\n                return b.pos - a.pos;\n            });\n            el.animElements.enq({\n                pos: configObject.start,\n                attr: configObject.start === configObject.end,\n                params: [a, element, a.percents[0], null, element.attr(),undefined, el, {\n                    start: configObject.start,\n                    end: configObject.end,\n                    smartMorph: configObject.smartMorph,\n                    hookFn: configObject.hookFn\n                }, params],\n                executeOb: {\n                    el: this,\n                    attrs: params,\n                    callback: callback,\n                    hookFn: configObject.hookFn\n                }\n            });\n        } else {\n            runAnimation(a, element, a.percents[0], null, element.attr(),undefined, el, configObject);\n        }\n        for (var i = 0, ii = animationElements.length; i < ii; i++) {\n            if (animationElements[i].anim == anim && animationElements[i].el == el) {\n                animationElements[ii - 1].start = animationElements[i].start;\n                break;\n            }\n        }\n        return element;\n    // var a = params ? R.animation(params, ms, easing, callback) : anim,\n    //     status = element.status(anim);\n    // return this.animate(a).status(a, status * anim.ms / a.ms);\n    };\n    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {\n        var cx = 3 * p1x,\n        bx = 3 * (p2x - p1x) - cx,\n        ax = 1 - cx - bx,\n        cy = 3 * p1y,\n        by = 3 * (p2y - p1y) - cy,\n        ay = 1 - cy - by;\n        function sampleCurveX(t) {\n            return ((ax * t + bx) * t + cx) * t;\n        }\n        function solve(x, epsilon) {\n            var t = solveCurveX(x, epsilon);\n            return ((ay * t + by) * t + cy) * t;\n        }\n        function solveCurveX(x, epsilon) {\n            var t0, t1, t2, x2, d2, i;\n            for (t2 = x, i = 0; i < 8; i++) {\n                x2 = sampleCurveX(t2) - x;\n                if (abs(x2) < epsilon) {\n                    return t2;\n                }\n                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;\n                if (abs(d2) < 1e-6) {\n                    break;\n                }\n                t2 = t2 - x2 / d2;\n            }\n            t0 = 0;\n            t1 = 1;\n            t2 = x;\n            if (t2 < t0) {\n                return t0;\n            }\n            if (t2 > t1) {\n                return t1;\n            }\n            while (t0 < t1) {\n                x2 = sampleCurveX(t2);\n                if (abs(x2 - x) < epsilon) {\n                    return t2;\n                }\n                if (x > x2) {\n                    t0 = t2;\n                } else {\n                    t1 = t2;\n                }\n                t2 = (t1 - t0) / 2 + t0;\n            }\n            return t2;\n        }\n        return solve(t, 1 / (200 * duration));\n    }\n    elproto.onAnimation = function(f) {\n        f ? eve.on(\"raphael.anim.frame.\" + this.id, f) : eve.unbind(\"raphael.anim.frame.\" + this.id);\n        return this;\n    };\n    function Animation(anim, ms) {\n        var percents = [],\n        newAnim = {};\n        this.ms = ms;\n        this.times = 1;\n        if (anim) {\n            for (var attr in anim)\n                if (anim[has](attr)) {\n                    newAnim[toFloat(attr)] = anim[attr];\n                    percents.push(toFloat(attr));\n                }\n            percents.sort(sortByNumber);\n        }\n        this.anim = newAnim;\n        this.top = percents[percents.length - 1];\n        this.percents = percents;\n    }\n\n    /*\\\n     * Animation.delay\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given delay.\n     **\n     > Parameters\n     **\n     - delay (number) number of ms to pass between animation start and actual animation\n     **\n     = (object) new altered Animation object\n     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);\n     | circle1.animate(anim); // run the given animation immediately\n     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms\n    \\*/\n    Animation.prototype.delay = function(delay) {\n        var a = new Animation(this.anim, this.ms);\n        a.times = this.times;\n        a.del = +delay || 0;\n        return a;\n    };\n\n    /*\\\n     * Animation.repeat\n     [ method ]\n     **\n     * Creates a copy of existing animation object with given repetition.\n     **\n     > Parameters\n     **\n     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`\n     **\n     = (object) new altered Animation object\n    \\*/\n    Animation.prototype.repeat = function(times) {\n        var a = new Animation(this.anim, this.ms);\n        a.del = this.del;\n        a.times = math.floor(mmax(times, 0)) || 1;\n        return a;\n    };\n\n    /*\n    ** Function to convert two color string in array format such that\n    ** it is animatabale\n    ** @param {string} c1 color 1\n    ** @param {string} c2 color 2\n    ** @param {function} function to getRGB\n    */\n    function colorNormalizer(c1, c2, getRGB) {\n        \"use strict\";\n        var colorAr1 = c1.split('-'),\n            colorAr2 = c2.split('-'),\n            i = 0,\n            ii = 0,\n            j = 0,\n            newColArr = [],\n            newColArr2 = [],\n            temp = {},\n            pos = 0,\n            uniqArr = [];\n        if (colorAr1.length === 1 && colorAr2.length === 1) {\n            return [c1, c2];\n        }\n        // Convert colors to linear format, and mark if any of them is radial\n        // linear to radial animation is not correct\n        colorAr1 = allToLinear(colorAr1);\n        colorAr2 = allToLinear(colorAr2);\n\n        // Handling if default color was added to one\n        // and not other\n        if (!colorAr1.defaultAngleSet && colorAr2.defaultAngleSet) {\n            colorAr2[0] = colorAr1[0];\n        }\n\n        if (!colorAr2.defaultAngleSet && colorAr1.defaultAngleSet) {\n            colorAr1[0] = colorAr2[0];\n        }\n\n        // If one is radial convert both to radial\n        converToRadialIfOneRadial(colorAr1, colorAr2);\n        /* Making a unique array to store all unique\n            color positions of both color so that new color\n            can be generated that have same amount of positions\n            added */\n        for(i = 1, ii = colorAr1.length; i < ii; ++i){\n            pos = colorAr1[i].position;\n            // if(uniqArr.indexOf(pos) === -1){\n                uniqArr.push(pos);\n            // }\n        }\n        for(i = 1, ii = colorAr2.length; i < ii; ++i){\n            pos = colorAr2[i].position;\n            if(uniqArr.indexOf(pos) === -1){\n                uniqArr.push(pos);\n            }\n        }\n        uniqArr.push(0);\n        // sort the positions\n        uniqArr.sort(function(a,b){return a - b});\n        // generating new colors from the existing colors\n        newColArr = [colorAr1[0]];\n        for (i = 1, ii = uniqArr.length; i < ii; ++i) {\n            pos = uniqArr[i];\n            temp = colorAr1.getColorAtPosition(pos);\n            newColArr.push(temp);\n        }\n        newColArr2 = [colorAr2[0]];\n        for (i = 1, ii = uniqArr.length; i < ii; ++i) {\n            pos = uniqArr[i];\n            temp = colorAr2.getColorAtPosition(pos);\n            newColArr2.push(temp);\n        }\n\n        // copying isRadial property\n        newColArr.isRadial = colorAr1.isRadial;\n        newColArr2.isRadial = colorAr2.isRadial;\n        return [newColArr, newColArr2];\n        // Getting all unique points\n\n        function converToRadialIfOneRadial(a, b, end){\n            var angle = 0;\n            if(a.isRadial && !b.isRadial){\n                angle += +b[0];\n                b[0] = {\n                    f1: 0,\n                    f2: 0,\n                    f3: 0,\n                    f4: 0,\n                    f5: 0,\n                    f6: ''\n                }\n                b.isRadial = true;\n            }\n\n            if(!end){\n                converToRadialIfOneRadial(b, a, true);\n            }\n        }\n        // Function to convert color to array in linear format\n        // and mark if any one of them is radial\n        function allToLinear(arr) {\n            var i = 0,\n                ii = 0,\n                j = 0,\n                item = {},\n                temp = [],\n                temp2 = {},\n                key,\n                prevVal = 0,\n                lastVal = 0,\n                counter = 0,\n                rPos = 0,\n                openBrPos = 0,\n                closedBrPos = 0,\n                radial = {\n                    f1 : 0.5,\n                    f2 : 0.5\n                };\n\n            // Solid color operation\n            if (arr.length === 1) {\n                if(arr[0] === \"none\"){\n                    arr[0] = \"rgba(0,0,0,0)\";\n                }\n                // Push angle zero to start\n                arr.unshift(0);\n                // Mentioning that a default angle was added\n                arr.defaultAngleSet = true;\n            }\n\n            // Convert angle to number\n            if (isNaN(arr[0])) {\n                // Check if is radial\n                if(~\"rx\".indexOf(arr[0].charAt(0))){\n                    arr.isRadial = true;\n\n                    rPos = 1;\n                    // check if focus if provided\n                    // otherwise use default focus\n                    if(arr[0].indexOf(')') !== -1){\n                        rPos = arr[0].indexOf(')');\n                        openBrPos = arr[0].indexOf('(') + 1;\n                        closedBrPos = rPos;\n                        temp = arr[0].substr(openBrPos, closedBrPos - openBrPos).split(',');\n                        radial.f1 = parseFloat(temp[0]) || 0;\n                        radial.f2 = parseFloat(temp[1]) || 0;\n                        if (~temp[2].indexOf('%')) {\n                            temp[2] = parseFloat(temp[2]) / 100;\n                        }\n                        radial.f3 = parseFloat(temp[2]) || 0;\n                        radial.f4 = parseFloat(temp[3]) || 0;\n                        radial.f5 = parseFloat(temp[4]) || 0;\n                        radial.f6 = temp[5];\n                    }\n                    arr[0] = arr[0].substr(closedBrPos + 1);\n                    arr.unshift(radial);\n\n                } else {\n                    arr[0] = 0;\n                }\n            } else {\n                arr[0] = +arr[0];\n            }\n\n            for (i = 1, ii = arr.length; i < ii; ++i) {\n                temp = arr[i].split(\":\");\n                // conver first element to rgb object and store\n                temp2 = getRGB(temp[0]);\n                arr[i] = {};\n                arr[i].r = temp2.r;\n                arr[i].g = temp2.g;\n                arr[i].b = temp2.b;\n                arr[i].opacity = temp2.opacity;\n                // if opacity not present set  to 1\n                arr[i].opacity = +arr[i].opacity;\n                if (isNaN(arr[i].opacity)) {\n                    arr[i].opacity = 1;\n                }\n                // set the position\n                arr[i].position = +temp[1];\n            }\n\n            // Sorting array according to position\n            // angle and radial focus should be elemnt 0\n            arr.sort(function(a, b) {\n                if (typeof a === \"number\" || a.f1) {\n                    return -1;\n                }\n                if (typeof b === \"number\" || a.f2) {\n                    return 1;\n                }\n                if (isNaN(a.position) && isNaN(b.position)) {\n                    return 0;\n                }\n                if (isNaN(a.position)) {\n                    return -1;\n                }\n                if (isNaN(b.position)) {\n                    return 1;\n                }\n                return a.position - b.position;\n            });\n\n            // If first position is not zero\n            // add new color with position zero\n            if (+arr[1].position !== 0) {\n                if (isNaN(arr[1].position)) {\n                    arr[1].position = 0;\n                } else {\n                    temp2 = {};\n                    for (key in arr[1]) {\n                        temp2[key] = arr[1][key];\n                    }\n                    temp2.position = 0;\n                    // Shifting array to add current object\n                    // in position 1\n                    arr.push({});\n                    for (i = arr.length - 1; i !== 1; --i) {\n                        arr[i] = arr[i - 1];\n                    }\n                    arr[1] = temp2;\n                }\n            }\n            // index to last position\n            ii = arr.length - 1;\n            // If last position is not 100\n            // add new color with position 100\n            if (arr[ii].position !== 100) {\n                if (isNaN(arr[ii].position)) {\n                    arr[ii].position = 100;\n                } else {\n                    temp2 = {};\n                    for (key in arr[ii]) {\n                        temp2[key] = arr[ii][key];\n                    }\n                    temp2.position = 100;\n                    // Shifting array to add current object\n                    // in position 1\n                    arr.push(temp2);\n                }\n            }\n\n            // Filling correct position value whereever NaN found\n            for (i = 2, ii = arr.length; i < ii; ++i) {\n                if (!(arr[i].position)) {\n                    prevVal = arr[i - 1].position;\n                    counter = 1;\n                    for (j = i + 1; j < ii; ++j) {\n                        ++counter;\n                        if (!isNaN(arr[j].position)) {\n                            lastVal = +arr[j].position;\n                            break;\n                        }\n                    }\n                    arr[i].position = prevVal + ((lastVal - prevVal) / counter);\n                }\n            }\n\n            arr.getColorAtPosition = function(pos) {\n                var prevPos = -1,\n                    nextPos = this.length,\n                    i = 1,\n                    ii = this.length,\n                    item = {},\n                    colPrev,\n                    colNext,\n                    ratio = 0,\n                    key = \"\",\n                    col = { r: 0, g: 0, b: 0 };\n\n                // Critical section; check again\n                for (; i < ii - 1; ++i) {\n                    if (this[i].position <= pos) {\n                        prevPos = i;\n                        nextPos = i + 1;\n                    }\n                    if (!(this[i].position < pos) && this[i].position >= pos) {\n                        nextPos = i;\n                        break;\n                    }\n                }\n                ratio = (pos - this[prevPos].position) / (this[nextPos].position - this[prevPos].position);\n                if (isNaN(ratio)) {\n                    ratio = 0;\n                }\n                for (key in col) {\n                    col[key] = upto255((1 - ratio) * this[prevPos][key] + ratio * this[nextPos][key]);\n                }\n                col.position = pos;\n                col.opacity = (1 - ratio) * this[prevPos][\"opacity\"] + ratio * this[nextPos][\"opacity\"];\n                return col;\n            }\n            return arr;\n        }\n    }\n    /**\n     * Function to make to uncommon path array to a equal length\n     * of path array and same type (L - lineto) to make it animatable\n     * @param {array} path array 1\n     * @param {array} path array 2\n     * @return {object} object containing final 'from' and 'to' path\n     */\n    function pathNormalizer(p1, p2) {\n        'use strict';\n        // Function to convert array to svg path (?) only for curves\n        var finalp1 = [],\n            finalp2 = [],\n            pathArr1 = toSvgPath(p1),\n            pathArr2 = toSvgPath(p2),\n            i = 0,\n            ii = 0,\n            temp,\n            createElementNS = document.createElementNS && document.createElementNS.bind(document),\n            dPath = createElementNS && createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n        // If path invalid or svg not supported return\n        if (!pathArr1 || !pathArr2 || !dPath) {\n            return [p1, p2];\n        }\n        if (canFallback(p1, p2)) {\n            return [p1, p2];\n        }\n        // If any of the parameters is\n        // absent return to normal flow\n        if (!p1 || !p2) {\n            return [p1, p2];\n        }\n        // If svg not available return to normal flow\n        if (!document.createElementNS) {\n            return [p1, p2];\n        }\n        // Setting path again\n        pathArr1 = toSvgPath(p1);\n        pathArr2 = toSvgPath(p2);\n        // If invalid path return the original path\n        if(pathArr1.join().indexOf('undefined') !== -1) {\n            return [p1, p2];\n        }\n        if(pathArr2.join().indexOf('undefined') !== -1) {\n            return [p1, p2];\n        }\n        // If svg functions not available return to normal flow\n        if (!dPath.getTotalLength || !dPath.getPointAtLength) {\n            return [p1, p2];\n        }\n        /* Function to check if the current environment\n        ** can animate the path, as pathNormalizer pauses\n        ** getTotalLength and getPointAtLength function of svg\n        ** which are not supported by all browsers\n        */\n        function canFallback (path1, path2) {\n            var str1 = '',\n                str2 = '',\n                testLen,\n                testPoint;\n            // Checking path totoalLength is accurate or not\n            // testing with a known path\n            // this check is for Firefox\n            dPath.setAttribute('d', 'M300 10 L300 300 C50 310,50 640,350 650' +\n                'C600 640,600 310,400 300 L400 10 L295 10');\n            testLen = dPath.getTotalLength();\n            testPoint = dPath.getPointAtLength(10);\n            if (testLen < 1829.1 || testLen > 1829.2) {\n                return true;\n            }\n            if (Math.round(testPoint.x) !== 300 || Math.round(testPoint.y) !== 20) {\n                return true;\n            }\n            // path1 and path2 are in array\n            function trimPathArray (arr) {\n                var i = arr.length;\n                while (i-- - 1) {\n                    if (arr[i].join('') === arr[i - 1].join('')) {\n                        arr.pop();\n                    } else {\n                        break;\n                    }\n                }\n            }\n            function getPathFromArray(arr) {\n                var str = '',\n                    i = 0,\n                    ii = arr.length;\n                for (; i < ii; ++i) {\n                    str += arr[i].join(' ');\n                }\n                return str;\n            }\n            trimPathArray(path1);\n            trimPathArray(path2);\n            str1 = getPathFromArray(path1);\n            str2 = getPathFromArray(path2);\n            if (str1.split(/[Mm]/).length > 2 || str2.split(/[Mm]/).length > 2) {\n                return false;\n            }\n            if (path1.length === path2.length) {\n                return true;\n            }\n            return false;\n        }\n        /* Convert svg path array to string,\n            Also removes repeated commands */\n        function toSvgPath(arr) {\n            var str = [],\n                i = 0,\n                ii = arr.length,\n                item = [];\n            if (typeof arr === 'string') {\n                return arr;\n            }\n            // Converting the array to string; path type\n            for (i = 0; i < ii; ++i) {\n                if (!arr[i].join){\n                    return;\n                } else {\n                    // Removing continuous Move commands\n                    // Picking up the last one\n                    if ( !i || !arr[i + 1] || arr[i + 1][0] !== 'M' || arr[i][0] !== 'M'){\n                        str.push(arr[i].join(' '));\n                    }\n                }\n            }\n            str = str.join('');\n            str = str.split(/[Mm]/).slice(1);\n            for (i = 0, ii = str.length; i < ii; ++i) {\n                str[i] = 'M' + str[i];\n            }\n            return str;\n        }\n\n        ii = Math.max(pathArr1.length, pathArr2.length);\n        for (i = 0; i < ii; ++i) {\n            temp = _pathNormalizer(pathArr1[i], pathArr2[i]);\n            pathArr1[i] = temp[0];\n            pathArr2[i] = temp[1];\n        }\n        // Convert line path 2 dimensional array to string\n        function linetopath (arr) {\n            var i = 0,\n                ii = 0,\n                str = [];\n            arr = arr || [];\n            ii = arr.length;\n            for (i = 0; i < ii; ++i) {\n                if (arr[i].length - 1) {\n                    str.push(arr[i].join(' '));\n                }\n            }\n            return str.join('');\n        }\n        /* path2curve appends repeated last path command,\n            this function removes it or any other repeated path command */\n        function removeBlanks (arr, pos) {\n            var i = arr.length,\n                j = 0,\n                path;\n            while (i-- - 1) {\n                // Pop if length is zero\n                if (arr[i].slice(1).toString() === arr[i - 1].slice(1).toString()) {\n                    arr.pop();\n                } else {\n                    break;\n                }\n            }\n            if (arr.length === 1 && pos){\n                arr.length = 0;\n            }\n        }\n        /* Divide a path array to number to a given number of times\n            as provided in parameters, All path array should start with M command */\n        function _divide(arr, times) {\n            var resArr = [],\n                locArr = [],\n                arrLen = arr.length,\n                i = 0,\n                ii = 0,\n                x = 0,\n                prevPos = 0,\n                y = 0,\n                // If array size is smaller than\n                // divisions needed\n                diffTimes = times - arrLen;\n            while (diffTimes >= 0) {\n                i = arr.length - 1;\n                arr.push(arr.slice(i)[0]);\n                --diffTimes;\n            }\n            arrLen = arr.length;\n            for (i = 0; i <= times; ++i) {\n                locArr.push(Math.round((i / times) * arrLen));\n            }\n            for (i = 0, ii = locArr.length - 1; i < ii; ++i) {\n                resArr.push(arr.slice(locArr[i], locArr[i + 1]));\n                if (resArr[i][0][0] !== 'M' && resArr[i][0][0] !== 'm') {\n                    prevPos = resArr[i - 1].length - 1;\n                    x = resArr[i - 1][prevPos][1];\n                    y = resArr[i - 1][prevPos][2];\n                    resArr[i].unshift(['M', x, y]);\n                }\n            }\n            return resArr;\n        }\n        /* If two path array have different number of MoveTo commands,\n            divide the smaller number of MoveTo command holder to match the other one */\n        function divideArray (diff) {\n            var arrToDivide = [],\n                countArr = [],\n                transArr = [],\n                i = 0,\n                ii = 0,\n                isArr1 = true;\n            if (diff === 0) {\n                return;\n            } else if (diff > 0) {\n                arrToDivide = pathArr2;\n                isArr1 = false;\n            } else {\n                diff = -diff;\n                arrToDivide = pathArr1;\n            }\n            // Maintaining a count array to judge number of times a1\n            // path needs to be divided, 1 means dont divide\n            for (i = 0, ii = arrToDivide.length; i < ii; ++i) {\n                countArr.push(1);\n            }\n            while (diff--) {\n                --i;\n                if (i < 0) {\n                    i = ii - 1;\n                }\n                countArr[i]++;\n            }\n\n            for (i = 0; i < ii; ++i){\n                if (countArr[i] === 1) {\n                    transArr.push(arrToDivide[i]);\n                } else {\n                    transArr.push.apply(transArr, _divide(arrToDivide[i], countArr[i]));\n                }\n            }\n            if (isArr1) {\n                pathArr1 = transArr;\n            } else {\n                pathArr2 = transArr;\n            }\n        }\n        for (i = pathArr1.length; i--;) {\n            removeBlanks(pathArr1[i], i);\n            // If last element is blank pop it\n            pathArr1[i].length || pathArr1.pop();\n        }\n        for (i = pathArr2.length; i--;) {\n            removeBlanks(pathArr2[i], i);\n            pathArr2[i].length || pathArr2.pop();\n        }\n        // Making number off moveto commands equal in both path\n        divideArray(pathArr1.length - pathArr2.length);\n\n        ii = Math.max(pathArr1.length, pathArr2.length);\n        for (i = 0; i < ii; ++i) {\n            temp = _pathNormalizer(linetopath(pathArr1[i]), linetopath(pathArr2[i]));\n            pathArr1[i] = temp[0];\n            pathArr2[i] = temp[1];\n        }\n\n        for (i = 0, ii = pathArr1.length; i < ii; ++i) {\n            finalp1 = finalp1.concat(pathArr1[i]);\n        }\n        for (i = 0, ii = pathArr2.length; i < ii; ++i) {\n            finalp2 = finalp2.concat(pathArr2[i]);\n        }\n        return [finalp1, finalp2];\n    }\n\n    // A function to calculate common path\n    // in two given paths\n    function commonPathCalculator (p1, p2) {\n        'use strict';\n        var i = 0,\n            j = 0,\n            ii = 0,\n            jj = 0,\n            k = 0,\n            kk = 0,\n            uncommon1 = 0,\n            uncommon2 = 0,\n            lim1 = 0,\n            lim2 = 0,\n            nearestPoint1,\n            nearestPoint2,\n            map1 = {},\n            map2 = {},\n            groupedPath1 = [],\n            groupedPath2 = [],\n            gpIndex1 = -1,\n            gpIndex2 = -1,\n            isSame = true;\n        // Splitting the string commands to get\n        // particular points later\n        // Will be required while breaking paths\n        // into common and uncommon parts\n        function splitter (path) {\n            var i = 0,\n                ii = 0;\n            path = path.split(/[MCLmcl]/).slice(1);\n            for (i = 0, ii = path.length; i < ii; ++i) {\n                path[i] = path[i].split(' ').slice(1);\n                i || path[i].unshift('M');\n                if (i) {\n                    path[i].length === 2 && path[i].unshift('L') || path[i].unshift('C');\n                }\n            }\n            return path;\n        }\n        // populate the arr to object in reverse manner\n        // i.e value to key mapping\n        function mapper (arr, ob) {\n            var i = 0,\n                ii = arr.length,\n                val,\n                item;\n            for (i = 0, ii = arr.length; i < ii; ++i) {\n                val = arr[i].join(' ');\n                item = arr[i];\n                if (item[0] === 'C' && item[3] === item[5] && item[4] === item[6]) {\n                    arr[i].stringValue = ['L', item[3], item[4]].join(' ');\n                } else\n                item.stringValue = val;\n                // Creating an array if undefined\n                // pushing otherwise\n                ob[item.stringValue] && ob[item.stringValue].push(i);\n                ob[item.stringValue] || (ob[item.stringValue] = [i]);\n            }\n        }\n        // Function to get nearest point that exist\n        // in the other array\n        function getNearestExistingPoint (arr, map, start, ii, lim) {\n            var i = start,\n                k = 0,\n                kk = 0,\n                item;\n            for (; i < ii; ++i) {\n                item = map[arr[i].stringValue];\n                if (item) {\n                    for (k = 0, kk = item.length; k < kk; ++k) {\n                        if (item[k] >= lim) {\n                            return {\n                                index : i,\n                                mapValue : item[k],\n                                diff : i - start\n                            };\n                        }\n                    }\n                }\n            }\n            return -1;\n        }\n        // function to get last coordinate for CurveTo command\n        function getCoordinateAsMove (arr) {\n            var last = arr.length - 1;\n            return ['M', arr[last - 1], arr[last]].join(' ');\n        }\n        // function to conver path array to string\n        function pathToString (arr) {\n            return arr.join('');\n        }\n        // commonPathCalculator flow here\n        p1 = splitter(p1);\n        p2 = splitter(p2);\n        mapper(p1, map1);\n        mapper(p2, map2);\n        // Setting length\n        ii = p1.length;\n        jj = p2.length;\n        i = 0;\n        j = 0;\n        // Making partitions for common\n        // and uncommon parts\n        // Checking if first is common or uncommon\n        while (i < ii && j < jj) {\n            ++gpIndex1;\n            ++gpIndex2;\n            // initializing blank arrays\n            groupedPath1[gpIndex1] = [];\n            groupedPath2[gpIndex2] = [];\n            isSame = (p1[i].stringValue === p2[j].stringValue);\n            if (i) {\n                // Logic to push prev coordinate as move command\n                groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n                groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            }\n            if (isSame) {\n                while (i < ii && j < jj && p1[i].stringValue === p2[j].stringValue) {\n                    groupedPath1[gpIndex1].push(p1[i].stringValue);\n                    groupedPath2[gpIndex2].push(p2[j].stringValue);\n                    ++i;\n                    ++j;\n                }\n            } else {\n                nearestPoint1 = getNearestExistingPoint(p1, map2, i, ii, j);\n                nearestPoint2 = getNearestExistingPoint(p2, map1, j, jj, i);\n                // Assuming nearestPoint1 is nearer than nearestPoint2\n                lim1 = nearestPoint1.index;\n                lim2 = nearestPoint1.mapValue;\n                // If nearestPoint2 is nearer\n                if (!~nearestPoint1 || nearestPoint1.diff > nearestPoint2.diff) {\n                    lim1 = nearestPoint2.mapValue;\n                    lim2 = nearestPoint2.index;\n                }\n                if (!~nearestPoint1 && !~nearestPoint2) {\n                   // If both not found include all as uncommon\n                    lim1 = ii - 1;\n                    lim2 = jj - 1;\n                }\n                // Pushing uncommon paths\n                while (i <= lim1) {\n                    groupedPath1[gpIndex1].push(p1[i].stringValue);\n                    ++i;\n                }\n                while (j <= lim2) {\n                    groupedPath2[gpIndex2].push(p2[j].stringValue);\n                    ++j;\n                }\n            }\n            groupedPath1[gpIndex1] = pathToString(groupedPath1[gpIndex1]);\n            groupedPath2[gpIndex2] = pathToString(groupedPath2[gpIndex2]);\n        }\n        // If Any one is left add them all\n        if (i < ii) {\n            ++gpIndex1;\n            groupedPath1[gpIndex1] = [];\n            groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n            ++gpIndex2;\n            groupedPath2[gpIndex2] = [];\n            groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            while(i < ii) {\n                groupedPath1[gpIndex1].push(p1[i].stringValue);\n                ++i;\n            }\n            groupedPath1[gpIndex1] = pathToString(groupedPath1[gpIndex1]);\n        }\n        if (j < jj) {\n            ++gpIndex1;\n            groupedPath1[gpIndex1] = [];\n            groupedPath1[gpIndex1].push(getCoordinateAsMove(p1[i - 1]));\n            ++gpIndex2;\n            groupedPath2[gpIndex2] = [];\n            groupedPath2[gpIndex2].push(getCoordinateAsMove(p2[j - 1]));\n            while(j < jj) {\n                groupedPath2[gpIndex2].push(p2[j].stringValue);\n                ++j;\n            }\n            groupedPath2[gpIndex2] = pathToString(groupedPath2[gpIndex2]);\n        }\n        return [groupedPath1, groupedPath2];\n    }\n\n    // function to get equal points for two different path\n    // We set path to an dynamically created svg path node\n    // and get equal number of path commands from two different\n    // paths. Uses getPointAtLength and getTotalLength of svg that\n    // arent supported on every browser\n    function _pathNormalizer(p1, p2) {\n        'use strict';\n        var i = 0,\n            j = 0,\n            ii = 0,\n            jj = 0,\n            item = {},\n            fPath1 = [],\n            fPath2 = [],\n            divisions = 0,\n            commonPath,\n            tmp;\n        // Uncommon path normalizer\n        function normalizeUncommonPaths (p1, p2) {\n            var dPath1,\n                dPath2,\n                i = 0,\n                j = 0,\n                item = {},\n                pathLen1 = 0,\n                pathLen2 = 0,\n                fPath1 = [],\n                fPath2 = [],\n                divisions = 0,\n                round = Math.round;\n            // Creating path elements to use functions 'getTotalLength'\n            // and 'getPointAtLength'\n            dPath1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            dPath1.setAttribute(\"d\", p1);\n\n            dPath2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            dPath2.setAttribute(\"d\", p2);\n\n            // Getting length of the paths\n            pathLen1 = dPath1.getTotalLength();\n            pathLen2 = dPath2.getTotalLength();\n\n            // Number of divisions will depend on larger path\n            divisions = 0.15 * Math.max(pathLen1, pathLen2);\n            divisions = Math.ceil(divisions);\n\n            if (!divisions || !isFinite(divisions) || divisions < 10) {\n                divisions = 10;\n            }\n\n            for (i = 0; i <= divisions; ++i) {\n                item = dPath1.getPointAtLength((i / divisions) * pathLen1);\n                fPath1.push([i ? \"L\" : \"M\",\n                    round(item.x),\n                    round(item.y)\n                ]);\n                item = dPath2.getPointAtLength((i / divisions) * pathLen2);\n                fPath2.push([i ? \"L\" : \"M\",\n                    round(item.x),\n                    round(item.y)\n                ]);\n            }\n            return [fPath1, fPath2];\n        }\n        if (!p1 || p1 === 'M  ') {\n            p1 = p2.split(' ').slice(0, 3).join(' ').replace(/[LC]/, '');\n        }\n        if (!p2 || p2 === 'M  ') {\n            p2 = p1.split(' ').slice(0, 3).join(' ').replace(/[LC]/, '');\n        }\n        commonPath = commonPathCalculator(p1, p2);\n\n        for (i = 0, ii = commonPath[0].length; i < ii; ++i) {\n            tmp = normalizeUncommonPaths(commonPath[0][i], commonPath[1][i]);\n            if (i) {\n                fPath1 = fPath1.concat(tmp[0].slice(1));\n                fPath2 = fPath2.concat(tmp[1].slice(1));\n            } else {\n                fPath1 = fPath1.concat(tmp[0]);\n                fPath2 = fPath2.concat(tmp[1]);\n            }\n        }\n        return [fPath1, fPath2];\n    }\n\n\n\n    function runAnimation(anim, element, percent, status, totalOrigin, times, parentEl, configObject) {\n        percent = toFloat(percent);\n        var params,\n        isInAnim,\n        isInAnimSet,\n        percents = [],\n        next,\n        prev,\n        temp,\n        timestamp,\n        tempDiff,\n        change,\n        ms = anim.ms,\n        from = {},\n        to = {},\n        diff = {};\n\n        if (element.type === null) {\n            return;\n        }\n\n        configObject = configObject || {};\n        configObject.hookFn && configObject.hookFn.call(element);\n        configObject.from = configObject.from || {};\n        if (status) {\n            for (i = 0, ii = animationElements.length; i < ii; i++) {\n                var e = animationElements[i];\n                if (e.el.id == element.id && e.anim == anim) {\n                    if (e.percent != percent) {\n                        delete e.el.e;\n                        delete e.el;\n                        animationElements.splice(i, 1);\n                        isInAnimSet = 1;\n                    } else {\n                        isInAnim = e;\n                    }\n                    element.attr(e.totalOrigin);\n                    break;\n                }\n            }\n        } else {\n            status = +to; // NaN\n        }\n        for (var i = 0, ii = anim.percents.length; i < ii; i++) {\n            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {\n                percent = anim.percents[i];\n                prev = anim.percents[i - 1] || 0;\n                ms = ms / anim.top * (percent - prev);\n                next = anim.percents[i + 1];\n                params = anim.anim[percent];\n                break;\n            } else if (status) {\n                element.attr(anim.anim[anim.percents[i]]);\n            }\n        }\n        if (!params) {\n            return;\n        }\n        if (!isInAnim) {\n            for (var attr in params)\n                if (params[has](attr)) {\n                    if (availableAnimAttrs[has](attr) || element.ca[attr]) {\n                        from[attr] = configObject.from[attr] || element.attr(attr);\n                        (from[attr] == null) && (from[attr] = availableAttrs[attr]);\n                        to[attr] = params[attr];\n                        change = false;\n                        switch (availableAnimAttrs[attr]) {\n                            case nu:\n                                tempDiff = to[attr] - from[attr];\n                                (tempDiff || isNaN(tempDiff)) && (change = true);\n                                diff[attr] = tempDiff / ms;\n                                break;\n                            case \"colour\":\n                                if(from[attr] === to[attr]){\n                                    break;\n                                } else {\n                                    change = true;\n                                }\n                                var colorsNormalized = colorNormalizer(from[attr], to[attr], R.getRGB);\n                                from[attr] = colorsNormalized[0];\n                                var toColour = colorsNormalized[1];\n                                if (typeof toColour === \"string\") {\n                                    if(from[attr].toLowerCase() !== \"none\"){\n                                        from[attr] = R.getRGB(from[attr]);\n                                        if(!from[attr].opacity){\n                                            from[attr].opacity = 1;\n                                        }\n                                    } else {\n                                        from[attr] = {\n                                            r : 0,\n                                            g : 0,\n                                            b : 0,\n                                            opacity : 0\n                                        }\n                                    }\n                                    if(to[attr].toLowerCase() !== \"none\"){\n                                        toColour = R.getRGB(to[attr]);\n                                        if(!toColour.opacity){\n                                            toColour.opacity = 1;\n                                        }\n                                    } else {\n                                        toColour = {\n                                            r : 0,\n                                            g : 0,\n                                            b : 0,\n                                            opacity : 0\n                                        }\n                                    }\n                                    diff[attr] = {\n                                        r: (toColour.r - from[attr].r) / ms,\n                                        g: (toColour.g - from[attr].g) / ms,\n                                        b: (toColour.b - from[attr].b) / ms,\n                                        opacity: ((toColour.opacity - from[attr].opacity) / ms)\n                                    };\n                                } else {\n                                    diff[attr] = [];\n                                    for (i = 0, ii = from[attr].length; i < ii; ++i) {\n                                        if (i === 0) {\n                                            diff[attr].push(toColour[0]);\n                                        } else {\n                                            diff[attr].push({\n                                                r: (toColour[i].r - from[attr][i].r) / ms,\n                                                g: (toColour[i].g - from[attr][i].g) / ms,\n                                                b: (toColour[i].b - from[attr][i].b) / ms,\n                                                opacity: (toColour[i].opacity - from[attr][i].opacity) / ms\n                                            });\n                                        }\n                                    }\n                                }\n                                break;\n                            case \"path\":\n                                var toPath,\n                                    pathes = path2curve(from[attr], to[attr]);\n                                if (configObject.smartMorph) {\n                                    pathes = pathNormalizer(pathes[0], pathes[1], configObject);\n                                }\n                                toPath = pathes[1];\n                                from[attr] = pathes[0];\n                                diff[attr] = [];\n                                for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                    diff[attr][i] = [0];\n                                    var jj;\n                                    jj = from[attr][i] ? from[attr][i].length : 0;\n                                    for (var j = 1; j < jj; j++) {\n                                        diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;\n                                        (!change) && diff[attr][i][j] && (change = true);\n                                    }\n                                }\n                                break;\n                            case \"transform\":\n                                var _ = element._,\n                                eq = equaliseTransform(_[attr], to[attr]);\n                                change = true;\n                                if (eq) {\n                                    from[attr] = eq.from;\n                                    to[attr] = eq.to;\n                                    diff[attr] = [];\n                                    diff[attr].real = true;\n                                    for (i = 0, ii = from[attr].length; i < ii; i++) {\n                                        diff[attr][i] = [from[attr][i][0]];\n                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {\n                                            diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;\n                                        }\n                                    }\n                                } else {\n                                    var m = (element.matrix || new Matrix),\n                                    to2 = {\n                                        _: {\n                                            transform: _.transform\n                                        },\n                                        getBBox: function() {\n                                            return element.getBBox(1);\n                                        }\n                                    };\n                                    from[attr] = [\n                                    m.a,\n                                    m.b,\n                                    m.c,\n                                    m.d,\n                                    m.e,\n                                    m.f\n                                    ];\n                                    extractTransform(to2, to[attr]);\n                                    to[attr] = to2._.transform;\n                                    diff[attr] = [\n                                    (to2.matrix.a - m.a) / ms,\n                                    (to2.matrix.b - m.b) / ms,\n                                    (to2.matrix.c - m.c) / ms,\n                                    (to2.matrix.d - m.d) / ms,\n                                    (to2.matrix.e - m.e) / ms,\n                                    (to2.matrix.f - m.f) / ms\n                                    ];\n                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];\n                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};\n                                // extractTransform(to2, to[attr]);\n                                // diff[attr] = [\n                                //     (to2._.sx - _.sx) / ms,\n                                //     (to2._.sy - _.sy) / ms,\n                                //     (to2._.deg - _.deg) / ms,\n                                //     (to2._.dx - _.dx) / ms,\n                                //     (to2._.dy - _.dy) / ms\n                                // ];\n                                }\n                                break;\n                            case \"csv\":\n                                var values = Str(params[attr])[split](separator),\n                                from2 = Str(from[attr])[split](separator);\n                                if (attr == \"clip-rect\") {\n                                    from[attr] = from2;\n                                    diff[attr] = [];\n                                    i = from2.length;\n                                    while (i--) {\n                                        tempDiff = values[i] - from[attr][i];\n                                        (tempDiff || isNaN(tempDiff)) && (change = true);\n                                        diff[attr][i] = tempDiff / ms;\n                                    }\n                                }\n                                to[attr] = values;\n                                break;\n                            default:\n                                values = [][concat](params[attr]);\n                                from2 = [][concat](from[attr]);\n                                diff[attr] = [];\n                                i = element.ca[attr].length;\n                                while (i--) {\n                                    tempDiff = (values[i] || 0) - (from2[i] || 0);\n                                    (tempDiff || isNaN(tempDiff)) && (change = true);\n                                    diff[attr][i] = tempDiff / ms;\n                                }\n                                break;\n                        }\n                        if (!change) {\n                            delete from[attr];\n                            delete to[attr];\n                            delete params[attr];\n                            delete diff[attr];\n                        }\n                    }\n                    else if (R._availableAttrs[has](attr) || attr === 'text' || element.ca[attr]) {\n                        element.attr(attr, params[attr]);\n                        delete params[attr];\n                    }\n                }\n            var easing = params.easing,\n            easyeasy = R.easing_formulas[easing];\n            if (!easyeasy) {\n                easyeasy = Str(easing).match(bezierrg);\n                if (easyeasy && easyeasy.length == 5) {\n                    var curve = easyeasy;\n                    easyeasy = function(t) {\n                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);\n                    };\n                } else {\n                    easyeasy = pipe;\n                }\n            }\n            timestamp = params.start || anim.start || +new Date;\n            element.e =  e = {\n                anim: anim,\n                percent: percent,\n                timestamp: timestamp,\n                start: timestamp + (anim.del || 0),\n                status: 0,\n                initstatus: status || 0,\n                stop: false,\n                ms: ms,\n                easing: easyeasy,\n                from: from,\n                diff: diff,\n                to: to,\n                el: element,\n                callback: params.callback,\n                prev: prev,\n                next: next,\n                repeat: times || anim.times,\n                origin: element.attr(),\n                totalOrigin: totalOrigin,\n                parentEl : parentEl,\n                delayend: configObject && configObject.end,\n                delaystart: configObject && configObject.start\n            };\n            animationElements.push(e);\n\n            if (status && !isInAnim && !isInAnimSet) {\n                e.stop = true;\n                e.start = new Date - ms * status;\n                if (animationElements.length == 1) {\n                    return animation();\n                }\n            }\n            if (isInAnimSet) {\n                e.start = new Date - e.ms * status;\n            }\n            animationElements.length == 1 && (requestAnimFrame || R.getAnimFrameFn())(animation);\n        } else {\n            isInAnim.initstatus = status;\n            isInAnim.start = new Date - isInAnim.ms * status;\n        }\n        R.stopEvent !== false && eve(\"raphael.anim.start.\" + element.id, element, anim);\n    }\n\n    /*\\\n     * Raphael.animation\n     [ method ]\n     **\n     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.\n     * See also @Animation.delay and @Animation.repeat methods.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     **\n     = (object) @Animation\n    \\*/\n    R.animation = function(params, ms, easing, callback, event) {\n        if (params instanceof Animation) {\n            return params;\n        }\n        if (R.is(easing, \"function\") || !easing) {\n            callback = callback || easing || null;\n            easing = null;\n        }\n        R.stopEvent === undefined &&  (R.stopEvent = event);\n        params = Object(params);\n        ms = +ms || 0;\n        var p = {},\n        json,\n        attr;\n        for (attr in params)\n            if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + \"%\" != attr) {\n                json = true;\n                p[attr] = params[attr];\n            }\n        if (!json) {\n            return new Animation(params, ms);\n        } else {\n            easing && (p.easing = easing);\n            callback && (p.callback = callback);\n            return new Animation({\n                100: p\n            }, ms);\n        }\n    };\n\n    /*\\\n     * Element.animate\n     [ method ]\n     **\n     * Creates and starts animation for given element.\n     **\n     > Parameters\n     **\n     - params (object) final attributes for the element, see also @Element.attr\n     - ms (number) number of milliseconds for animation to run\n     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`\n     - callback (function) #optional callback function. Will be called at the end of animation.\n     * or\n     - animation (object) animation object, see @Raphael.animation\n     **\n     = (object) original element\n    \\*/\n    elproto.animate = function(params, ms, easing, callback) {\n        var element = this;\n        if (element.removed) {\n            callback && callback.call(element);\n            return element;\n        }\n        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);\n        runAnimation(anim, element, anim.percents[0], null, element.attr());\n        return element;\n    };\n\n    /*\\\n     * Element.setTime\n     [ method ]\n     **\n     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.\n     **\n     > Parameters\n     **\n     - anim (object) animation object\n     - value (number) number of milliseconds from the beginning of the animation\n     **\n     = (object) original element if `value` is specified\n     * Note, that during animation following events are triggered:\n     *\n     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.\n    \\*/\n    elproto.setTime = function(anim, value) {\n        if (anim && value != null) {\n            this.status(anim, mmin(value, anim.ms) / anim.ms);\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.status\n     [ method ]\n     **\n     * Gets or sets the status of animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - value (number) #optional 0 – 1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.\n     **\n     = (number) status\n     * or\n     = (array) status if `anim` is not specified. Array of objects in format:\n     o {\n     o     anim: (object) animation object\n     o     status: (number) status\n     o }\n     * or\n     = (object) original element if `value` is specified\n    \\*/\n    elproto.status = function(anim, value) {\n        var out = [],\n        i = 0,\n        len,\n        e;\n        if (value != null) {\n            runAnimation(anim, this, -1, mmin(value, 1));\n            return this;\n        } else {\n            len = animationElements.length;\n            for (; i < len; i++) {\n                e = animationElements[i];\n                if (e.el.id == this.id && (!anim || e.anim == anim)) {\n                    if (anim) {\n                        return e.status;\n                    }\n                    out.push({\n                        anim: e.anim,\n                        status: e.status\n                    });\n                }\n            }\n            if (anim) {\n                return 0;\n            }\n            return out;\n        }\n    };\n\n    /*\\\n     * Element.pause\n     [ method ]\n     **\n     * Stops animation of the element with ability to resume it later on.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - resumeChildAnimation (boolean) #pauses the animation of the elements which are in sync with the current element\n     **\n     = (object) original element\n    \\*/\n    elproto.pause = function(anim, pauseChildAnimation) {\n        var now = +new Date,\n            e,\n            i;\n        for (i = 0; i < animationElements.length; i++) {\n            e = animationElements[i];\n            // @todo - need a scope to implement the logic for nested animations.\n            if ((e.el.id === this.id || (pauseChildAnimation && e.parentEl && e.parentEl.e.el &&\n                e.parentEl.e.el.id === this.id)) && (!anim || e.anim == anim)) {\n                if (eve(\"raphael.anim.pause.\" + this.id, this, e.anim) !== false) {\n                    e.paused = true;\n                    e.pauseStart = now;\n                }\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.resume\n     [ method ]\n     **\n     * Resumes animation if it was paused with @Element.pause method.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - resumeChildAnimation (boolean) #resumes the animation of the elements which are in sync with the current element\n     **\n     = (object) original element\n    \\*/\n    elproto.resume = function(anim, resumeChildAnimation) {\n        var now = +new Date,\n            e,\n            i;\n        for (i = 0; i < animationElements.length; i++) {\n            e = animationElements[i];\n            // @todo - need a scope to implement the logic for nested animations.\n            if ((e.el.id === this.id || (resumeChildAnimation && e.parentEl && e.parentEl.e.el &&\n                e.parentEl.e.el.id === this.id)) && (!anim || e.anim == anim)) {\n                if (eve(\"raphael.anim.resume.\" + this.id, this, e.anim) !== false) {\n                    delete e.paused;\n                    e.el.status(e.anim, e.status);\n                    e.pauseEnd = now;\n                    e.start += (((e.parentEl && e.parentEl.e.pauseEnd || e.pauseEnd) -\n                        (e.parentEl && e.parentEl.e.pauseStart || e.pauseStart)) || 0);\n                }\n            }\n        }\n        return this;\n    };\n\n\n    /*\\\n     * Element.stop\n     [ method ]\n     **\n     * Stops animation of the element.\n     **\n     > Parameters\n     **\n     - anim (object) #optional animation object\n     - stopChildAnimation (boolean) #optional stops the animation of all the element which are in sync with the current element\n     - jumpToEnd (boolean) #optional takes the current animation to its end value\n     **\n     = (object) original element\n    \\*/\n    elproto.stop = function(anim, stopChildAnimation, jumpToEnd) {\n        var e, i, ele;\n        if (stopChildAnimation) {\n            for (i = animationElements.length - 1; i >= 0; i--) {\n                e = animationElements[i];\n                // @todo - need a scope to implement the logic for nested animations.\n                if ((e.el.id === this.id || (e.parentEl && e.parentEl.id === this.id)) &&\n                    (!anim || animationElements[i].anim == anim)) {\n                    ele = e.el;\n                    jumpToEnd && ele.attr(e.to);\n                    e.callback && e.callback.call(ele);\n                    delete ele.e;\n                    delete e.el;\n                    animationElements.splice(i, 1);\n                }\n            }\n        }\n        else {\n            for (var i = 0; i < animationElements.length; i++){\n                e = animationElements[i];\n                if (e.el.id === this.id && (!anim || e.anim === anim)) {\n                    if (eve(\"raphael.anim.stop.\" + this.id, this, e.anim) !== false) {\n                        animationElements.splice(i--, 1);\n                    }\n                }\n            }\n        }\n        // In case root object has hooked animation elements\n        // in priority queue execute them all\n        if (this.animElements) {\n            executeAnimQueue(this.animElements);\n        }\n        return this;\n    };\n\n    function executeAnimQueue (queue) {\n        var ob;\n        // Looping until all executed\n        while (ob = queue.deq()) {\n            ob = ob.executeOb;\n            ob.hookFn && ob.hookFn.call(ob.el);\n            ob.el.attr(ob.attrs);\n            ob.callback && ob.callback.call(ob.el);\n        }\n    }\n\n    function stopAnimation(paper) {\n        for (var i = 0; i < animationElements.length; i++)\n            if (animationElements[i].el.paper == paper) {\n                animationElements.splice(i--, 1);\n            }\n    }\n    eve.on(\"raphael.remove\", stopAnimation);\n    eve.on(\"raphael.clear\", stopAnimation);\n    elproto.toString = function() {\n        return \"Rapha\\xebl\\u2019s object\";\n    };\n\n    elproto.toFront = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            parent = o.parent,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._tofront(o, parent)) {\n            parent.canvas.appendChild(thisNode);\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n        return o;\n    };\n\n    elproto.toBack = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            parent = o.parent,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._toback(o, parent)) {\n            parent.canvas.insertBefore(thisNode, parent.canvas.firstChild);\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n        return o;\n    };\n\n    elproto.insertAfter = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            thatNode = R._engine.getLastNode(element),\n            parentNode = element.parent.canvas,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (thatNode.nextSibling) {\n            parentNode.insertBefore(thisNode, thatNode.nextSibling);\n        }\n        else {\n            parentNode.appendChild(thisNode);\n        }\n        R._insertafter(o, element, o.parent, element.parent);\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n        return o;\n    };\n\n    elproto.insertBefore = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = R._engine.getNode(o),\n            thatNode = R._engine.getNode(element),\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        element.parent.canvas.insertBefore(thisNode, thatNode);\n        R._insertbefore(o, element, o.parent, element.parent);\n        o.parent = element.parent;\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n        return this;\n    };\n\n    elproto.appendChild = function (element) {\n        if (this.removed || this.type !== 'group') {\n            return this;\n        }\n\n        var group = this,\n            followers = group.followers,\n            follower,\n            thatNode,\n            i,\n            ii;\n\n        // If appending in same group, simply perform toFront().\n        if (element.parent === group) {\n            element.toFront();\n            return group;\n        }\n\n        thatNode = R._engine.getNode(element);\n\n        // first remove from own group\n        R._tear(element, element.parent);\n\n        group.canvas.appendChild(thatNode);\n        element.parent = group;\n\n        !group.bottom && (group.bottom = element);\n        element.prev = group.top;\n        element.next = null;\n        group.top && (group.top.next = element);\n        group.top = element;\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n\n        return group;\n    };\n\n    elproto.removeChild = function (element) {\n        if (this.removed || this.type !== 'group' || element.parent !== this) {\n            return this;\n        }\n\n        var o = this,\n            thatNode = R._engine.getNode(element),\n            paper = o.paper;\n\n        R._tear(element, o);\n        paper.canvas.appendChild(thatNode);\n\n        o.parent = paper;\n        !paper.bottom && (paper.bottom = o);\n\n        o.prev = paper.top;\n        paper.top && (paper.top.next = o);\n        paper.top = o;\n        o.next = null;\n\n        return o;\n    };\n\n    // Set\n    var Set = function(items) {\n        this.items = [];\n        this.length = 0;\n        this.type = \"set\";\n        if (items) {\n            for (var i = 0, ii = items.length; i < ii; i++) {\n                if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {\n                    this[this.items.length] = this.items[this.items.length] = items[i];\n                    this.length++;\n                }\n            }\n        }\n    },\n    setproto = Set.prototype;\n\n    /*\\\n     * Set.push\n     [ method ]\n     **\n     * Adds each argument to the current set.\n     = (object) original element\n    \\*/\n    setproto.push = function() {\n        var item,\n        len;\n        for (var i = 0, ii = arguments.length; i < ii; i++) {\n            item = arguments[i];\n            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {\n                len = this.items.length;\n                this[len] = this.items[len] = item;\n                this.length++;\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Set.pop\n     [ method ]\n     **\n     * Removes last element and returns it.\n     = (object) element\n    \\*/\n    setproto.pop = function() {\n        this.length && delete this[this.length--];\n        return this.items.pop();\n    };\n\n    /*\\\n     * Set.forEach\n     [ method ]\n     **\n     * Executes given function for each element in the set.\n     *\n     * If function returns `false` it will stop loop running.\n     **\n     > Parameters\n     **\n     - callback (function) function to run\n     - thisArg (object) context object for the callback\n     = (object) Set object\n    \\*/\n    setproto.forEach = function(callback, thisArg) {\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            if (callback.call(thisArg, this.items[i], i) === false) {\n                return this;\n            }\n        }\n        return this;\n    };\n    for (var method in elproto)\n        if (elproto[has](method)) {\n            setproto[method] = (function(methodname) {\n                return function() {\n                    var arg = arguments;\n                    return this.forEach(function(el) {\n                        el[methodname][apply](el, arg);\n                    });\n                };\n            })(method);\n        }\n    setproto.attr = function(name, value) {\n        if (name && R.is(name, array) && R.is(name[0], object)) {\n            for (var j = 0, jj = name.length; j < jj; j++) {\n                this.items[j].attr(name[j]);\n            }\n        } else {\n            for (var i = 0, ii = this.items.length; i < ii; i++) {\n                this.items[i].attr(name, value);\n            }\n        }\n        return this;\n    };\n\n    /*\\\n     * Set.clear\n     [ method ]\n     **\n     * Removeds all elements from the set\n    \\*/\n    setproto.clear = function() {\n        while (this.length) {\n            this.pop();\n        }\n    };\n\n    /*\\\n     * Set.splice\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - index (number) position of the deletion\n     - count (number) number of element to remove\n     - insertion… (object) #optional elements to insert\n     = (object) set elements that were deleted\n    \\*/\n    setproto.splice = function(index, count, insertion) {\n        index = index < 0 ? mmax(this.length + index, 0) : index;\n        count = mmax(0, mmin(this.length - index, isNaN(count) && this.length || count));\n        var tail = [],\n        todel = [],\n        args = [],\n        i;\n        for (i = 2; i < arguments.length; i++) {\n            args.push(arguments[i]);\n        }\n        for (i = 0; i < count; i++) {\n            todel.push(this[index + i]);\n        }\n        for (; i < this.length - index; i++) {\n            tail.push(this[index + i]);\n        }\n        var arglen = args.length;\n        for (i = 0; i < arglen + tail.length; i++) {\n            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];\n        }\n        i = this.items.length = this.length -= count - arglen;\n        while (this[i]) {\n            delete this[i++];\n        }\n        return new Set(todel);\n    };\n\n    /*\\\n     * Set.exclude\n     [ method ]\n     **\n     * Removes given element from the set\n     **\n     > Parameters\n     **\n     - element (object) element to remove\n     = (boolean) `true` if object was found & removed from the set\n    \\*/\n    setproto.exclude = function(el) {\n        for (var i = 0, ii = this.length; i < ii; i++)\n            if (this[i] == el) {\n                this.splice(i, 1);\n                return true;\n            }\n    };\n    setproto.animate = function(params, ms, easing, callback) {\n        (R.is(easing, \"function\") || !easing) && (callback = easing || null);\n        var len = this.items.length,\n        i = len,\n        item,\n        set = this,\n        collector;\n        if (!len) {\n            return this;\n        }\n        callback && (collector = function() {\n            !--len && callback.call(set);\n        });\n        easing = R.is(easing, string) ? easing : collector;\n        var anim = R.animation(params, ms, easing, collector);\n        item = this.items[--i].animate(anim);\n        while (i--) {\n            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);\n        }\n        return this;\n    };\n    setproto.insertAfter = function(el) {\n        var i = this.items.length;\n        while (i--) {\n            this.items[i].insertAfter(el);\n        }\n        return this;\n    };\n    setproto.getBBox = function() {\n        var x = [],\n        y = [],\n        x2 = [],\n        y2 = [];\n        for (var i = this.items.length; i--; )\n            if (!this.items[i].removed) {\n                var box = this.items[i].getBBox();\n                x.push(box.x);\n                y.push(box.y);\n                x2.push(box.x + box.width);\n                y2.push(box.y + box.height);\n            }\n        x = mmin[apply](0, x);\n        y = mmin[apply](0, y);\n        x2 = mmax[apply](0, x2);\n        y2 = mmax[apply](0, y2);\n        return {\n            x: x,\n            y: y,\n            x2: x2,\n            y2: y2,\n            width: x2 - x,\n            height: y2 - y\n        };\n    };\n    setproto.clone = function(s) {\n        s = new Set;\n        for (var i = 0, ii = this.items.length; i < ii; i++) {\n            s.push(this.items[i].clone());\n        }\n        return s;\n    };\n    setproto.toString = function() {\n        return \"Rapha\\xebl\\u2018s set\";\n    };\n\n     setproto.glow = function(glowConfig) {\n         var ret = this.paper.set();\n         this.forEach(function(shape, index){\n             var g = shape.glow(glowConfig);\n             if(g != null){\n                 g.forEach(function(shape2, index2){\n                     ret.push(shape2);\n                 });\n             }\n         });\n         return ret;\n     };\n\n    /*\\\n     * Raphael.registerFont\n     [ method ]\n     **\n     * Adds given font to the registered set of fonts for Raphaël. Should be used as an internal call from within Cufón’s font file.\n     * Returns original parameter, so it could be used with chaining.\n     # <a href=\"http://wiki.github.com/sorccu/cufon/about\">More about Cufón and how to convert your font form TTF, OTF, etc to JavaScript file.</a>\n     **\n     > Parameters\n     **\n     - font (object) the font to register\n     = (object) the font you passed in\n     > Usage\n     | Cufon.registerFont(Raphael.registerFont({…}));\n    \\*/\n    R.registerFont = function(font) {\n        if (!font.face) {\n            return font;\n        }\n        this.fonts = this.fonts || {};\n        var fontcopy = {\n            w: font.w,\n            face: {},\n            glyphs: {}\n        },\n        family = font.face[\"font-family\"];\n        for (var prop in font.face)\n            if (font.face[has](prop)) {\n                fontcopy.face[prop] = font.face[prop];\n            }\n        if (this.fonts[family]) {\n            this.fonts[family].push(fontcopy);\n        } else {\n            this.fonts[family] = [fontcopy];\n        }\n        if (!font.svg) {\n            fontcopy.face[\"units-per-em\"] = toInt(font.face[\"units-per-em\"], 10);\n            for (var glyph in font.glyphs)\n                if (font.glyphs[has](glyph)) {\n                    var path = font.glyphs[glyph];\n                    fontcopy.glyphs[glyph] = {\n                        w: path.w,\n                        k: {},\n                        d: path.d && \"M\" + path.d.replace(/[mlcxtrv]/g, function(command) {\n                            return {\n                                l: \"L\",\n                                c: \"C\",\n                                x: \"z\",\n                                t: \"m\",\n                                r: \"l\",\n                                v: \"c\"\n                            }\n                            [command] || \"M\";\n                        }) + \"z\"\n                    };\n                    if (path.k) {\n                        for (var k in path.k)\n                            if (path[has](k)) {\n                                fontcopy.glyphs[glyph].k[k] = path.k[k];\n                            }\n                    }\n                }\n        }\n        return font;\n    };\n\n    /*\\\n     * Paper.getFont\n     [ method ]\n     **\n     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like “Myriad” for “Myriad Pro”.\n     **\n     > Parameters\n     **\n     - family (string) font family name or any word from it\n     - weight (string) #optional font weight\n     - style (string) #optional font style\n     - stretch (string) #optional font stretch\n     = (object) the font object\n     > Usage\n     | paper.print(100, 100, \"Test string\", paper.getFont(\"Times\", 800), 30);\n    \\*/\n    paperproto.getFont = function(family, weight, style, stretch) {\n        stretch = stretch || \"normal\";\n        style = style || \"normal\";\n        weight = +weight || {\n            normal: 400,\n            bold: 700,\n            lighter: 300,\n            bolder: 800\n        }\n        [weight] || 400;\n        if (!R.fonts) {\n            return;\n        }\n        var font = R.fonts[family];\n        if (!font) {\n            var name = new RegExp(\"(^|\\\\s)\" + family.replace(/[^\\w\\d\\s+!~.:_-]/g, E) + \"(\\\\s|$)\", \"i\");\n            for (var fontName in R.fonts)\n                if (R.fonts[has](fontName)) {\n                    if (name.test(fontName)) {\n                        font = R.fonts[fontName];\n                        break;\n                    }\n                }\n        }\n        var thefont;\n        if (font) {\n            for (var i = 0, ii = font.length; i < ii; i++) {\n                thefont = font[i];\n                if (thefont.face[\"font-weight\"] == weight && (thefont.face[\"font-style\"] == style || !thefont.face[\"font-style\"]) && thefont.face[\"font-stretch\"] == stretch) {\n                    break;\n                }\n            }\n        }\n        return thefont;\n    };\n\n    /*\\\n     * Paper.print\n     [ method ]\n     **\n     * Creates path that represent given text written using given font at given position with given size.\n     * Result of the method is path element that contains whole text as a separate path.\n     **\n     > Parameters\n     **\n     - x (number) x position of the text\n     - y (number) y position of the text\n     - string (string) text to print\n     - font (object) font object, see @Paper.getFont\n     - size (number) #optional size of the font, default is `16`\n     - origin (string) #optional could be `\"baseline\"` or `\"middle\"`, default is `\"middle\"`\n     - letter_spacing (number) #optional number in range `-1..1`, default is `0`\n     = (object) resulting path element, which consist of all letters\n     > Usage\n     | var txt = r.print(10, 50, \"print\", r.getFont(\"Museo\"), 30).attr({fill: \"#fff\"});\n    \\*/\n    paperproto.print = function(x, y, string, font, size, origin, letter_spacing) {\n        origin = origin || \"middle\"; // baseline|middle\n        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);\n        var letters = Str(string)[split](E),\n        shift = 0,\n        notfirst = 0,\n        path = E,\n        scale;\n        R.is(font, string) && (font = this.getFont(font));\n        if (font) {\n            scale = (size || 16) / font.face[\"units-per-em\"];\n            var bb = font.face.bbox[split](separator),\n            top = +bb[0],\n            lineHeight = bb[3] - bb[1],\n            shifty = 0,\n            height = + bb[1] + (origin == \"baseline\" ? lineHeight + ( + font.face.descent) : lineHeight / 2);\n            for (var i = 0, ii = letters.length; i < ii; i++) {\n                if (letters[i] == \"\\n\") {\n                    shift = 0;\n                    curr = 0;\n                    notfirst = 0;\n                    shifty += lineHeight;\n                } else {\n                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},\n                    curr = font.glyphs[letters[i]];\n                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;\n                    notfirst = 1;\n                }\n                if (curr && curr.d) {\n                    path += R.transformPath(curr.d, [\"t\", shift * scale, shifty * scale, \"s\", scale, scale, top, height, \"t\", (x - top) / scale, (y - height) / scale]);\n                }\n            }\n        }\n        return this.path(path).attr({\n            fill: \"#000\",\n            stroke: \"none\"\n        });\n    };\n\n    /*\\\n     * Paper.add\n     [ method ]\n     **\n     * Imports elements in JSON array in format `{type: type, <attributes>}`\n     **\n     > Parameters\n     **\n     - json (array)\n     = (object) resulting set of imported elements\n     > Usage\n     | paper.add([\n     |     {\n     |         type: \"circle\",\n     |         cx: 10,\n     |         cy: 10,\n     |         r: 5\n     |     },\n     |     {\n     |         type: \"rect\",\n     |         x: 10,\n     |         y: 10,\n     |         width: 10,\n     |         height: 10,\n     |         fill: \"#fc0\"\n     |     }\n     | ]);\n    \\*/\n    paperproto.add = function(json) {\n        if (R.is(json, \"array\")) {\n            var res = this.set(),\n            i = 0,\n            ii = json.length,\n            j;\n            for (; i < ii; i++) {\n                j = json[i] || {};\n                elements[has](j.type) && res.push(this[j.type]().attr(j));\n            }\n        }\n        return res;\n    };\n\n    /*\\\n     * Raphael.format\n     [ method ]\n     **\n     * Simple format function. Replaces construction of type “`{<number>}`” to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - … (string) rest of arguments will be treated as parameters for replacement\n     = (string) formated string\n     > Usage\n     | var x = 10,\n     |     y = 20,\n     |     width = 40,\n     |     height = 50;\n     | // this will draw a rectangular shape equivalent to \"M10,20h40v50h-40z\"\n     | paper.path(Raphael.format(\"M{0},{1}h{2}v{3}h{4}z\", x, y, width, height, -width));\n    \\*/\n    R.format = function(token, params) {\n        var args = R.is(params, array) ? [0][concat](params) : arguments;\n        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function(str, i) {\n            return args[++i] == null ? E : args[i];\n        }));\n        return token || E;\n    };\n\n    /*\\\n     * Raphael.fullfill\n     [ method ]\n     **\n     * A little bit more advanced format function than @Raphael.format. Replaces construction of type “`{<name>}`” to the corresponding argument.\n     **\n     > Parameters\n     **\n     - token (string) string to format\n     - json (object) object which properties will be used as a replacement\n     = (string) formated string\n     > Usage\n     | // this will draw a rectangular shape equivalent to \"M10,20h40v50h-40z\"\n     | paper.path(Raphael.fullfill(\"M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z\", {\n     |     x: 10,\n     |     y: 20,\n     |     dim: {\n     |         width: 40,\n     |         height: 50,\n     |         \"negative width\": -40\n     |     }\n     | }));\n    \\*/\n    R.fullfill = (function() {\n        var tokenRegex = /\\{([^\\}]+)\\}/g,\n        objNotationRegex = /(?:(?:^|\\.)(.+?)(?=\\[|\\.|$|\\()|\\[('|\")(.+?)\\2\\])(\\(\\))?/g, // matches .xxxxx or [\"xxxxx\"] to run over object properties\n        replacer = function(all, key, obj) {\n            var res = obj;\n            key.replace(objNotationRegex, function(all, name, quote, quotedName, isFunc) {\n                name = name || quotedName;\n                if (res) {\n                    if (name in res) {\n                        res = res[name];\n                    }\n                    typeof res == \"function\" && isFunc && (res = res());\n                }\n            });\n            res = (res == null || res == obj ? all : res) + \"\";\n            return res;\n        };\n        return function(str, obj) {\n            return String(str).replace(tokenRegex, function(all, key) {\n                return replacer(all, key, obj);\n            });\n        };\n    })();\n\n    /*\\\n     * Raphael.ninja\n     [ method ]\n     **\n     * If you want to leave no trace of Raphaël (Well, Raphaël creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.\n     * Beware, that in this case plugins could stop working, because they are depending on global variable existance.\n     **\n     = (object) Raphael object\n     > Usage\n     | (function (local_raphael) {\n     |     var paper = local_raphael(10, 10, 320, 200);\n     |     …\n     | })(Raphael.ninja());\n    \\*/\n    R.ninja = function() {\n        oldRaphael.was ? (g.win.Raphael = oldRaphael.is) : delete g.win.Raphael;\n        return R;\n    };\n\n    var crispFixer = (R.vml && 0.5 || 0);\n\n    R.crispBound = cacher(function (x, y, w, h, s) {\n        var at = {},\n            normalizer;\n\n        x = x || 0;\n        y = y || 0;\n        w = w || 0;\n        h = h || 0;\n        s = s || 0;\n        normalizer = s % 2 / 2 + crispFixer;\n\n        // normalize for crisp edges\n        at.x = round(x + normalizer) - normalizer;\n        at.y = round(y + normalizer) - normalizer;\n        at.width = round(x + w + normalizer) - normalizer - at.x;\n        at.height = round(y + h + normalizer) - normalizer - at.y;\n        at['stroke-width'] = s;\n\n        // adjust to single pixel if resultant dimension is zero.\n        (at.width === 0 && w !== 0) && (at.width = 1);\n        (at.height === 0 && h !== 0) && (at.height = 1);\n\n        return at;\n    }, R);\n\n    elproto.crisp = function () {\n        var o = this,\n            attrs = o.attrs,\n            key,\n            attr = {},\n            values = o.attr(['x', 'y', 'width', 'height', 'stroke-width']);\n\n        values = R.crispBound(values.x, values.y, values.width, values.height,\n            values['stroke-width']);\n\n        for (key in values) {\n            if (attrs[key] === values[key]) { // only set attribute if changed\n                delete values[key];\n            }\n        }\n\n        return o.attr(values);\n    };\n\n    /*\\\n     * Raphael.st\n     [ property (object) ]\n     **\n     * You can add your own method to elements and sets. It is wise to add a set method for each element method\n     * you added, so you will be able to call the same method on sets too.\n     **\n     * See also @Raphael.el.\n     > Usage\n     | Raphael.el.red = function () {\n     |     this.attr({fill: \"#f00\"});\n     | };\n     | Raphael.st.red = function () {\n     |     this.forEach(function (el) {\n     |         el.red();\n     |     });\n     | };\n     | // then use it\n     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();\n    \\*/\n    R.st = setproto;\n\n    /*\\\n     * Raphael.define\n     [ method ]\n     **\n     * Allows a unified definition of composite shapes and other behaviours using\n     * simple directives.\n     **\n     > Parameters\n     **\n     - definition (object) the shape definition\n    \\*/\n    R.define = function (name, init, ca, fn, e, data) {\n        var i,\n            ii;\n\n        // multi definition\n        if (R.is(name, array)) {\n            for (i = 0, ii = name.length; i < ii; i++) {\n                R.define(name[i]);\n            }\n            return;\n        }\n        // object definition\n        else if (R.is(name, object)) {\n            R.define(name.name, name[name.name], name.ca, name.fn, name.e, name.data);\n            return;\n        }\n        // invalid or duplicate definition\n        else if (!name || R.fn[name]) {\n            return;\n        }\n\n        R.fn[name] = function () {\n            var args = arguments,\n                element = init.apply(this, args),\n                key;\n\n            if (fn && R.is(fn, object)) {\n                for (key in fn) {\n                    element[key] = fn[key];\n                }\n            }\n\n            if (e && R.is(e, object)) {\n                for (key in e) {\n                    element[key] && element[key](e[key]);\n                }\n            }\n\n            if (ca) {\n                if (R.is(ca, 'function')) {\n                    element.ca[name] = ca;\n                }\n                else {\n                    for (key in ca) {\n                        element.ca[key] = ca[key];\n                    }\n                }\n\n                // Check if namesake ca exists and apply it\n                if (element.ca[name]) {\n                    R._lastArgIfGroup(args, true); // purge group\n                    args.length && element.attr(name, arraySlice.call(args))\n                }\n            }\n\n            return element;\n        };\n\n        if (ca) { R.fn[name].ca = ca; }\n        if (fn) { R.fn[name].fn = fn; }\n        if (e) { R.fn[name].e = e; }\n        if (data) { R.fn[name].data = data; }\n\n        return R.fn[name];\n    };\n    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html\n    (function(doc, loaded, f) {\n        if (doc.readyState == null && doc.addEventListener) {\n            doc.addEventListener(loaded, f = function() {\n                doc.removeEventListener(loaded, f, false);\n                doc.readyState = \"complete\";\n            }, false);\n            doc.readyState = \"loading\";\n        }\n        function isLoaded() {\n            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve(\"raphael.DOMload\");\n        }\n        isLoaded();\n    })(doc, \"DOMContentLoaded\");\n\n    eve.on(\"raphael.DOMload\", function() {\n        loaded = true;\n    });\n\n\n\n    // EXPOSE\n    // SVG and VML are appended just before the EXPOSE line\n    // Even with AMD, Raphael should be defined globally\n    // oldRaphael.was ? (g.win.Raphael = R) : (Raphael = R);\n\nexport default R;\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.core.js","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 8\n// module chunks = 0","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 9\n// module chunks = 0","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 10\n// module chunks = 0","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 11\n// module chunks = 0","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys       = require('./_object-keys-internal')\n  , enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O){\n  return $keys(O, enumBugKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 12\n// module chunks = 0","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 13\n// module chunks = 0","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 14\n// module chunks = 0","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 15\n// module chunks = 0","module.exports = true;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 16\n// module chunks = 0","var core = module.exports = {version: '2.4.0'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 17\n// module chunks = 0","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 18\n// module chunks = 0","module.exports = {};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 19\n// module chunks = 0","var shared = require('./_shared')('keys')\n  , uid    = require('./_uid');\nmodule.exports = function(key){\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 20\n// module chunks = 0","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 21\n// module chunks = 0","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 22\n// module chunks = 0","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 23\n// module chunks = 0","exports.f = require('./_wks');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-ext.js\n// module id = 24\n// module chunks = 0","var global         = require('./_global')\n  , core           = require('./_core')\n  , LIBRARY        = require('./_library')\n  , wksExt         = require('./_wks-ext')\n  , defineProperty = require('./_object-dp').f;\nmodule.exports = function(name){\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if(name.charAt(0) != '_' && !(name in $Symbol))defineProperty($Symbol, name, {value: wksExt.f(name)});\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks-define.js\n// module id = 25\n// module chunks = 0","exports.f = {}.propertyIsEnumerable;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-pie.js\n// module id = 26\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 27\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol/iterator.js\n// module id = 28\n// module chunks = 0","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 29\n// module chunks = 0","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 30\n// module chunks = 0","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 31\n// module chunks = 0","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 32\n// module chunks = 0","module.exports = require('./_hide');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 33\n// module chunks = 0","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject    = require('./_an-object')\n  , dPs         = require('./_object-dps')\n  , enumBugKeys = require('./_enum-bug-keys')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , Empty       = function(){ /* empty */ }\n  , PROTOTYPE   = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function(){\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe')\n    , i      = enumBugKeys.length\n    , lt     = '<'\n    , gt     = '>'\n    , iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties){\n  var result;\n  if(O !== null){\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty;\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 34\n// module chunks = 0","var has          = require('./_has')\n  , toIObject    = require('./_to-iobject')\n  , arrayIndexOf = require('./_array-includes')(false)\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function(object, names){\n  var O      = toIObject(object)\n    , i      = 0\n    , result = []\n    , key;\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while(names.length > i)if(has(O, key = names[i++])){\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 35\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 36\n// module chunks = 0","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/symbol.js\n// module id = 37\n// module chunks = 0","exports.f = Object.getOwnPropertySymbols;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gops.js\n// module id = 38\n// module chunks = 0","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys      = require('./_object-keys-internal')\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\n  return $keys(O, hiddenKeys);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn.js\n// module id = 39\n// module chunks = 0","// import Raphael from './index';\n\n// export default Raphael\n\n\nimport Raphael from './raphael.core';\n\nimport svg from './raphael.svg';\nimport vml from './raphael.vml';\nimport canvas from './raphael.canvas';\n\n// export {svg, vml, canvas}\n\nexport default Raphael\n\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.js","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/iterator.js\n// module id = 42\n// module chunks = 0","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 43\n// module chunks = 0","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 44\n// module chunks = 0","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 45\n// module chunks = 0","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 46\n// module chunks = 0","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 47\n// module chunks = 0","var dP       = require('./_object-dp')\n  , anObject = require('./_an-object')\n  , getKeys  = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\n  anObject(O);\n  var keys   = getKeys(Properties)\n    , length = keys.length\n    , i = 0\n    , P;\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 48\n// module chunks = 0","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 49\n// module chunks = 0","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 50\n// module chunks = 0","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 51\n// module chunks = 0","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-index.js\n// module id = 52\n// module chunks = 0","module.exports = require('./_global').document && document.documentElement;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 53\n// module chunks = 0","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has         = require('./_has')\n  , toObject    = require('./_to-object')\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\n  , ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function(O){\n  O = toObject(O);\n  if(has(O, IE_PROTO))return O[IE_PROTO];\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 54\n// module chunks = 0","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 55\n// module chunks = 0","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 56\n// module chunks = 0","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 57\n// module chunks = 0","module.exports = function(){ /* empty */ };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 58\n// module chunks = 0","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 59\n// module chunks = 0","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/symbol/index.js\n// module id = 60\n// module chunks = 0","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , wksExt         = require('./_wks-ext')\n  , wksDefine      = require('./_wks-define')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , $keys          = require('./_object-keys')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , OPSymbols      = shared('op-symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(it === ObjectProto)$defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if(this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  it  = toIObject(it);\n  key = toPrimitive(key, true);\n  if(it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key))return;\n  var D = gOPD(it, key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var IS_OP  = it === ObjectProto\n    , names  = gOPN(IS_OP ? OPSymbols : toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i){\n    if(has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true))result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function(value){\n      if(this === ObjectProto)$set.call(OPSymbols, value);\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if(DESCRIPTORS && setter)setSymbolDesc(ObjectProto, tag, {configurable: true, set: $set});\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function(name){\n    return wrap(wks(name));\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\nfor(var symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; )wks(symbols[i++]);\n\nfor(var symbols = $keys(wks.store), i = 0; symbols.length > i; )wksDefine(symbols[i++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it){\n    if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n    var args = [it]\n      , i    = 1\n      , replacer, $replacer;\n    while(arguments.length > i)args.push(arguments[i++]);\n    replacer = args[1];\n    if(typeof replacer == 'function')$replacer = replacer;\n    if($replacer || !isArray(replacer))replacer = function(key, value){\n      if($replacer)value = $replacer.call(this, key, value);\n      if(!isSymbol(value))return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.symbol.js\n// module id = 61\n// module chunks = 0","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 62\n// module chunks = 0","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_keyof.js\n// module id = 63\n// module chunks = 0","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-keys.js\n// module id = 64\n// module chunks = 0","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 65\n// module chunks = 0","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopn-ext.js\n// module id = 66\n// module chunks = 0","var pIE            = require('./_object-pie')\n  , createDesc     = require('./_property-desc')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , has            = require('./_has')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , gOPD           = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if(IE8_DOM_DEFINE)try {\n    return gOPD(O, P);\n  } catch(e){ /* empty */ }\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gopd.js\n// module id = 67\n// module chunks = 0","require('./_wks-define')('asyncIterator');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js\n// module id = 69\n// module chunks = 0","require('./_wks-define')('observable');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.symbol.observable.js\n// module id = 70\n// module chunks = 0","// Copyright (c) 2017 Adobe Systems Incorporated. All rights reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// ┌────────────────────────────────────────────────────────────┐ \\\\\n// │ Eve 0.5.3 - JavaScript Events Library                      │ \\\\\n// ├────────────────────────────────────────────────────────────┤ \\\\\n// │ Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/) │ \\\\\n// └────────────────────────────────────────────────────────────┘ \\\\\n\nexport default (function (glob) {\n    var version = \"0.5.3\",\n        has = \"hasOwnProperty\",\n        separator = /[\\.\\/]/,\n        comaseparator = /\\s*,\\s*/,\n        wildcard = \"*\",\n        fun = function () {},\n        numsort = function (a, b) {\n            return a - b;\n        },\n        current_event,\n        stop,\n        events = {n: {}},\n        firstDefined = function () {\n            for (var i = 0, ii = this.length; i < ii; i++) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        lastDefined = function () {\n            var i = this.length;\n            while (--i) {\n                if (typeof this[i] != \"undefined\") {\n                    return this[i];\n                }\n            }\n        },\n        objtos = Object.prototype.toString,\n        Str = String,\n        isArray = Array.isArray || function (ar) {\n            return ar instanceof Array || objtos.call(ar) == \"[object Array]\";\n        },\n    /*\\\n     * eve\n     [ method ]\n\n     * Fires event with given `name`, given scope and other parameters.\n\n     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated\n     - scope (object) context for the event handlers\n     - varargs (...) the rest of arguments will be sent to event handlers\n\n     = (object) array of returned values from the listeners. Array has two methods `.firstDefined()` and `.lastDefined()` to get first or last not `undefined` value.\n    \\*/\n        eve = function (name, scope) {\n            var e = events,\n                oldstop = stop,\n                args = Array.prototype.slice.call(arguments, 2),\n                listeners = eve.listeners(name),\n                z = 0,\n                f = false,\n                l,\n                indexed = [],\n                queue = {},\n                out = [],\n                ce = current_event,\n                errors = [];\n            out.firstDefined = firstDefined;\n            out.lastDefined = lastDefined;\n            current_event = name;\n            stop = 0;\n            for (var i = 0, ii = listeners.length; i < ii; i++) if (\"zIndex\" in listeners[i]) {\n                indexed.push(listeners[i].zIndex);\n                if (listeners[i].zIndex < 0) {\n                    queue[listeners[i].zIndex] = listeners[i];\n                }\n            }\n            indexed.sort(numsort);\n            while (indexed[z] < 0) {\n                l = queue[indexed[z++]];\n                out.push(l.apply(scope, args));\n                if (stop) {\n                    stop = oldstop;\n                    return out;\n                }\n            }\n            for (i = 0; i < ii; i++) {\n                l = listeners[i];\n                if (\"zIndex\" in l) {\n                    if (l.zIndex == indexed[z]) {\n                        out.push(l.apply(scope, args));\n                        if (stop) {\n                            break;\n                        }\n                        do {\n                            z++;\n                            l = queue[indexed[z]];\n                            l && out.push(l.apply(scope, args));\n                            if (stop) {\n                                break;\n                            }\n                        } while (l)\n                    } else {\n                        queue[l.zIndex] = l;\n                    }\n                } else {\n                    out.push(l.apply(scope, args));\n                    if (stop) {\n                        break;\n                    }\n                }\n            }\n            stop = oldstop;\n            current_event = ce;\n            return out;\n        };\n        // Undocumented. Debug only.\n        eve._events = events;\n    /*\\\n     * eve.listeners\n     [ method ]\n\n     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.\n\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated\n\n     = (array) array of event handlers\n    \\*/\n    eve.listeners = function (name) {\n        var names = isArray(name) ? name : name.split(separator),\n            e = events,\n            item,\n            items,\n            k,\n            i,\n            ii,\n            j,\n            jj,\n            nes,\n            es = [e],\n            out = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            nes = [];\n            for (j = 0, jj = es.length; j < jj; j++) {\n                e = es[j].n;\n                items = [e[names[i]], e[wildcard]];\n                k = 2;\n                while (k--) {\n                    item = items[k];\n                    if (item) {\n                        nes.push(item);\n                        out = out.concat(item.f || []);\n                    }\n                }\n            }\n            es = nes;\n        }\n        return out;\n    };\n    /*\\\n     * eve.separator\n     [ method ]\n\n     * If for some reasons you don’t like default separators (`.` or `/`) you can specify yours\n     * here. Be aware that if you pass a string longer than one character it will be treated as\n     * a list of characters.\n\n     - separator (string) new separator. Empty string resets to default: `.` or `/`.\n    \\*/\n    eve.separator = function (sep) {\n        if (sep) {\n            sep = Str(sep).replace(/(?=[\\.\\^\\]\\[\\-])/g, \"\\\\\");\n            sep = \"[\" + sep + \"]\";\n            separator = new RegExp(sep);\n        } else {\n            separator = /[\\.\\/]/;\n        }\n    };\n    /*\\\n     * eve.on\n     [ method ]\n     **\n     * Binds given event handler with a given name. You can use wildcards “`*`” for the names:\n     | eve.on(\"*.under.*\", f);\n     | eve(\"mouse.under.floor\"); // triggers f\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     - name (array) if you don’t want to use separators, you can use array of strings\n     - f (function) event handler function\n     **\n     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment.\n     > Example:\n     | eve.on(\"mouse\", eatIt)(2);\n     | eve.on(\"mouse\", scream);\n     | eve.on(\"mouse\", catchIt)(1);\n     * This will ensure that `catchIt` function will be called before `eatIt`.\n     *\n     * If you want to put your handler before non-indexed handlers, specify a negative value.\n     * Note: I assume most of the time you don’t need to worry about z-index, but it’s nice to have this feature “just in case”.\n    \\*/\n    eve.on = function (name, f) {\n        if (typeof f != \"function\") {\n            return function () {};\n        }\n        var names = isArray(name) ? isArray(name[0]) ? name : [name] : Str(name).split(comaseparator);\n        for (var i = 0, ii = names.length; i < ii; i++) {\n            (function (name) {\n                var names = isArray(name) ? name : Str(name).split(separator),\n                    e = events,\n                    exist;\n                for (var i = 0, ii = names.length; i < ii; i++) {\n                    e = e.n;\n                    e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});\n                }\n                e.f = e.f || [];\n                for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {\n                    exist = true;\n                    break;\n                }\n                !exist && e.f.push(f);\n            }(names[i]));\n        }\n        return function (zIndex) {\n            if (+zIndex == +zIndex) {\n                f.zIndex = +zIndex;\n            }\n        };\n    };\n    /*\\\n     * eve.f\n     [ method ]\n     **\n     * Returns function that will fire given event with optional arguments.\n     * Arguments that will be passed to the result function will be also\n     * concated to the list of final arguments.\n     | el.onclick = eve.f(\"click\", 1, 2);\n     | eve.on(\"click\", function (a, b, c) {\n     |     console.log(a, b, c); // 1, 2, [event object]\n     | });\n     - event (string) event name\n     - varargs (…) and any other arguments\n     = (function) possible event handler function\n    \\*/\n    eve.f = function (event) {\n        var attrs = [].slice.call(arguments, 1);\n        return function () {\n            eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));\n        };\n    };\n    /*\\\n     * eve.stop\n     [ method ]\n     **\n     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.\n    \\*/\n    eve.stop = function () {\n        stop = 1;\n    };\n    /*\\\n     * eve.nt\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     - subname (string) #optional subname of the event\n     **\n     = (string) name of the event, if `subname` is not specified\n     * or\n     = (boolean) `true`, if current event’s name contains `subname`\n    \\*/\n    eve.nt = function (subname) {\n        var cur = isArray(current_event) ? current_event.join(\".\") : current_event;\n        if (subname) {\n            return new RegExp(\"(?:\\\\.|\\\\/|^)\" + subname + \"(?:\\\\.|\\\\/|$)\").test(cur);\n        }\n        return cur;\n    };\n    /*\\\n     * eve.nts\n     [ method ]\n     **\n     * Could be used inside event handler to figure out actual name of the event.\n     **\n     **\n     = (array) names of the event\n    \\*/\n    eve.nts = function () {\n        return isArray(current_event) ? current_event : current_event.split(separator);\n    };\n    /*\\\n     * eve.off\n     [ method ]\n     **\n     * Removes given function from the list of event listeners assigned to given name.\n     * If no arguments specified all the events will be cleared.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n    \\*/\n    /*\\\n     * eve.unbind\n     [ method ]\n     **\n     * See @eve.off\n    \\*/\n    eve.off = eve.unbind = function (name, f) {\n        if (!name) {\n            eve._events = events = {n: {}};\n            return;\n        }\n        var names = isArray(name) ? isArray(name[0]) ? name : [name] : Str(name).split(comaseparator);\n        if (names.length > 1) {\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                eve.off(names[i], f);\n            }\n            return;\n        }\n        names = isArray(name) ? name : Str(name).split(separator);\n        var e,\n            key,\n            splice,\n            i, ii, j, jj,\n            cur = [events],\n            inodes = [];\n        for (i = 0, ii = names.length; i < ii; i++) {\n            for (j = 0; j < cur.length; j += splice.length - 2) {\n                splice = [j, 1];\n                e = cur[j].n;\n                if (names[i] != wildcard) {\n                    if (e[names[i]]) {\n                        splice.push(e[names[i]]);\n                        inodes.unshift({\n                            n: e,\n                            name: names[i]\n                        });\n                    }\n                } else {\n                    for (key in e) if (e[has](key)) {\n                        splice.push(e[key]);\n                        inodes.unshift({\n                            n: e,\n                            name: key\n                        });\n                    }\n                }\n                cur.splice.apply(cur, splice);\n            }\n        }\n        for (i = 0, ii = cur.length; i < ii; i++) {\n            e = cur[i];\n            while (e.n) {\n                if (f) {\n                    if (e.f) {\n                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {\n                            e.f.splice(j, 1);\n                            break;\n                        }\n                        !e.f.length && delete e.f;\n                    }\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        var funcs = e.n[key].f;\n                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {\n                            funcs.splice(j, 1);\n                            break;\n                        }\n                        !funcs.length && delete e.n[key].f;\n                    }\n                } else {\n                    delete e.f;\n                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {\n                        delete e.n[key].f;\n                    }\n                }\n                e = e.n;\n            }\n        }\n        // prune inner nodes in path\n        prune: for (i = 0, ii = inodes.length; i < ii; i++) {\n            e = inodes[i];\n            for (key in e.n[e.name].f) {\n                // not empty (has listeners)\n                continue prune;\n            }\n            for (key in e.n[e.name].n) {\n                // not empty (has children)\n                continue prune;\n            }\n            // is empty\n            delete e.n[e.name];\n        }\n    };\n    /*\\\n     * eve.once\n     [ method ]\n     **\n     * Binds given event handler with a given name to only run once then unbind itself.\n     | eve.once(\"login\", f);\n     | eve(\"login\"); // triggers f\n     | eve(\"login\"); // no listeners\n     * Use @eve to trigger the listener.\n     **\n     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards\n     - f (function) event handler function\n     **\n     = (function) same return function as @eve.on\n    \\*/\n    eve.once = function (name, f) {\n        var f2 = function () {\n            eve.off(name, f2);\n            return f.apply(this, arguments);\n        };\n        return eve.on(name, f2);\n    };\n    /*\\\n     * eve.version\n     [ property (string) ]\n     **\n     * Current version of the library.\n    \\*/\n    eve.version = version;\n    eve.toString = function () {\n        return \"You are running Eve \" + version;\n    };\n    glob.eve = eve;\n    // typeof module != \"undefined\" && module.exports ? module.exports = eve : typeof define === \"function\" && define.amd ? define(\"eve\", [], function() { return eve; }) : glob.eve = eve;\n    return eve;\n})(typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : null);\n\n\n\n// WEBPACK FOOTER //\n// ./source/eve/eve.js","/**!\n* RedRaphael 1.0.0 - JavaScript Vector Library SVG Module\n* Copyright (c) 2012-2013 FusionCharts Technologies <http://www.fusioncharts.com>\n*\n* Raphael 2.1.0 - JavaScript Vector Library SVG Module\n* Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n* Copyright © 2008-2012 Sencha Labs <http://sencha.com>\n*\n* Licensed under the MIT license.\n*/\n// Define _window as window object in case of indivual file inclusion.\n\nimport R from './raphael.core';\n\n\nif (R.svg) {\n    var has = \"hasOwnProperty\",\n        Str = String,\n        toFloat = parseFloat,\n        toInt = parseInt,\n        math = Math,\n        mmax = math.max,\n        abs = math.abs,\n        pow = math.pow,\n        sqrt = math.sqrt,\n        separator = /[, ]+/,\n        arrayShift = Array.prototype.shift,\n        zeroStrokeFix = !!(/AppleWebKit/.test(R._g.win.navigator.userAgent) &&\n                (!/Chrome/.test(R._g.win.navigator.userAgent) ||\n                R._g.win.navigator.appVersion.match(/Chrome\\/(\\d+)\\./)[1] < 29)),\n        eve = R.eve,\n        E = \"\",\n        S = \" \",\n        xlink = \"http://www.w3.org/1999/xlink\",\n        markers = {\n            block: \"M5,0 0,2.5 5,5z\",\n            classic: \"M5,0 0,2.5 5,5 3.5,3 3.5,2z\",\n            diamond: \"M2.5,0 5,2.5 2.5,5 0,2.5z\",\n            open: \"M6,1 1,3.5 6,6\",\n            oval: \"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z\"\n        },\n        markerCounter = {},\n        updateReferenceUrl = function () {\n            return R._url = R._g.win.location.href.replace(/#.*?$/, E);\n        },\n        paperproto = R.fn,\n        serializeArgs = R._serializeArgs;\n\n    /*\\\n     * Paper.group\n     [ method ]\n     **\n     * Creates a group\n     **\n     > Parameters\n     **\n     - id (number) id of the group\n     = (object) Raphaël element object with type “group”\n     **\n     > Usage\n     | var g = paper.group();\n    \\*/\n    paperproto.group = function () { // id\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            out = R._engine.group(paper, args[0], group);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Raphaël element object with type “circle”\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function () { // x, y, r\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n                // \"cx\", 0,\n                // \"cy\", 0,\n                // \"r\", 0,\n                // \"fill\", none,\n                // \"stroke\", black),\n            out = R._engine.circle(paper, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Raphaël element object with type “rect”\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n                // \"x\", 0,\n                // \"y\", 0,\n                // \"width\", 0,\n                // \"height\", 0,\n                // \"r\", 0,\n                // \"fill\", none,\n                // \"stroke\", black),\n            out = R._engine.rect(paper, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Raphaël element object with type “ellipse”\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n                // \"x\", 0,\n                // \"y\", 0,\n                // \"rx\", 0,\n                // \"ry\", 0,\n                // \"fill\", none,\n                // \"stroke\", black),\n            out = R._engine.ellipse(this, attrs, group);\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | \"M10,20L30,40\"\n     * Here we can see two commands: “M”, with arguments `(10, 20)` and “L” with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case—relative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * “Catmull-Rom curveto” is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: “M10,10R…z”. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path(\"M10 10L90 90\");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            paperConfig = paper.config,\n            capStyle = (paperConfig && paperConfig[\"stroke-linecap\"]) || \"butt\",\n            attrs = serializeArgs(args),\n                // \"path\", E,\n                // \"fill\", none,\n                // \"stroke\", black,\n                // \"stroke-linecap\", capStyle),\n            out = R._engine.path(paper, attrs, group);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Raphaël element object with type “image”\n     **\n     > Usage\n     | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n                // \"src\", \"\",\n                // \"x\", 0,\n                // \"y\", 0,\n                // \"width\", 0,\n                // \"height\", 0)\n            out = R._engine.image(paper, attrs, group);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put “\\n” in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Raphaël element object with type “text”\n     **\n     > Usage\n     | var t = paper.text(50, 50, \"Raphaël\\nkicks\\nbutt!\");\n    \\*/\n    paperproto.text = function() {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n                // \"x\", 0,\n                // \"y\", 0,\n                // \"text\", E,\n                // \"stroke\", none,\n                // \"fill\", black,\n                // \"text-anchor\", \"middle\",\n                // \"vertical-align\", \"middle\"),\n\n            out = R._engine.text(paper, attrs, group, args[1]);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    R.cachedFontHeight = {};\n\n    R.toString = function() {\n        return  \"Your browser supports SVG.\\nYou are running Rapha\\xebl \" + this.version;\n    };\n\n    // Code commented as resources will now be referenced using relative urls.\n    // @todo Remove once we have acertained that there are no issues in any environment.\n    // Automatic gradient and other reference update on state change\n    // R._url = (/msie/i.test(navigator.userAgent) && !window.opera) ?\n    //     E : updateReferenceUrl();\n    // if (R._url && R._g.win.history.pushState) {\n    //     R._g.win.history.pushState = (function () {\n    //         var fn = R._g.win.history.pushState;\n    //         return function () {\n    //             var ret = fn.apply(R._g.win.history, arguments);\n    //             return updateReferenceUrl(), ret;\n    //         };\n    //     }());\n    //     R._g.win.addEventListener(\"popstate\", updateReferenceUrl, false);\n    // }\n    R._url = E;\n\n    var updateGradientReference = function (element, newGradient) {\n        var gradient = element.gradient;\n\n        if (gradient) {\n            if (gradient === newGradient) {\n                return; // no change\n            }\n            // else gradient is specified and it is not same as newGradient, implying a dereference\n            gradient.refCount--;\n            if (!gradient.refCount) {\n                gradient.parentNode.removeChild(gradient);\n            }\n            delete element.gradient;\n        }\n\n        if (newGradient) { // add new gradient\n            element.gradient = newGradient;\n            newGradient.refCount++;\n        }\n    };\n\n    var $ = R._createNode = function(el, attr) {\n        if (attr) {\n            if (typeof el == \"string\") {\n                el = $(el);\n            }\n            for (var key in attr)\n                if (attr[has](key)) {\n                    if (key.substring(0, 6) == \"xlink:\") {\n                        el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));\n                    } else {\n                        el.setAttribute(key, Str(attr[key]));\n                    }\n                }\n        } else {\n            el = R._g.doc.createElementNS(\"http://www.w3.org/2000/svg\", el);\n        }\n        return el;\n    },\n    gradientUnitNames = {\n        userSpaceOnUse: 'userSpaceOnUse',\n        objectBoundingBox: 'objectBoundingBox'\n    },\n    gradientSpreadNames = {\n        pad: 'pad',\n        redlect: 'reflect',\n        repeat: 'repeat'\n    },\n    addGradientFill = function(element, gradient) {\n        if (!element.paper || !element.paper.defs) {\n            return 0;\n        }\n\n        var type = \"linear\",\n            SVG = element.paper,\n            id = R.getElementID((SVG.id + '-' + gradient).replace(/[\\(\\)\\s%:,\\xb0#]/g, \"_\")),\n            fx = .5, fy = .5, r, cx, cy, units, spread,\n            o = element.node,\n            s = o.style,\n            el = R._g.doc.getElementById(id);\n\n        if (!el) {\n            gradient = Str(gradient).replace(R._radial_gradient, function(all, opts) {\n                type = \"radial\";\n                opts = opts && opts.split(',') || [];\n                units = opts[5];\n                spread = opts[6];\n\n                var _fx = opts[0],\n                    _fy = opts[1],\n                    _r = opts[2],\n                    _cx = opts[3],\n                    _cy = opts[4],\n                    shifted = (_fx && _fy),\n                    dir,\n                    sqx;\n\n                if (_r) {\n                    r = /\\%/.test(_r) ? _r : toFloat(_r);\n                }\n\n                if (units === gradientUnitNames.userSpaceOnUse) {\n                    if (shifted) {\n                        fx = _fx;\n                        fy = _fy;\n                    }\n                    if (_cx && _cy) {\n                        cx = _cx;\n                        cy = _cy;\n                        if (!shifted) {\n                            fx = cx;\n                            fy = cy;\n                        }\n                    }\n                    return E;\n                }\n\n                if (shifted) {\n                    fx = toFloat(_fx);\n                    fy = toFloat(_fy);\n                    dir = ((fy > .5) * 2 - 1);\n                    (sqx = pow(fx - .5, 2)) + pow(fy - .5, 2) > .25 &&\n                    (sqx < .25) && (fy = sqrt(.25 - sqx) * dir + .5) &&\n                    fy !== .5 &&\n                    (fy = fy.toFixed(5) - 1e-5 * dir);\n                }\n                if (_cx && _cy) {\n                    cx = toFloat(_cx);\n                    cy = toFloat(_cy);\n                    dir = ((cy > .5) * 2 - 1);\n\n                    (sqx = pow(cx - .5, 2)) + pow(cy - .5, 2) > .25 &&\n                    (sqx < .25) && (cy = sqrt(.25 - sqx) * dir + .5) &&\n                    cy !== .5 &&\n                    (cy = cy.toFixed(5) - 1e-5 * dir);\n\n                    if (!shifted) {\n                        fx = cx;\n                        fy = cy;\n                    }\n                }\n\n                return E;\n            });\n            gradient = gradient.split(/\\s*\\-\\s*/);\n            if (type == \"linear\") {\n                var angle = gradient.shift(),\n                    specs = angle.match(/\\((.*)\\)/),\n                    vector,\n                    max;\n\n                specs = specs && specs[1] && specs[1].split(/\\s*\\,\\s*/);\n                angle = -toFloat(angle);\n                if (isNaN(angle)) {\n                    return null;\n                }\n                if (specs && specs.length) {\n                    if (specs[0] in gradientUnitNames) {\n                        units = specs.shift();\n                        (specs[0] in gradientSpreadNames) &&\n                            (spread = specs.shift());\n                    }\n                    else {\n                        specs[4] && (units = specs[4]);\n                        specs[5] && (spread = specs[5]);\n                    }\n\n                    /** @todo apply angle rotation and validation */\n                    vector = [\n                        specs[0] || \"0%\", specs[1] || \"0%\",\n                        specs[2] || \"100%\", specs[3] || \"0%\"\n                    ];\n                }\n                else {\n                    vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))];\n                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);\n                    vector[2] *= max;\n                    vector[3] *= max;\n                    if (vector[2] < 0) {\n                        vector[0] = -vector[2];\n                        vector[2] = 0;\n                    }\n                    if (vector[3] < 0) {\n                        vector[1] = -vector[3];\n                        vector[3] = 0;\n                    }\n                }\n            }\n            var dots = R._parseDots(gradient);\n            if (!dots) {\n                return null;\n            }\n\n            el = $(type + \"Gradient\", {\n                id: id\n            });\n            el.refCount = 0;\n            (units in gradientUnitNames) &&\n                    el.setAttribute('gradientUnits', Str(units));\n            (spread in gradientSpreadNames) &&\n                    el.setAttribute('spreadMethod', Str(spread));\n            if (type === \"radial\") {\n                (r !== undefined) && el.setAttribute('r', Str(r));\n\n                if (cx !== undefined && cy !== undefined) {\n                    el.setAttribute('cx', Str(cx));\n                    el.setAttribute('cy', Str(cy));\n                }\n                el.setAttribute('fx', Str(fx));\n                el.setAttribute('fy', Str(fy));\n            }\n            else {\n                $(el, {\n                    x1: vector[0],\n                    y1: vector[1],\n                    x2: vector[2],\n                    y2: vector[3]\n                });\n            }\n\n            for (var i = 0, ii = dots.length; i < ii; i++) {\n                el.appendChild($(\"stop\", {\n                    offset: dots[i].offset ? dots[i].offset : i ? \"100%\" : \"0%\",\n                    \"stop-color\": dots[i].color || \"#fff\",\n                    //add stop opacity information\n                    \"stop-opacity\": dots[i].opacity === undefined ? 1 : dots[i].opacity\n                }));\n            }\n            SVG.defs.appendChild(el);\n        }\n\n        updateGradientReference(element, el);\n\n        $(o, {\n            fill: \"url('\" + R._url + \"#\" + id + \"')\",\n            \"fill-opacity\": 1\n        });\n\n        s.fill = E;\n        s.fillOpacity = 1;\n        return 1;\n    },\n    updatePosition = function(o) {\n        var bbox = o.getBBox(1);\n        $(o.pattern, {\n            patternTransform: o.matrix.invert() + \" translate(\" + bbox.x + \",\" + bbox.y + \")\"\n        });\n    },\n    addArrow = function(o, value, isEnd) {\n        if (o.type == \"path\") {\n            var values = Str(value).toLowerCase().split(\"-\"),\n            p = o.paper,\n            se = isEnd ? \"end\" : \"start\",\n            node = o.node,\n            attrs = o.attrs,\n            stroke = attrs[\"stroke-width\"],\n            i = values.length,\n            type = \"classic\",\n            from,\n            to,\n            dx,\n            refX,\n            attr,\n            w = 3,\n            h = 3,\n            t = 5;\n            while (i--) {\n                switch (values[i]) {\n                    case \"block\":\n                    case \"classic\":\n                    case \"oval\":\n                    case \"diamond\":\n                    case \"open\":\n                    case \"none\":\n                        type = values[i];\n                        break;\n                    case \"wide\":\n                        h = 5;\n                        break;\n                    case \"narrow\":\n                        h = 2;\n                        break;\n                    case \"long\":\n                        w = 5;\n                        break;\n                    case \"short\":\n                        w = 2;\n                        break;\n                }\n            }\n            if (type == \"open\") {\n                w += 2;\n                h += 2;\n                t += 2;\n                dx = 1;\n                refX = isEnd ? 4 : 1;\n                attr = {\n                    fill: \"none\",\n                    stroke: attrs.stroke\n                };\n            } else {\n                refX = dx = w / 2;\n                attr = {\n                    fill: attrs.stroke,\n                    stroke: \"none\"\n                };\n            }\n            if (o._.arrows) {\n                if (isEnd) {\n                    o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;\n                    o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;\n                } else {\n                    o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;\n                    o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;\n                }\n            } else {\n                o._.arrows = {};\n            }\n            if (type != \"none\") {\n                var pathId = \"raphael-marker-\" + type,\n                markerId = \"raphael-marker-\" + se + type + w + h + \"-obj\" + o.id;\n                if (!R._g.doc.getElementById(pathId)) {\n                    p.defs.appendChild($($(\"path\"), {\n                        \"stroke-linecap\": \"round\",\n                        d: markers[type],\n                        id: pathId\n                    }));\n                    markerCounter[pathId] = 1;\n                } else {\n                    markerCounter[pathId]++;\n                }\n                var marker = R._g.doc.getElementById(markerId),\n                use;\n                if (!marker) {\n                    marker = $($(\"marker\"), {\n                        id: markerId,\n                        markerHeight: h,\n                        markerWidth: w,\n                        orient: \"auto\",\n                        refX: refX,\n                        refY: h / 2\n                    });\n                    use = $($(\"use\"), {\n                        \"xlink:href\": \"#\" + pathId,\n                        transform: (isEnd ? \"rotate(180 \" + w / 2 + \" \" + h / 2 + \") \" : E) + \"scale(\" + w / t + \",\" + h / t + \")\",\n                        \"stroke-width\": (1 / ((w / t + h / t) / 2)).toFixed(4)\n                    });\n                    marker.appendChild(use);\n                    p.defs.appendChild(marker);\n                    markerCounter[markerId] = 1;\n                } else {\n                    markerCounter[markerId]++;\n                    use = marker.getElementsByTagName(\"use\")[0];\n                }\n                $(use, attr);\n                var delta = dx * (type != \"diamond\" && type != \"oval\");\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - delta * stroke;\n                } else {\n                    from = delta * stroke;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                attr = {};\n                attr[\"marker-\" + se] = \"url('\" + R._url + \"#\" + markerId + \"')\";\n                if (to || from) {\n                    attr.d = R.getSubpath(attrs.path, from, to);\n                }\n                $(node, attr);\n                o._.arrows[se + \"Path\"] = pathId;\n                o._.arrows[se + \"Marker\"] = markerId;\n                o._.arrows[se + \"dx\"] = delta;\n                o._.arrows[se + \"Type\"] = type;\n                o._.arrows[se + \"String\"] = value;\n            } else {\n                if (isEnd) {\n                    from = o._.arrows.startdx * stroke || 0;\n                    to = R.getTotalLength(attrs.path) - from;\n                } else {\n                    from = 0;\n                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);\n                }\n                o._.arrows[se + \"Path\"] && $(node, {\n                    d: R.getSubpath(attrs.path, from, to)\n                });\n                delete o._.arrows[se + \"Path\"];\n                delete o._.arrows[se + \"Marker\"];\n                delete o._.arrows[se + \"dx\"];\n                delete o._.arrows[se + \"Type\"];\n                delete o._.arrows[se + \"String\"];\n            }\n            for (attr in markerCounter)\n                if (markerCounter[has](attr) && !markerCounter[attr]) {\n                    var item = R._g.doc.getElementById(attr);\n                    item && item.parentNode.removeChild(item);\n                }\n        }\n    },\n    dasharray = {\n        // In Firefox 37.0.1 the value of \"stroke-dasharray\" attribute `0` make the stroke/border invisible.\n        // The actual issue is setting `none` as the value of `stroke-dasharray` attribute\n        // redraphael internally changes the \"none\" value to \"0\", thus the stroke/border becomes invisible\n        // To fix this issue now instead of setting the value as `0` for `stroke-dasharray` attribute\n        // now using `none` string as none is a w3c standard value for stroke-dasharray\n        \"\": [\"none\"],\n        \"none\": [\"none\"],\n        \"-\": [3, 1],\n        \".\": [1, 1],\n        \"-.\": [3, 1, 1, 1],\n        \"-..\": [3, 1, 1, 1, 1, 1],\n        \". \": [1, 3],\n        \"- \": [4, 3],\n        \"--\": [8, 3],\n        \"- .\": [4, 3, 1, 3],\n        \"--.\": [8, 3, 1, 3],\n        \"--..\": [8, 3, 1, 3, 1, 3]\n    },\n    addDashes = function(o, value, params) {\n        var predefValue = dasharray[Str(value).toLowerCase()],\n            calculatedValues,\n            width,\n            butt,\n            i,\n            l,\n            widthFactor;\n\n        value = predefValue || ((value !== undefined) && [].concat(value));\n        if (value) {\n\n            width = o.attrs[\"stroke-width\"] || 1;\n            butt = {\n                round: width,\n                square: width,\n                butt: 0\n            }[params[\"stroke-linecap\"] || o.attrs[\"stroke-linecap\"]] || 0;\n            l = i = value.length;\n            widthFactor = predefValue ? width : 1;\n\n            if (value[0] == 'none') {\n                calculatedValues = value;\n            }\n            else {\n                calculatedValues = [];\n                while (i--) {\n                    calculatedValues[i] = (value[i] * widthFactor + ((i % 2) ? 1 : -1) * butt);\n                    calculatedValues[i] <= 0 && (calculatedValues[i] = 0.01 + (width <= 1 ? butt : 0));\n                    if (isNaN(calculatedValues[i])) {\n                       calculatedValues[i] = 0;\n                   }\n                }\n            }\n\n            if (R.is(value, 'array')) {\n                $(o.node, {\n                    \"stroke-dasharray\": calculatedValues.join(\",\")\n                });\n            }\n        }\n    },\n\n    applyCustomAttributes = function (o, attrs) {\n        for (var key in attrs) {\n            eve(\"raphael.attr.\" + key + \".\" + o.id, o, attrs[key], key);\n            o.ca[key] && o.attr(key, attrs[key]);\n        }\n    },\n\n    setFillAndStroke = R._setFillAndStroke = function(o, params, group) {\n        if (!o.paper.canvas) {\n            return;\n        }\n        var node = o.node,\n            attrs = o.attrs,\n            paper = o.paper,\n            s = node.style,\n            vis = s.visibility,\n            i,\n            l;\n        // Convert all the &lt; and &gt; to < and > and if there is any <br/> tag in between &lt; and &gt;\n        // then converting them into <<br/> and ><br/> respectively.\n        if (params && params.text && params.text.replace) {\n            params.text = params.text.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\")\n                .replace(/&<br\\/>lt;|&l<br\\/>t;|&lt<br\\/>;/g, \"<<br/>\")\n                .replace(/&<br\\/>gt;|&g<br\\/>t;|&gt<br\\/>;/g, \"><br/>\");\n        }\n        s.visibility = \"hidden\";\n        if (o.type === \"image\") {\n            LoadRefImage(o, params);\n        }\n        for (var att in params) {\n            if (params[has](att)) {\n                if (!R._availableAttrs[has](att)) {\n                    continue;\n                }\n                var value = params[att];\n                attrs[att] = value;\n                switch (att) {\n                    case \"blur\":\n                        o.blur(value);\n                        break;\n                    case \"href\":\n                    case \"title\":\n                    case \"target\":\n                        var pn = node.parentNode;\n                        if (pn.tagName.toLowerCase() != \"a\") {\n                            if (value == E) { break; }\n                            var hl = $(\"a\");\n                            hl.raphael = true;\n                            hl.raphaelid = node.raphaelid;\n                            pn.insertBefore(hl, node);\n                            hl.appendChild(node);\n                            pn = hl;\n                        }\n                        if (att == \"target\") {\n                            pn.setAttributeNS(xlink, \"show\", value == \"blank\" ? \"new\" : value);\n                        } else {\n                            pn.setAttributeNS(xlink, att, value);\n                        }\n                        node.titleNode = pn;\n                        break;\n                    case \"cursor\":\n                        s.cursor = value;\n                        break;\n                    case \"transform\":\n                        o.transform(value);\n                        break;\n                    case \"rotation\":\n                        if (R.is(value, \"array\")) {\n                            o.rotate.apply(o, value);\n                        }\n                        else {\n                            o.rotate(value);\n                        }\n                        break;\n                    case \"arrow-start\":\n                        addArrow(o, value);\n                        break;\n                    case \"arrow-end\":\n                        addArrow(o, value, 1);\n                        break;\n                    case \"clip-path\":\n                        var pathClip = true;\n                    case \"clip-rect\":\n                        var rect = !pathClip && Str(value).split(separator);\n                        o._.clipispath = !!pathClip;\n                        if (pathClip || rect.length == 4) {\n                            o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);\n                            var el = $(\"clipPath\"),\n                            rc = $(pathClip ? \"path\" : \"rect\");\n                            el.id = R.getElementID(R.createUUID());\n                            $(rc, pathClip ? {\n                                d: value ? attrs['clip-path'] = R._pathToAbsolute(value) : R._availableAttrs.path,\n                                fill: 'none'\n                            } : {\n                                x: rect[0],\n                                y: rect[1],\n                                width: rect[2],\n                                height: rect[3],\n                                transform: o.matrix.invert()\n                            });\n                            el.appendChild(rc);\n                            paper.defs.appendChild(el);\n                            $(node, {\n                                \"clip-path\": \"url('\" + R._url +\"#\" + el.id + \"')\"\n                            });\n                            o.clip = rc;\n                        }\n                        if (!value) {\n                            var path = node.getAttribute(\"clip-path\");\n                            if (path) {\n                                var clip = R._g.doc.getElementById(path.replace(/(^url\\(#|\\)$)/g, E));\n                                clip && clip.parentNode.removeChild(clip);\n                                $(node, {\n                                    \"clip-path\": E\n                                });\n                                document.documentMode === 11 && node.removeAttribute('clip-path');\n                                delete o.clip;\n                            }\n                        }\n                        break;\n                    case \"path\":\n                        if (o.type == \"path\") {\n                            $(node, {\n                                d: value ? attrs.path = R._pathToAbsolute(value) : R._availableAttrs.path\n                            });\n                            o._.dirty = 1;\n                            if (o._.arrows) {\n                                \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                                \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                            }\n                        }\n                        break;\n                    case \"width\":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fx) {\n                            att = \"x\";\n                            value = attrs.x;\n                        } else {\n                            break;\n                        }\n                    case \"x\":\n                        if (attrs.fx) {\n                            value = -attrs.x - (attrs.width || 0);\n                        }\n                    case \"rx\":\n                        if (att == \"rx\" && o.type == \"rect\") {\n                            break;\n                        }\n                    case \"cx\":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case \"height\":\n                        node.setAttribute(att, value);\n                        o._.dirty = 1;\n                        if (attrs.fy) {\n                            att = \"y\";\n                            value = attrs.y;\n                        } else {\n                            break;\n                        }\n                    case \"y\":\n                        if (attrs.fy) {\n                            value = -attrs.y - (attrs.height || 0);\n                        }\n                    case \"ry\":\n                        if (att == \"ry\" && o.type == \"rect\") {\n                            break;\n                        }\n                    case \"cy\":\n                        node.setAttribute(att, value);\n                        o.pattern && updatePosition(o);\n                        o._.dirty = 1;\n                        break;\n                    case \"r\":\n                        if (o.type == \"rect\") {\n                            $(node, {\n                                rx: value,\n                                ry: value\n                            });\n                        } else {\n                            node.setAttribute(att, value);\n                        }\n                        o._.dirty = 1;\n                        break;\n                    case \"src\":\n                        if (o.type == \"image\") {\n                            node.setAttributeNS(xlink, \"href\", value);\n                        }\n                        break;\n                    case \"stroke-width\":\n                        if (o._.sx != 1 || o._.sy != 1) {\n                            value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;\n                        }\n                        if (paper._vbSize) {\n                            value *= paper._vbSize;\n                        }\n                        if (zeroStrokeFix && value === 0) {\n                            value = 0.000001;\n                        }\n                        node.setAttribute(att, value);\n                        if (attrs[\"stroke-dasharray\"]) {\n                            addDashes(o, attrs[\"stroke-dasharray\"], params);\n                        }\n                        if (o._.arrows) {\n                            \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                            \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                        }\n                        break;\n                    case \"stroke-dasharray\":\n                        addDashes(o, value, params);\n                        break;\n                    case \"fill\":\n                        var isURL = Str(value).match(R._ISURL);\n                        if (isURL) {\n                            el = $(\"pattern\");\n                            var ig = $(\"image\");\n                            el.id = R.getElementID(R.createUUID());\n                            $(el, {\n                                x: 0,\n                                y: 0,\n                                patternUnits: \"userSpaceOnUse\",\n                                height: 1,\n                                width: 1\n                            });\n                            $(ig, {\n                                x: 0,\n                                y: 0,\n                                \"xlink:href\": isURL[1]\n                            });\n                            el.appendChild(ig);\n\n                            (function(el) {\n                                R._preload(isURL[1], function() {\n                                    var w = this.offsetWidth,\n                                    h = this.offsetHeight;\n                                    $(el, {\n                                        width: w,\n                                        height: h\n                                    });\n                                    $(ig, {\n                                        width: w,\n                                        height: h\n                                    });\n                                    paper.safari();\n                                });\n                            })(el);\n                            paper.defs.appendChild(el);\n                            s.fill = \"url('\" + R._url + \"#\" + el.id + \"')\";\n                            $(node, {\n                                fill: s.fill\n                            });\n\n                            o.pattern = el;\n                            o.pattern && updatePosition(o);\n                            break;\n                        }\n                        var clr = R.getRGB(value);\n                        if (!clr.error) {\n                            delete params.gradient;\n                            delete attrs.gradient;\n                            // !R.is(attrs.opacity, \"undefined\") &&\n                            //     R.is(params.opacity, \"undefined\") &&\n                            //     $(node, {\n                            //         opacity: attrs.opacity\n                            //     });\n                            !R.is(attrs[\"fill-opacity\"], \"undefined\") &&\n                                R.is(params[\"fill-opacity\"], \"undefined\") &&\n                                $(node, {\n                                    \"fill-opacity\": attrs[\"fill-opacity\"]\n                                });\n                            o.gradient && updateGradientReference(o);\n                        }\n                        else if ((o.type == \"circle\" || o.type == \"ellipse\" || Str(value).charAt() != \"r\") && addGradientFill(o, value)) {\n                            if (\"opacity\" in attrs || \"fill-opacity\" in attrs) {\n                                var gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\(#|\\)$/g, E));\n                                if (gradient) {\n                                    var stops = gradient.getElementsByTagName(\"stop\");\n                                    $(stops[stops.length - 1], {\n                                        \"stop-opacity\": (\"opacity\" in attrs ? attrs.opacity : 1) * (\"fill-opacity\" in attrs ? attrs[\"fill-opacity\"] : 1)\n                                    });\n                                }\n                            }\n                            attrs.gradient = value;\n                            // attrs.fill = \"none\";\n                            s.fill = E;\n                            break;\n                        }\n                        if (clr[has](\"opacity\")) {\n                            $(node, {\n                                \"fill-opacity\": (s.fillOpacity =\n                                    (clr.opacity > 1 ? clr.opacity / 100 : clr.opacity))\n                            });\n                            o._.fillOpacityDirty = true;\n                        }\n                        else if (o._.fillOpacityDirty && R.is(attrs['fill-opacity'], \"undefined\") &&\n                                R.is(params[\"fill-opacity\"], \"undefined\")) {\n                            node.removeAttribute('fill-opacity');\n                            s.fillOpacity = E;\n                            delete o._.fillOpacityDirty;\n                        }\n                    case \"stroke\":\n                        clr = R.getRGB(value);\n                        node.setAttribute(att, clr.hex);\n                        s[att] = clr.hex;\n                        if (att == \"stroke\") { // remove stroke opacity when stroke is set to none\n                            if (clr[has](\"opacity\")) {\n                                $(node, {\n                                    \"stroke-opacity\": (s.strokeOpacity =\n                                        (clr.opacity > 1 ? clr.opacity / 100 : clr.opacity))\n                                });\n                                o._.strokeOpacityDirty = true;\n                            }\n                            else if (o._.strokeOpacityDirty && R.is(attrs['stroke-opacity'], \"undefined\") &&\n                                    R.is(params[\"stroke-opacity\"], \"undefined\")) {\n                                node.removeAttribute('stroke-opacity');\n                                s.strokeOpacity = E;\n                                delete o._.strokeOpacityDirty;\n                            }\n                            if (o._.arrows) {\n                                \"startString\" in o._.arrows && addArrow(o, o._.arrows.startString);\n                                \"endString\" in o._.arrows && addArrow(o, o._.arrows.endString, 1);\n                            }\n                        }\n                        break;\n                    case \"gradient\":\n                        (o.type == \"circle\" || o.type == \"ellipse\" || Str(value).charAt() != \"r\") && addGradientFill(o, value);\n                        break;\n                    case 'line-height': // do not apply\n                    case 'vertical-align': // do not apply\n                        break;\n                    case \"visibility\":\n                        value === 'hidden' ? o.hide() : o.show();\n                        break;\n                    case \"opacity\":\n                        // if (attrs.gradient && !attrs[has](\"stroke-opacity\")) {\n                        //     $(node, {\n                        //         \"stroke-opacity\": value > 1 ? value / 100 : value\n                        //     });\n                        // }\n                        value = value > 1 ? value / 100 : value;\n                        $(node, {\n                            \"opacity\": value\n                        });\n                        s.opacity = value;\n                        break;\n                    // fall\n                    case \"fill-opacity\":\n                        // if (attrs.gradient) {\n                        //     gradient = R._g.doc.getElementById(node.getAttribute(\"fill\").replace(/^url\\([\\'\\\"]#|[\\'\\\"]\\)$/g, E));\n                        //     if (gradient) {\n                        //         stops = gradient.getElementsByTagName(\"stop\");\n                        //         l = stops.length;\n                        //         for (i = 0; i < l; i += 1) {\n                        //           $(stops[i], {\n                        //               \"stop-opacity\": value\n                        //           });\n                        //         }\n                        //     }\n                        //     break;\n                        // }\n                        value = value > 1 ? value / 100 : value;\n                        $(node, {\n                            \"fill-opacity\": value\n                        });\n                        s.fillOpacity = value;\n                        break;\n                    default:\n                        att == \"font-size\" && (value = toInt(value, 10) + \"px\");\n                        var cssrule = att.replace(/(\\-.)/g, function(w) {\n                            return w.substring(1).toUpperCase();\n                        });\n                        s[cssrule] = value;\n                        o._.dirty = 1;\n                        node.setAttribute(att, value);\n                        break;\n                }\n            }\n        }\n        (o.type === 'text' && !params[\"_do-not-tune\"]) && tuneText(o, params, group);\n        s.visibility = vis;\n    },\n    /*\n     * Keeps the follower element in sync with the leaders.\n     * First and second arguments represents the context(element) and the\n     name of the callBack function respectively.\n     * The callBack is invoked for indivual follower Element with the rest of\n     arguments.\n    */\n    updateFollowers = R._updateFollowers = function () {\n        var i,\n            ii,\n            followerElem,\n            args = arguments,\n            o = arrayShift.call(args),\n            fnName = arrayShift.call(args);\n        for (i = 0, ii = o.followers.length; i < ii; i++) {\n            followerElem = o.followers[i].el;\n            followerElem[fnName].apply(followerElem, args);\n        }\n    },\n    leading = 1.2,\n    tuneText = function(el, params, group) {\n        var a = el.attrs,\n            node,\n            computedStyle,\n            fontSize,\n            lineHeight,\n            valign,\n            direction,\n            valign,\n            isIE;\n\n        if (!(params[has](\"text\") || a.text) || !(params[has](\"x\") || a.x) || !(params[has](\"y\") || a.y) ||\n            (el.type != \"text\" || !(params[has](\"font\") ||  params[has](\"font-size\") || params[has](\"line-height\") ||\n                params[has](\"vertical-align\")))) {\n            return;\n        }\n\n        node = el.node;\n        computedStyle = node.firstChild && R._g.doc.defaultView.getComputedStyle(node.firstChild, E);\n        fontSize = params['fontSize'] || params['font-size'] || a['font-size'] || (group && group.attrs.fontSize);\n        lineHeight = toFloat(params['line-height'] || a['line-height']) || fontSize * leading;\n        actualValign = a[has](\"vertical-align\") ? a[\"vertical-align\"] : \"middle\";\n        direction = params[\"direction\"] || (group && group.attrs.direction) || \"initial\";\n        isIE = /*@cc_on!@*/false || !!document.documentMode;\n        fontFamily = params['fontFamily'] || params['font-family'] || a['font-family'] ||\n            (group && group.attrs.fontFamily) || 'Verdana,sans';\n\n        fontSize = fontSize === undefined ? (lineHeight / 1.2 || 10) :\n            fontSize.toString().replace(/px/, '');\n\n\n        if (isNaN(lineHeight)) {\n            lineHeight = fontSize * leading;\n        }\n\n        if (R.is(params.text, 'array')) {\n            params.text = params.text.join('<br>');\n        }\n\n        valign = actualValign === 'top' ? -0.5 : (actualValign === 'bottom' ? 0.5 : 0);\n\n        if (params[has](\"text\") && (params.text !== a.text || el._textdirty)) {\n            a.text = params.text;\n            while (node.firstChild) {\n                node.removeChild(node.firstChild);\n            }\n            var texts = Str(params.text).split(/\\n|<br\\s*?\\/?>/ig),\n            tspans = [],\n            tspan;\n            for (var i = 0, ii = texts.length; i < ii; i++) {\n                tspan = $(\"tspan\");\n                if (i) {\n                    $(tspan, {\n                        dy: lineHeight,\n                        x: a.x\n                    });\n                } else {\n                    $(tspan, {\n                        dy: lineHeight * texts.length * valign,\n                        x: a.x\n                    });\n                }\n                if (!texts[i]) { // preserve blank lines\n                    tspan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\",\n                        \"xml:space\",\"preserve\");\n                    texts[i] = \" \";\n                }\n                tspan.appendChild(R._g.doc.createTextNode(texts[i]));\n                node.appendChild(tspan);\n                tspans[i] = tspan;\n\n                if (!isIE && direction === \"rtl\" && i < ii - 1) {\n                    tspan = $(\"tspan\");\n                    $(tspan, {\n                        visibility: \"hidden\",\n                        \"font-size\": \"0px\"\n                    });\n                    tspan.appendChild(R._g.doc.createTextNode(\"i\"));\n                    node.appendChild(tspan);\n                }\n            }\n            el._textdirty = false;\n        } else {\n            tspans = node.getElementsByTagName(\"tspan\");\n            var obj,\n                numDummyTspans = 0;\n\n            for (i = 0, ii = tspans.length; i < ii; i++) {\n                tspan = tspans[i];\n                obj = tspan.attributes[0];\n\n                if (obj && (obj.name === \"visibility\" || obj.nodeName === \"visibility\") &&\n                        (obj.value === \"hidden\" || obj.nodeValue === \"hidden\")) {\n                    continue;\n                }\n\n                if (i) {\n                    $(tspan, {\n                        dy: lineHeight,\n                        x: a.x\n                    });\n                } else {\n                    obj = tspans[1] && tspans[1].attributes[0];\n                    if (obj && (obj.name === \"visibility\" || obj.nodeName === \"visibility\") &&\n                            (obj.value === \"hidden\" || obj.nodeValue === \"hidden\")) {\n                        numDummyTspans = math.floor(tspans.length * 0.5);\n                    }\n\n                    $(tspans[0], {\n                        dy: lineHeight * (tspans.length - numDummyTspans) * valign,\n                        x: a.x\n                    });\n                }\n            }\n        }\n        $(node, {\n            x: a.x,\n            y: a.y\n        });\n        el._.dirty = 1;\n        var bb = el._getCustomBBox(fontFamily, fontSize + 'px', actualValign, i),\n        dif = bb.diff;\n\n        dif && R.is(dif, \"finite\") && tspans[0] && $(tspans[0], {\n            dy: dif\n        });\n    },\n    Element = function(node, svg, group/*, dontAppend*/) {\n        var o = this,\n            parent = group || svg;\n\n        /*!dontAppend && */parent.canvas && parent.canvas.appendChild(node);\n\n        o.node = o[0] = node;\n        node.raphael = true;\n        node.raphaelid = o.id = R._oid++;\n\n        o.matrix = R.matrix();\n        o.realPath = null;\n\n        o.attrs = o.attrs || {};\n        o.followers = o.followers || [];\n\n        o.paper = svg;\n        o.ca = o.customAttributes = o.customAttributes ||\n            new svg._CustomAttributes();\n\n        o._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            deg: 0,\n            dx: 0,\n            dy: 0,\n            dirty: 1\n        };\n\n        o.parent = parent;\n        !parent.bottom && (parent.bottom = o);\n\n        o.prev = parent.top;\n        parent.top && (parent.top.next = o);\n        parent.top = o;\n        o.next = null;\n    },\n    elproto = R.el;\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    R._engine.getNode = function (el) {\n        var node = el.node || el[0].node;\n        return node.titleNode || node;\n    };\n    R._engine.getLastNode = function (el) {\n        var node = el.node || el[el.length - 1].node;\n        return node.titleNode || node;\n    };\n\n    elproto.rotate = function(deg, cx, cy) {\n        var o = this,\n            bbox;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'rotate', deg, cx, cy);\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            bbox = o.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n        return o;\n    };\n\n    elproto.scale = function(sx, sy, cx, cy) {\n        var o = this,\n            bbox;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'scale', sx, sy, cx, cy);\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            bbox = o.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n        o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n        return o;\n    };\n\n    elproto.translate = function(dx, dy) {\n        var o = this;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'translate', dx, dy);\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n        return o;\n    };\n\n    elproto.transform = function(tstr) {\n        var o = this,\n            _ = o._,\n            sw;\n\n        if (tstr == null) {\n            return _.transform;\n        }\n        R._extractTransform(o, tstr);\n\n        o.clip && !_.clipispath && $(o.clip, {\n            transform: o.matrix.invert()\n        });\n        o.pattern && updatePosition(o);\n        o.node && $(o.node, {\n            transform: o.matrix\n        });\n\n        sw = o.attrs[has](\"stroke-width\") ? o.attrs[\"stroke-width\"] : 1;\n        o.attr({\n            \"stroke-width\": sw\n        });\n\n        return o;\n    };\n\n    elproto.hide = function() {\n        var o = this;\n        updateFollowers(o, 'hide');\n        !o.removed && o.paper.safari(o.node.style.display = \"none\");\n        return o;\n    };\n\n    elproto.show = function() {\n        var o = this;\n        updateFollowers(o, 'show');\n        !o.removed && o.paper.safari(o.node.style.display = E);\n        return o;\n    };\n\n    elproto.remove = function() {\n        if (this.removed || !this.parent.canvas) {\n            return;\n        }\n\n        var o = this,\n            node = R._engine.getNode(o),\n            paper = o.paper,\n            defs = paper.defs,\n            i;\n\n        paper.__set__ && paper.__set__.exclude(o);\n        eve.unbind(\"raphael.*.*.\" + o.id);\n\n        if (o.gradient && defs) {\n            updateGradientReference(o);\n        }\n        while (i = o.followers.pop()) {\n            i.el.remove();\n        }\n        while (i = o.bottom) {\n            i.remove();\n        }\n\n        if (o._drag) {\n            o.undrag();\n        }\n\n        if (o.events)  {\n            while (i = o.events.pop()) {\n                i.unbind();\n            }\n        }\n\n        o.parent.canvas.contains(node) && o.parent.canvas.removeChild(node);\n        o.removeData();\n        delete paper._elementsById[o.id]; // remove from lookup hash\n        R._tear(o, o.parent);\n\n        for (i in o) {\n            o[i] = typeof o[i] === \"function\" ? R._removedFactory(i) : null;\n        }\n\n        o.removed = true;\n    };\n    /*\n     * Recursively shows the element and stores the visibilties of its parents\n     * in a tree structure for future restoration.\n     * @param el - Element which is to shown recursively\n     * @return Function - Function to restore the old visibility state.\n    */\n    function showRecursively(el) {\n        var origAttrTree = {},\n            currentEl = el,\n            currentNode = origAttrTree,\n            fn = function () {\n                var localEl = el,\n                    localNode = origAttrTree;\n                while (localEl) {\n                    if (localNode._doHide) {\n                        localEl.hide();\n                    }\n                    localEl = localEl.parent;\n                    localNode = localNode.parent;\n                }\n            };\n        while (currentEl) {\n            if (currentEl.node && currentEl.node.style && currentEl.node.style.display === \"none\") {\n                currentEl.show();\n                currentNode._doHide = true;\n            }\n            currentEl = currentEl.parent;\n            currentNode.parent = {};\n            currentNode = currentNode.parent;\n        }\n        return fn;\n    };\n\n    elproto._getCustomBBox = function(fontFamily, fontSize, valign, lines) {\n        var fn,\n            o = this,\n            node = o.node,\n            hide,\n            isText = (o.type === \"text\"),\n            isIE = /*@cc_on!@*/false || !!document.documentMode,\n            cachedFontHeight,\n            txtElem,\n            theText,\n            theMSG,\n            availableFontFamily,\n            availableFontSize,\n            info,\n            randomPos,\n            bboxY,\n            diff,\n            bbox,\n            bboxHeight;\n        if (isIE && isText) {\n            fn = showRecursively(o);\n        }\n        else {\n            if (node.style.display === \"none\") {\n                o.show();\n                hide = true;\n            }\n        }\n\n        if (isText) {\n            cachedFontHeight = R.cachedFontHeight;\n            txtElem = cachedFontHeight.txtElem;\n            availableFontFamily = cachedFontHeight[fontFamily] || (cachedFontHeight[fontFamily] = {});\n            availableFontSize = availableFontFamily[fontSize];\n            randomPos = -100;\n\n            if (!availableFontSize) {\n                if (!txtElem) {\n                    txtElem = cachedFontHeight.txtElem = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n                    txtElem.setAttribute('x', randomPos);\n                    txtElem.setAttribute('y', randomPos);\n\n                    theMSG = document.createTextNode('abcdefhiklmnopqrstuvwxyz');\n                    txtElem.appendChild(theMSG);\n\n                    document.getElementsByTagName('svg')[0].appendChild(txtElem);\n                }\n                txtElem.setAttribute('style', 'font-family :' + fontFamily + '; font-size :' + fontSize);\n\n                bbox = txtElem.getBBox();\n                availableFontFamily[fontSize] = availableFontSize = [];\n                availableFontSize.push(bbox.height);\n                availableFontSize.push(bbox.y);\n            }\n\n            bboxY = availableFontSize[1];\n            bboxHeight = availableFontSize[0];\n            switch (valign) {\n                case \"bottom\":\n                    diff = randomPos - bboxY - bboxHeight * lines;\n                    break;\n                case \"top\":\n                    diff = randomPos - bboxY;\n                    break;\n                default :\n                diff = randomPos - bboxY - bboxHeight/ 2 * lines;\n            };\n\n            bbox = {\n                height : availableFontSize[0],\n                diff : diff\n            }\n        }\n\n        isIE && isText ? fn && fn() : hide && o.hide();\n        return bbox;\n    };\n\n    elproto._getBBox = function() {\n        var fn,\n            o = this,\n            node = o.node,\n            bbox = {},\n            a = o.attrs,\n            align,\n            hide,\n            isText = (o.type === \"text\"),\n            isIE = /*@cc_on!@*/false || !!document.documentMode;\n        if (isIE && isText) {\n            fn = showRecursively(o);\n        }\n        else {\n            if (node.style.display === \"none\") {\n                o.show();\n                hide = true;\n            }\n        }\n\n        try {\n            bbox = node.getBBox();\n            if (isText) {\n                // If bbox does not have x / y, which is possible in certain\n                // environments, we mathematically calculate these values by\n                // using x, y (adjusted using the values of text-anchor, and\n                // vertical-align attributes), of the element along with the\n                // width and height provided by the getBBox().\n                if (bbox.x === undefined) {\n                    bbox.isCalculated = true;\n                    align = a['text-anchor'];\n                    bbox.x = (a.x || 0) - (bbox.width * ((align === \"start\") ?\n                        0 : (align === \"middle\") ? 0.5 : 1));\n                }\n\n                if (bbox.y === undefined) {\n                    bbox.isCalculated = true;\n                    align = a['vertical-align'];\n                    bbox.y = (a.y || 0) - (bbox.height * ((align === \"bottom\") ?\n                        1 : (align === \"middle\") ? 0.5 : 0));\n                }\n            }\n\n        } catch (e) {\n        // Firefox 3.0.x plays badly here\n        } finally {\n            bbox = bbox || {};\n        }\n        isIE && isText ? fn && fn() : hide && o.hide();\n        return bbox;\n    };\n\n    elproto.attr = function(name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs)\n                if (this.attrs[has](a)) {\n                    res[a] = this.attrs[a];\n                }\n            res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            res.visibility = this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n            return res;\n        }\n        if (value == null && R.is(name, \"string\")) {\n            if (name == \"fill\" && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            if (name == \"transform\") {\n                return this._.transform;\n            }\n            if (name == \"visibility\") {\n                return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n            }\n            var names = name.split(separator),\n            out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.ca[name], \"function\")) {\n                    out[name] = this.ca[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (value == null && R.is(name, \"array\")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        if (value != null) {\n            var params = {};\n            params[name] = value;\n        } else if (name != null && R.is(name, \"object\")) {\n            params = name;\n        }\n        if (R.stopEvent !== false) {\n            for (var key in params) {\n                eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key], key);\n            }\n        }\n        var todel = {};\n        for (key in this.ca) {\n            if (this.ca[key] && params[has](key) && R.is(this.ca[key], \"function\") && !this.ca['_invoked' + key]) {\n\n                this.ca['_invoked'+key] = true; // prevent recursion\n                var par = this.ca[key].apply(this, [].concat(params[key]));\n                delete this.ca['_invoked'+key];\n\n                for (var subkey in par) {\n                    if (par[has](subkey)) {\n                         params[subkey] = par[subkey];\n                    }\n                }\n                this.attrs[key] = params[key];\n                if (par === false) {\n                    todel[key] = params[key];\n                    delete params[key];\n                }\n            }\n        }\n\n        setFillAndStroke(this, params);\n\n        var follower;\n        for (i = 0, ii = this.followers.length; i < ii; i++) {\n            follower = this.followers[i];\n            (follower.cb && !follower.cb.call(follower.el, params, this)) ||\n                follower.el.attr(params);\n        }\n\n        for (subkey in todel) {\n            params[subkey] = todel[subkey];\n        }\n        return this;\n    };\n\n    elproto.blur = function(size) {\n        // Experimental. No Safari support. Use it on your own risk.\n        var t = this;\n        if (+size !== 0) {\n            var fltr = $(\"filter\"),\n            blur = $(\"feGaussianBlur\");\n            t.attrs.blur = size;\n            fltr.id = R.getElementID(R.createUUID());\n            $(blur, {\n                stdDeviation: +size || 1.5\n            });\n            fltr.appendChild(blur);\n            t.paper.defs.appendChild(fltr);\n            t._blur = fltr;\n            $(t.node, {\n                filter: \"url('\" + R._url + \"#\" + fltr.id + \"')\"\n            });\n        } else {\n            if (t._blur) {\n                t._blur.parentNode.removeChild(t._blur);\n                delete t._blur;\n                delete t.attrs.blur;\n            }\n            t.node.removeAttribute(\"filter\");\n        }\n    };\n\n    /*\\\n     * Element.on\n     [ method ]\n     **\n     * Bind handler function for a particular event to Element\n     * @param eventType - Type of event\n     * @param handler - Function to be called on the firing of the event\n    \\*/\n    elproto.on = function(eventType, handler) {\n        var elem = this,\n        fn,\n        oldEventType;\n        if (this.removed) {\n            return this;\n        }\n\n        if (eventType === 'dragstart') {\n            this.drag(null, handler);\n            return this;\n        } else if (eventType === 'dragmove') {\n            this.drag(handler);\n            return this;\n        } else if (eventType === 'dragend') {\n            this.drag(null, null, handler);\n            return this;\n        }\n\n        fn = handler;\n        oldEventType = eventType;\n        if (R.supportsTouch) {\n            eventType = R._touchMap[eventType] ||\n                (eventType === 'click' && 'touchstart') || eventType;\n            if (eventType !== oldEventType) {\n                // store the new listeners for removeEventListener\n                if (!elem._tempTouchListeners) {\n                    elem._tempTouchListeners = {};\n                }\n                if (!elem._tempTouchListeners[oldEventType]) {\n                    elem._tempTouchListeners[oldEventType] = [];\n                }\n                fn = function(e) {\n                    e.preventDefault();\n                    handler(e);\n                };\n                elem._tempTouchListeners[oldEventType].push({\n                    oldFn: handler,\n                    newFn: fn,\n                    newEvt: eventType\n                })\n            }\n        }\n        if (this.node.addEventListener) {\n            this.node.addEventListener(eventType, fn);\n        }\n        else {\n            this.node['on'+ eventType] = fn;\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.off\n     [ method ]\n     **\n     * Remove handler function bind to an event of element\n     * @param eventType - Type of event\n     * @param handler - Function to be removed from event\n    \\*/\n    elproto.off = function(eventType, handler) {\n        var elem = this,\n        fn,\n        i,\n        l,\n        oldEventType;\n        if (this.removed) {\n            return this;\n        }\n\n        if (eventType === 'dragstart') {\n            this.undragstart();\n            return this;\n        } else if (eventType === 'dragmove') {\n            this.undragmove();\n            return this;\n        } else if (eventType === 'dragend') {\n            this.undragend();\n            return this;\n        }\n\n        fn = handler;\n        oldEventType = eventType;\n\n        if (R.supportsTouch && elem._tempTouchListeners && elem._tempTouchListeners[oldEventType]) {\n            l = elem._tempTouchListeners[oldEventType].length;\n            for (i = 0; i < l && oldEventType === eventType; i += 1) {\n                if (elem._tempTouchListeners[oldEventType][i] &&\n                    elem._tempTouchListeners[oldEventType][i].oldFn === fn) {\n                    eventType = elem._tempTouchListeners[oldEventType][i].newEvt;\n                    fn = elem._tempTouchListeners[oldEventType][i].newFn;\n                    elem._tempTouchListeners[oldEventType].splice(i, 1);\n                }\n            }\n        }\n        if (this.node.removeEventListener) {\n            this.node.removeEventListener(eventType, fn);\n        }\n        else {\n            this.node['on'+ eventType] = null;\n        }\n        return this;\n    };\n\n    R._engine.path = function(svg, attrs, group) {\n        var el = $(\"path\"),\n            res = new Element(el, svg, group);\n\n        res.type = \"path\";\n        setFillAndStroke(res, attrs);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n\n    R._engine.group = function(svg, id, group) {\n        var el = $(\"g\"),\n            res = new Element(el, svg, group);\n\n        res.type = \"group\";\n        res.canvas = res.node;\n        res.top = res.bottom = null;\n        res._id = id || E;\n        id && el.setAttribute('class', 'raphael-group-' + res.id + '-' + id);\n        return res;\n    };\n\n    R._engine.circle = function(svg, attrs, group) {\n        var el = $(\"circle\"),\n            res = new Element(el, svg, group);\n\n        res.type = \"circle\";\n        setFillAndStroke(res, attrs);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n    R._engine.rect = function(svg, attrs, group) {\n        var el = $(\"rect\"),\n            res = new Element(el, svg, group);\n\n        res.type = \"rect\";\n        attrs.rx = attrs.ry = attrs.r;\n        setFillAndStroke(res, attrs);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n    R._engine.ellipse = function(svg, attrs, group) {\n        var el = $(\"ellipse\"),\n            res = new Element(el, svg, group);\n\n        res.type = \"ellipse\";\n        setFillAndStroke(res, attrs);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n    function LoadRefImage (element, attrs) {\n        var src = attrs.src,\n            parent = element._.group,\n            node = element.node,\n            RefImg = element._.RefImg;\n\n        if (!RefImg) {\n            RefImg = element._.RefImg = new Image();\n        }\n\n        if (attrs.src !== undefined) {\n            RefImg.src = src;\n            RefImg.onload = function () {\n                element.attr({\n                    width: element.attrs.width || RefImg.width,\n                    height: element.attrs.height || RefImg.height\n                });\n                // parent.canvas && parent.canvas.appendChild(node);\n            };\n            RefImg.onerror = function (e) {\n                node.onerror && node.onerror(e);\n            };\n            element._.RefImg = RefImg;\n        }\n    };\n    R._engine.image = function(svg, attrs, group) {\n        var el = $(\"image\"),\n            src = attrs.src,\n            res = new Element(el, svg, group, true);\n\n        res._.group = group || svg;\n        res.type = \"image\";\n        el.setAttribute(\"preserveAspectRatio\", \"none\");\n        setFillAndStroke(res, attrs);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n    R._engine.text = function(svg, attrs, group, css) {\n        var el = $(\"text\"),\n            res = new Element(el, svg, group);\n        res.type = \"text\";\n        res._textdirty = true;\n        // Ideally this code should not be here as .css() is not a function of rapheal.\n        css && res.css && res.css(css, undefined, true);\n\n        setFillAndStroke(res, attrs, group);\n        applyCustomAttributes(res, attrs);\n        return res;\n    };\n\n    R._engine.setSize = function(width, height) {\n        this.width = width || this.width;\n        this.height = height || this.height;\n        this.canvas.setAttribute(\"width\", this.width);\n        this.canvas.setAttribute(\"height\", this.height);\n        if (this._viewBox) {\n            this.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.create = function() {\n        var con = R._getContainer.apply(0, arguments),\n        container = con && con.container,\n        x = con.x,\n        y = con.y,\n        width = con.width,\n        height = con.height;\n        if (!container) {\n            throw new Error(\"SVG container not found.\");\n        }\n        var cnvs = $(\"svg\"),\n        css = \"overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);\"+\n            \"-webkit-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;\"+\n            \"-ms-user-select:none;user-select:none;-o-user-select:none;cursor:default;\",\n        css = css + \"vertical-align:middle;\",\n        isFloating;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        $(cnvs, {\n            height: height,\n            version: 1.1,\n            width: width,\n            xmlns: \"http://www.w3.org/2000/svg\"\n        });\n        if (container == 1) {\n            cnvs.style.cssText = css + \"position:absolute;left:\" + x + \"px;top:\" + y + \"px\";\n            R._g.doc.body.appendChild(cnvs);\n            isFloating = 1;\n        } else {\n            cnvs.style.cssText = css + \"position:relative\";\n            if (container.firstChild) {\n                container.insertBefore(cnvs, container.firstChild);\n            } else {\n                container.appendChild(cnvs);\n            }\n        }\n        container = new R._Paper;\n        container.width = width;\n        container.height = height;\n        container.canvas = cnvs;\n        $(cnvs, {\n            id: \"raphael-paper-\" + container.id\n        });\n        container.clear();\n        container._left = container._top = 0;\n        isFloating && (container.renderfix = function() {\n            });\n        container.renderfix();\n        return container;\n    };\n    R._engine.setViewBox = function(x, y, w, h, fit) {\n        eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n        var size = mmax(w / this.width, h / this.height),\n        top = this.top,\n        aspectRatio = fit ? \"meet\" : \"xMinYMin\",\n        vb,\n        sw;\n        if (x == null) {\n            if (this._vbSize) {\n                size = 1;\n            }\n            delete this._vbSize;\n            vb = \"0 0 \" + this.width + S + this.height;\n        } else {\n            this._vbSize = size;\n            vb = x + S + y + S + w + S + h;\n        }\n        $(this.canvas, {\n            viewBox: vb,\n            preserveAspectRatio: aspectRatio\n        });\n        while (size && top) {\n            sw = \"stroke-width\" in top.attrs ? top.attrs[\"stroke-width\"] : 1;\n            top.attr({\n                \"stroke-width\": sw\n            });\n            top._.dirty = 1;\n            top._.dirtyT = 1;\n            top = top.prev;\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        return this;\n    };\n\n    R.prototype.renderfix = function() {\n        var cnvs = this.canvas,\n        s = cnvs.style,\n        pos;\n        try {\n            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();\n        } catch (e) {\n            pos = cnvs.createSVGMatrix();\n        }\n        var left = -pos.e % 1,\n        top = - pos.f % 1;\n        if (left || top) {\n            if (left) {\n                this._left = (this._left + left) % 1;\n                s.left = this._left + \"px\";\n            }\n            if (top) {\n                this._top = (this._top + top) % 1;\n                s.top = this._top + \"px\";\n            }\n        }\n    };\n\n    R.prototype._desc = function (txt) {\n        var desc = this.desc;\n\n        if (!desc) {\n            this.desc = desc = $(\"desc\");\n            this.canvas.appendChild(desc);\n        }\n        else {\n            while (desc.firstChild) {\n                desc.removeChild(desc.firstChild);\n            }\n        }\n        desc.appendChild(R._g.doc.createTextNode(R.is(txt, \"string\") ? txt : (\"Created with Red Rapha\\xebl \" +\n            R.version)));\n    };\n\n    R.prototype.clear = function() {\n        var c;\n        eve(\"raphael.clear\", this);\n\n        while (c = this.bottom) {\n            c.remove();\n        }\n\n        c = this.canvas;\n        while (c.firstChild) {\n            c.removeChild(c.firstChild);\n        }\n        this.bottom = this.top = null;\n        c.appendChild(this.desc = $(\"desc\"));\n        c.appendChild(this.defs = $(\"defs\"));\n    };\n\n    R.prototype.remove = function() {\n        var i;\n        eve(\"raphael.remove\", this);\n\n        while (i = this.bottom) {\n            i.remove();\n        }\n\n        this.defs && this.defs.parentNode.removeChild(this.defs);\n        this.desc && this.desc.parentNode.removeChild(this.desc);\n        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);\n        for (i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n        this.removed = true;\n    };\n    var setproto = R.st;\n    for (var method in elproto)\n        if (elproto[has](method) && !setproto[has](method)) {\n            setproto[method] = (function(methodname) {\n                return function() {\n                    var arg = arguments;\n                    return this.forEach(function(el) {\n                        el[methodname].apply(el, arg);\n                    });\n                };\n            })(method);\n        }\n}\n\nexport default R\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.svg.js","/**!\n* RedRaphael 1.0.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2012-2013 FusionCharts Technologies <http://www.fusioncharts.com>\n*\n* Raphael 2.1.0 - JavaScript Vector Library VML Module\n* Copyright (c) 2008-2012 Dmitry Baranovskiy <http://raphaeljs.com>\n* Copyright © 2008-2012 Sencha Labs <http://sencha.com>\n*\n* Licensed under the MIT license.\n*/\n// Define _window as window object in case of indivual file inclusion.\n\nimport R from './raphael.core';\n\nif (R.vml) {\n    var has = \"hasOwnProperty\",\n    Str = String,\n    toFloat = parseFloat,\n    math = Math,\n    round = math.round,\n    mmax = math.max,\n    mmin = math.min,\n    sqrt = math.sqrt,\n    abs = math.abs,\n    fillString = \"fill\",\n    separator = /[, ]+/,\n    eve = R.eve,\n    paperproto = R.fn,\n    serializeArgs = R._serializeArgs,\n    ms = \" progid:DXImageTransform.Microsoft\",\n    arrayShift = Array.prototype.shift,\n    S = \" \",\n    E = \"\",\n    map = {\n        M: \"m\",\n        L: \"l\",\n        C: \"c\",\n        Z: \"x\",\n        m: \"t\",\n        l: \"r\",\n        c: \"v\",\n        z: \"x\"\n    },\n    bites = /([clmz]),?([^clmz]*)/gi,\n    blurregexp = / progid:\\S+Blur\\([^\\)]+\\)/g,\n    val = /-?[^,\\s-]+/g,\n    cssDot = \"position:absolute;left:0;top:0;width:1px;height:1px\",\n    zoom = 21600,\n    pathTypes = {\n        path: 1,\n        rect: 1,\n        image: 1\n    },\n    ovalTypes = {\n        circle: 1,\n        ellipse: 1\n    },\n    path2vml = function(path) {\n        var total = /[ahqstv]/ig,\n        command = R._pathToAbsolute;\n        Str(path).match(total) && (command = R._path2curve);\n        total = /[clmz]/g;\n        if (command == R._pathToAbsolute && !Str(path).match(total)) {\n            var res = Str(path).replace(bites, function(all, command, args) {\n                var vals = [],\n                isMove = command.toLowerCase() == \"m\",\n                res = map[command];\n                args.replace(val, function(value) {\n                    if (isMove && vals.length == 2) {\n                        res += vals + map[command == \"m\" ? \"l\" : \"L\"];\n                        vals = [];\n                    }\n                    vals.push(round(value * zoom));\n                });\n                return res + vals;\n            });\n\n            return res || 'm0,0';\n        }\n        var pa = command(path), p, r;\n        res = [];\n        for (var i = 0, ii = pa.length; i < ii; i++) {\n            p = pa[i];\n            r = pa[i][0].toLowerCase();\n            r == \"z\" && (r = \"x\");\n            for (var j = 1, jj = p.length; j < jj; j++) {\n                r += round(p[j] * zoom) + (j != jj - 1 ? \",\" : E);\n            }\n            res.push(r);\n        }\n        return res.length ? res.join(S) : 'm0,0';\n    },\n    compensation = function(deg, dx, dy) {\n        var m = R.matrix();\n        m.rotate(-deg, .5, .5);\n        return {\n            dx: m.x(dx, dy),\n            dy: m.y(dx, dy)\n        };\n    },\n    setCoords = function(p, sx, sy, dx, dy, deg) {\n        var _ = p._,\n        m = p.matrix,\n        fillpos = _.fillpos,\n        o = p.node,\n        s = o.style,\n        y = 1,\n        flip = \"\",\n        dxdy,\n        kx = zoom / sx,\n        ky = zoom / sy;\n        s.visibility = \"hidden\";\n        if (!sx || !sy) {\n            return;\n        }\n        o.coordsize = abs(kx) + S + abs(ky);\n        s.rotation = deg * (sx * sy < 0 ? -1 : 1);\n        if (deg) {\n            var c = compensation(deg, dx, dy);\n            dx = c.dx;\n            dy = c.dy;\n        }\n        sx < 0 && (flip += \"x\");\n        sy < 0 && (flip += \" y\") && (y = -1);\n        s.flip = flip;\n        o.coordorigin = (dx * -kx) + S + (dy * -ky);\n        if (fillpos || _.fillsize) {\n            var fill = o.getElementsByTagName(fillString);\n            fill = fill && fill[0];\n            if (fill) {\n                o.removeChild(fill);\n                if (fillpos) {\n                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));\n                    fill.position = c.dx * y + S + c.dy * y;\n                }\n                if (_.fillsize) {\n                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);\n                }\n                o.appendChild(fill);\n            }\n        }\n        s.visibility = \"visible\";\n    };\n    R._url = E;\n    R.toString = function() {\n        return  \"Your browser doesn\\u2019t support SVG. Falling down to VML.\\nYou are running Rapha\\xebl \" + this.version;\n    };\n    var addArrow = function(o, value, isEnd) {\n        var values = Str(value).toLowerCase().split(\"-\"),\n        se = isEnd ? \"end\" : \"start\",\n        i = values.length,\n        type = \"classic\",\n        w = \"medium\",\n        h = \"medium\";\n        while (i--) {\n            switch (values[i]) {\n                case \"block\":\n                case \"classic\":\n                case \"oval\":\n                case \"diamond\":\n                case \"open\":\n                case \"none\":\n                    type = values[i];\n                    break;\n                case \"wide\":\n                case \"narrow\":\n                    h = values[i];\n                    break;\n                case \"long\":\n                case \"short\":\n                    w = values[i];\n                    break;\n            }\n        }\n        var stroke = o.node.getElementsByTagName(\"stroke\")[0];\n        stroke[se + \"arrow\"] = type;\n        stroke[se + \"arrowlength\"] = w;\n        stroke[se + \"arrowwidth\"] = h;\n    },\n\n    applyCustomAttributes = function (o, attrs) {\n        for (var key in attrs) {\n            eve(\"raphael.attr.\" + key + \".\" + o.id, o, attrs[key], key);\n            o.ca[key] && o.attr(key, attrs[key]);\n        }\n    },\n\n    setFillAndStroke = R._setFillAndStroke = function(o, params) {\n        if (!o.paper.canvas) return;\n        // o.paper.canvas.style.display = \"none\";\n        o.attrs = o.attrs || {};\n        var node = o.node,\n        a = o.attrs,\n        s = node.style,\n        xy,\n        oriOp,\n        newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),\n        isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),\n        isGroup = o.type === 'group',\n        res = o;\n        oriOp = res.oriOp || (res.oriOp = {});\n        for (var par in params)\n            if (params[has](par)) {\n                a[par] = params[par];\n            }\n        if (newpath) {\n            a.path = R._getPath[o.type](o);\n            o._.dirty = 1;\n        }\n        params.href && (node.href = params.href);\n        params.title && (node.title = params.title);\n        params.target && (node.target = params.target);\n        params.cursor && (s.cursor = params.cursor);\n        \"blur\" in params && o.blur(params.blur);\n\n        if (params.path && o.type == \"path\" || newpath) {\n            node.path = path2vml(~Str(a.path).toLowerCase().indexOf(\"r\") ? R._pathToAbsolute(a.path) : a.path);\n            if (o.type == \"image\") {\n                o._.fillpos = [a.x, a.y];\n                o._.fillsize = [a.width, a.height];\n                setCoords(o, 1, 1, 0, 0, 0);\n            }\n        }\n        \"transform\" in params && o.transform(params.transform);\n        if (\"rotation\" in params) {\n            var rotation = params.rotation;\n            if (R.is(rotation, \"array\")) {\n                o.rotate.apply(o, rotation);\n            }\n            else {\n                o.rotate(rotation);\n            }\n        }\n        if (\"visibility\" in params) {\n            params.visibility === 'hidden' ? o.hide() : o.show();\n        }\n        if (isOval) {\n            var cx = +a.cx,\n            cy = +a.cy,\n            rx = +a.rx || +a.r || 0,\n            ry = + a.ry || + a.r || 0;\n            node.path = R.format(\"ar{0},{1},{2},{3},{4},{1},{4},{1}x\", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));\n        }\n        if (\"clip-rect\" in params) {\n            var rect = Str(params[\"clip-rect\"]).split(separator);\n\n            if (rect.length == 4) {\n                rect[0] = +rect[0];\n                rect[1] = +rect[1];\n                rect[2] = +rect[2] + rect[0];\n                rect[3] = +rect[3] + rect[1];\n\n                /** @todo create separate element for group clip-rect to\n                 * avoid unclipping issue */\n                var div = isGroup ? node : (node.clipRect ||\n                        R._g.doc.createElement(\"div\")),\n                    offset,\n                    dstyle = div.style;\n\n                if (isGroup) {\n                    o.clip = rect.slice(); // copy param\n                    offset = o.matrix.offset();\n                    offset = [toFloat(offset[0]), toFloat(offset[1])];\n                    // invert matrix calculation\n                    rect[0] -= offset[0];\n                    rect[1] -= offset[1];\n                    rect[2] -= offset[0];\n                    rect[3] -= offset[1];\n                    // Fix for bug in ie clip-auto when height/width is not defined\n                    /** @todo set dynamic w/h based on clip bounds or find\n                     * another workaround fix */\n                    //dstyle.width = \"10800px\";\n                    //dstyle.height = \"10800px\";\n\n                    // Not sure about the above fix\n                    // Revert the fix because it's creating another issue.\n                    // Setting the Group style, width/height as \"10800px\" makes the other group inaccessible\n                    // which is below this group\n                    dstyle.width = \"1px\";\n                    dstyle.height = \"1px\";\n                }\n                else if (!node.clipRect) {\n                    dstyle.top = \"0\";\n                    dstyle.left = \"0\";\n                    dstyle.width = o.paper.width + \"px\";\n                    dstyle.height = o.paper.height + \"px\";\n                    node.parentNode.insertBefore(div, node);\n                    div.appendChild(node);\n                    div.raphael = true;\n                    div.raphaelid = node.raphaelid;\n                    node.clipRect = div;\n                }\n                dstyle.position = \"absolute\";\n                dstyle.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", rect);\n            }\n            if (!params[\"clip-rect\"]) {\n                if (isGroup && o.clip) {\n                    node.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                    delete o.clip;\n                }\n                else if (node.clipRect) {\n                    node.clipRect.style.clip = \"rect(0px 10800px 10800px 0px)\";\n                }\n            }\n        }\n        // Css styles will be applied in element or group.\n        if (o.textpath || isGroup) {\n          var textpathStyle = isGroup ? node.style : o.textpath.style;\n            params.font && (textpathStyle.font = params.font);\n            params[\"font-family\"] && (textpathStyle.fontFamily = '\"' + params[\"font-family\"].split(\",\")[0].replace(/^['\"]+|['\"]+$/g, E) + '\"');\n            params[\"font-size\"] && (textpathStyle.fontSize = params[\"font-size\"]);\n            params[\"font-weight\"] && (textpathStyle.fontWeight = params[\"font-weight\"]);\n            params[\"font-style\"] && (textpathStyle.fontStyle = params[\"font-style\"]);\n        }\n        if (\"arrow-start\" in params) {\n            addArrow(res, params[\"arrow-start\"]);\n        }\n        if (\"arrow-end\" in params) {\n            addArrow(res, params[\"arrow-end\"], 1);\n        }\n        if (!isGroup && (params.opacity != null ||\n                    params[\"stroke-width\"] != null ||\n                    params.fill != null ||\n                    params.src != null ||\n                    params.stroke != null ||\n                    params[\"stroke-width\"] != null ||\n                    params[\"stroke-opacity\"] != null ||\n                    params[\"fill-opacity\"] != null ||\n                    params[\"stroke-dasharray\"] != null ||\n                    params[\"stroke-miterlimit\"] != null ||\n                    params[\"stroke-linejoin\"] != null ||\n                    params[\"stroke-linecap\"] != null)) {\n            var fill = node.getElementsByTagName(fillString),\n            newfill = false,\n            fillOpacity = -1;\n            fill = fill && fill[0];\n            !fill && (newfill = fill = createNode(fillString));\n            if (o.type == \"image\" && params.src) {\n                fill.src = params.src;\n            }\n            params.fill && (fill.on = true);\n            if (fill.on == null || params.fill == \"none\" || params.fill === null) {\n                fill.on = false;\n            }\n\n            if (fill.on && params.fill) {\n                var isURL = Str(params.fill).match(R._ISURL);\n                if (isURL) {\n                    fill.parentNode == node && node.removeChild(fill);\n                    fill.rotate = true;\n                    fill.src = isURL[1];\n                    fill.type = \"tile\";\n                    var bbox = o.getBBox(1);\n                    fill.position = bbox.x + S + bbox.y;\n                    o._.fillpos = [bbox.x, bbox.y];\n\n                    R._preload(isURL[1], function() {\n                        o._.fillsize = [this.offsetWidth, this.offsetHeight];\n                    });\n                } else {\n                    var color = R.getRGB(params.fill);\n                    fill.color = color.hex;\n                    fill.src = E;\n                    fill.type = \"solid\";\n\n                    if (color.error && (res.type in {\n                        circle: 1,\n                        ellipse: 1\n                    } || Str(params.fill).charAt() != \"r\") && addGradientFill(res, params.fill, fill)) {\n                        a.fill = \"none\";\n                        a.gradient = params.fill;\n                        fill.rotate = false;\n                    }\n                    else if (\"opacity\" in color && !(\"fill-opacity\" in params)) {\n                        // store oiginal non gradient color opacity\n                        oriOp.nonGradOpacity = fillOpacity = color.opacity;\n                    }\n                }\n            }\n\n            if (fillOpacity !== -1 || \"fill-opacity\" in params || \"opacity\" in params) {\n                var opacity = ((+a[\"fill-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+fillOpacity + 1 || 2) - 1);\n                opacity = mmin(mmax(opacity, 0), 1);\n                oriOp.opacity = opacity;\n                // if gradient color opacity is set then opacity (applied through the params)\n                //  should be multiplied with the gradient opacity so that ratio will remain same\n                if (oriOp.opacity1 !== undefined) {\n                    fill.opacity = oriOp.opacity1 * opacity;\n                    fill['o:opacity2'] = oriOp.opacity2 * opacity;\n                } else {\n                    // multiply with the original non gradient color opacity with the opacity to preserve the ratio of the opacity\n                    fill.opacity = opacity * (oriOp.nonGradOpacity === undefined ? 1 : oriOp.nonGradOpacity);\n                }\n                if (fill.src) {\n                    fill.color = \"none\";\n                }\n            }\n            oriOp.opacity = undefined;\n            node.appendChild(fill);\n            var stroke = (node.getElementsByTagName(\"stroke\") && node.getElementsByTagName(\"stroke\")[0]),\n                newstroke = false;\n            !stroke && (newstroke = stroke = createNode(\"stroke\"));\n            if ((params.stroke && params.stroke != \"none\") ||\n                params[\"stroke-width\"] ||\n                params[\"stroke-opacity\"] != null ||\n                params[\"stroke-dasharray\"] ||\n                params[\"stroke-miterlimit\"] ||\n                params[\"stroke-linejoin\"] ||\n                params[\"stroke-linecap\"]) {\n                stroke.on = true;\n            }\n            (params.stroke == \"none\" || params.stroke === null || stroke.on == null || params.stroke == 0 || params[\"stroke-width\"] == 0) && (stroke.on = false);\n            var strokeColor = R.getRGB(('stroke' in params) ? params.stroke : a.stroke);\n            stroke.on && params.stroke && (stroke.color = strokeColor.hex);\n            opacity = ((+a[\"stroke-opacity\"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.opacity + 1 || 2) - 1);\n            var width = (toFloat(params[\"stroke-width\"]) || 1) * .75;\n            opacity = mmin(mmax(opacity, 0), 1);\n            params[\"stroke-width\"] == null && (width = a[\"stroke-width\"]);\n            params[\"stroke-width\"] && (stroke.weight = width);\n            width && width < 1 && (opacity *= width) && (stroke.weight = 1);\n            stroke.opacity = opacity;\n\n            params[\"stroke-linejoin\"] && (stroke.joinstyle = params[\"stroke-linejoin\"]) || newstroke && (newstroke.joinstyle = 'miter');\n            stroke.miterlimit = params[\"stroke-miterlimit\"] || 8;\n            params[\"stroke-linecap\"] && (stroke.endcap = params[\"stroke-linecap\"] == \"butt\" ? \"flat\" : params[\"stroke-linecap\"] == \"square\" ? \"square\" : \"round\");\n            if (params[\"stroke-dasharray\"]) {\n                var dasharray = {\n                    \"-\": \"shortdash\",\n                    \".\": \"shortdot\",\n                    \"-.\": \"shortdashdot\",\n                    \"-..\": \"shortdashdotdot\",\n                    \". \": \"dot\",\n                    \"- \": \"dash\",\n                    \"--\": \"longdash\",\n                    \"- .\": \"dashdot\",\n                    \"--.\": \"longdashdot\",\n                    \"--..\": \"longdashdotdot\"\n                };\n                stroke.dashstyle = dasharray[has](params[\"stroke-dasharray\"]) ? dasharray[params[\"stroke-dasharray\"]] :\n                        ((params[\"stroke-dasharray\"].join && params[\"stroke-dasharray\"].join(' ')) || E);\n            }\n            newstroke && node.appendChild(stroke);\n        }\n        if (res.type == \"text\") {\n            res.paper.canvas.style.display = E;\n            var span = res.paper.span,\n            m = 100,\n            fontSize = a.font && a.font.match(/\\d+(?:\\.\\d*)?(?=px)/),\n            lineHeight = a['line-height'] && (a['line-height']+E).match(/\\d+(?:\\.\\d*)?(?=px)/);\n            s = span.style;\n            a.font && (s.font = a.font);\n            a[\"font-family\"] && (s.fontFamily = a[\"font-family\"]);\n            a[\"font-weight\"] && (s.fontWeight = a[\"font-weight\"]);\n            a[\"font-style\"] && (s.fontStyle = a[\"font-style\"]);\n            fontSize = toFloat(a[\"font-size\"] || fontSize && fontSize[0]) || 10;\n            s.fontSize = fontSize * m + \"px\";\n            lineHeight = toFloat(a[\"line-height\"] || lineHeight && lineHeight[0]) || 12;\n            a[\"line-height\"] && (s.lineHeight = lineHeight * m + 'px');\n            R.is(params.text, 'array') && (params.text = res.textpath.string = params.text.join('\\n').replace(/<br\\s*?\\/?>/ig, '\\n'));\n            res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, \"&#60;\").replace(/&/g, \"&#38;\").replace(/\\n/g, \"<br>\"));\n            var brect = span.getBoundingClientRect();\n            res.W = a.w = (brect.right - brect.left) / m;\n            res.H = a.h = (brect.bottom - brect.top) / m;\n            // res.paper.canvas.style.display = \"none\";\n            res.X = a.x;\n            res.Y = a.y;\n            var leading = lineHeight - fontSize;\n\n            switch(a[\"vertical-align\"]) {\n                case \"top\":\n                    res.bby = res.H / 2; // + leading;\n                    break;\n                case \"bottom\":\n                    res.bby = -res.H / 2; // - leading;\n                    break;\n                default:\n                    res.bby = 0;\n            }\n\n            (\"x\" in params || \"y\" in params || res.bby !== undefined) && (res.path.v = R.format(\"m{0},{1}l{2},{1}\", round(a.x * zoom), round((a.y + (res.bby || 0)) * zoom), round(a.x * zoom) + 1));\n            var dirtyattrs = [\"x\", \"y\", \"text\", \"font\", \"font-family\", \"font-weight\", \"font-style\", \"font-size\", \"line-height\"];\n            for (var d = 0, dd = dirtyattrs.length; d < dd; d++)\n                if (dirtyattrs[d] in params) {\n                    res._.dirty = 1;\n                    break;\n                }\n\n            // text-anchor emulation\n            switch (a[\"text-anchor\"]) {\n                case \"start\":\n                    res.textpath.style[\"v-text-align\"] = \"left\";\n                    res.bbx = res.W / 2;\n                    break;\n                case \"end\":\n                    res.textpath.style[\"v-text-align\"] = \"right\";\n                    res.bbx = -res.W / 2;\n                    break;\n                default:\n                    res.textpath.style[\"v-text-align\"] = \"center\";\n                    res.bbx = 0;\n                    break;\n            }\n            res.textpath.style[\"v-text-kern\"] = true;\n        }\n    // res.paper.canvas.style.display = E;\n    },\n    /*\n     * Keeps the follower element in sync with the leaders.\n     * First and second arguments represents the context(element) and the\n     name of the callBack function respectively.\n     * The callBack is invoked for indivual follower Element with the rest of\n     arguments.\n    */\n    updateFollowers = R._updateFollowers = function () {\n        var i,\n            ii,\n            followerElem,\n            args = arguments,\n            o = arrayShift.call(args),\n            fnName = arrayShift.call(args);\n        for (i = 0, ii = o.followers.length; i < ii; i++) {\n            followerElem = o.followers[i].el;\n            followerElem[fnName].apply(followerElem, args);\n        }\n    },\n    addGradientFill = function(o, gradient, fill) {\n        o.attrs = o.attrs || {};\n        var attrs = o.attrs,\n        pow = Math.pow,\n        oriFOpacity,\n        oriOp = o.oriOp,\n        opacity,\n        oindex,\n        type = \"linear\",\n        fxfy = \".5 .5\";\n        o.attrs.gradient = gradient;\n        gradient = Str(gradient).replace(R._radial_gradient, function(all, opts) {\n            type = \"radial\";\n            opts = opts && opts.split(',') || [];\n\n            // fx,fy of vml is cx,cy of svg\n            var cx = opts[0],\n                cy = opts[1],\n                r = opts[2],\n                fx = opts[3],\n                fy = opts[4],\n                units = opts[5];\n            if (fx && fy) {\n                fx = toFloat(fx);\n                fy = toFloat(fy);\n                pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);\n                fxfy = fx + S + fy;\n            }\n            return E;\n        });\n        gradient = gradient.split(/\\s*\\-\\s*/);\n        if (type == \"linear\") {\n            var angle = gradient.shift();\n            angle = -toFloat(angle);\n            if (isNaN(angle)) {\n                return null;\n            }\n        }\n        var dots = R._parseDots(gradient);\n        if (!dots) {\n            return null;\n        }\n        o = o.shape || o.node;\n        if (dots.length) {\n            fill.parentNode == o && o.removeChild(fill);\n            fill.on = true;\n            fill.method = \"none\";\n            fill.color = dots[0].color;\n            fill.color2 = dots[dots.length - 1].color;\n            //For VML use first and last available alpha\n            var clrs = [],\n            opacity1 = 1,\n            opacity2 = dots[0].opacity === undefined ? 1 : dots[0].opacity;\n            for (var i = 0, ii = dots.length; i < ii; i++) {\n                dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);\n                if (dots[i].opacity !== undefined) {\n                    opacity1 = dots[i].opacity;//update with latest avaible opacity\n                }\n            }\n            fill.colors = clrs.length ? clrs.join() : \"0% \" + fill.color;\n            //set opacity1 & opacity2\n            // store original gradient color opacity\n            oriOp.opacity1 = opacity1;\n            oriOp.opacity2 = opacity2;\n            oriFOpacity = (oriOp.opacity === undefined) ? 1 : oriOp.opacity;\n            // if gradient color opacity is set then opacity (applied through the params)\n            // should be multiplied with the gradient opacity so that ratio will remain same\n            fill.opacity = opacity1 * oriFOpacity;\n            fill['o:opacity2'] = opacity2 * oriFOpacity;\n            if (type == \"radial\") {\n                fill.type = \"gradientTitle\";\n                fill.focus = \"100%\";\n                fill.focussize = \"0 0\";\n                fill.focusposition = fxfy;\n                fill.angle = 0;\n            } else {\n                // fill.rotate= true;\n                fill.type = \"gradient\";\n                fill.angle = (270 - angle) % 360;\n            }\n            o.appendChild(fill);\n        }\n        return 1;\n    },\n    Element = function(node, vml, group/*, dontAppend*/) {\n        var o = this,\n            parent = group || vml,\n\t\t\tskew;\n\n\t\t/*!dontAppend && */parent.canvas && parent.canvas.appendChild(node);\n\t\tskew = createNode(\"skew\");\n        skew.on = true;\n        node.appendChild(skew);\n        o.skew = skew;\n\n        o.node = o[0] = node;\n        node.raphael = true;\n        node.raphaelid = o.id = R._oid++;\n\n        o.X = 0;\n        o.Y = 0;\n\n        o.attrs = o.attrs || {};\n        o.followers = o.followers || [];\n\n        o.paper = vml;\n        o.ca = o.customAttributes = o.customAttributes ||\n            new vml._CustomAttributes();\n\n        o.matrix = R.matrix();\n        o._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            dx: 0,\n            dy: 0,\n            deg: 0,\n            dirty: 1,\n            dirtyT: 1\n        };\n\n        o.parent = parent;\n        !parent.bottom && (parent.bottom = o);\n\n        o.prev = parent.top;\n        parent.top && (parent.top.next = o);\n        parent.top = o;\n        o.next = null;\n    };\n    var elproto = R.el,\n        notApplicableGroupAttrs = {\n            fill: true,\n            stroke: true,\n            'stroke-width': true,\n            'stroke-dasharray': true,\n            'stroke-linejoin': true,\n            'stroke-opacity' : true,\n            'fill-opacity' : true,\n            opacity : true\n        },\n        /*\n         * Function to over-write the default attr() function of group so that the individual properties of group\n         * can be applied to its child.\n         */\n        customGroupUpdate = function (attributes) {\n            var group = this,\n                childElem,\n                ownAttr = group.ownAttr;\n\n            if (attributes) {\n                group.ownAttr = ownAttr ? R.extend(ownAttr, attributes) : attributes;\n            }\n            info = getApplicableGroupAttributes(group);\n            group.customAttr = info.customAttr;\n            group.inheritAttr = info.inheritAttr;\n\n            // Applying the group properties to all its child element\n            childElem = group.bottom;\n            while(childElem) {\n                childElem.attr();\n                childElem = childElem.next;\n            }\n            return attributes && elproto.attr.call(group, attributes);\n        },\n\n        /*\n         * Function to over-write the default attr() function of an element so that the individual properties of group\n         * can be applied to the child.\n         */\n        customElementUpdate = function (attributes) {\n            var element = this,\n                parent = element.parent,\n                ownAttr = element.ownAttr;\n\n            if (attributes) {\n                element.ownAttr = ownAttr ? R.extend(ownAttr, attributes) : attributes;\n            }\n\n            attributes = getApplicableAttributes(parent, attributes, element);\n\n            element.inheritAttrFromGroup = parent && parent.inheritAttr;\n            element.customAttrFromGroup = parent && parent.customAttr;\n\n            return elproto.attr.call(element, attributes);\n        },\n\n        /*\n         * Function to manage attributes for group level inheritance\n         */\n        getApplicableGroupAttributes = function (group) {\n            var parent = group && group.parent,\n                customAttr = {},\n                inheritAttr = {},\n                attr;\n\n            ownAttr = group && group.ownAttr;\n            // Segregating the custom group attributes\n            if (ownAttr) {\n                for (attr in ownAttr) {\n                    if (notApplicableGroupAttrs[attr]) {\n                        customAttr[attr] = ownAttr[attr];\n                    }\n                }\n            }\n\n            // Inhereiting from parent\n            if (parent && parent.type === 'group') {\n                parentCustomAttr = parent.customAttr;\n                parentInheritAttr = parent.inheritAttr;\n\n                // Direct attributes from parent\n                for (attr in parentCustomAttr) {\n                    inheritAttr[attr] = parentCustomAttr[attr];\n                }\n\n                // Inherited attributes from parent\n                for (attr in parentInheritAttr) {\n                    !inheritAttr[attr] && (inheritAttr[attr] = parentInheritAttr[attr]);\n                }\n            }\n\n            return {\n                customAttr : customAttr,\n                inheritAttr : inheritAttr\n            }\n        },\n\n        /*\n         * Function to get the group attrs applicable to its child.\n         */\n        getApplicableAttributes = function (group, elemAttr, elem) {\n            var customAttr,\n                inheritAttr,\n                attr;\n            elemAttr = elemAttr || R.extend({}, elem.ownAttr);\n            if (group) {\n                customAttr = group.customAttr;\n                inheritAttr = group.inheritAttr;\n\n                for (attr in customAttr) {\n                    !elemAttr[attr] && (elemAttr[attr] = customAttr[attr]);\n                }\n\n                for (attr in inheritAttr) {\n                    !elemAttr[attr] && (elemAttr[attr] = inheritAttr[attr]);\n                }\n            }\n            return elemAttr;\n        };\n\n    /*\\\n     * Paper.group\n     [ method ]\n     **\n     * Creates a group\n     **\n     > Parameters\n     **\n     - id (number) id of the group\n     = (object) Raphaël element object with type “group”\n     **\n     > Usage\n     | var g = paper.group();\n    \\*/\n    paperproto.group = function () { // id\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs,\n            info,\n            out;\n\n        out = R._engine.group(paper, args[0], group);\n        out.attr = customGroupUpdate;\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.circle\n     [ method ]\n     **\n     * Draws a circle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - r (number) radius\n     = (object) Raphaël element object with type “circle”\n     **\n     > Usage\n     | var c = paper.circle(50, 50, 40);\n    \\*/\n    paperproto.circle = function () { // x, y, r\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n            out;\n\n        attrs = getApplicableAttributes(group, attrs);\n        out = R._engine.circle(paper, attrs, group);\n        out.attr = customElementUpdate;\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n\n    /*\\\n     * Paper.rect\n     [ method ]\n     *\n     * Draws a rectangle.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the top left corner\n     - y (number) y coordinate of the top left corner\n     - width (number) width\n     - height (number) height\n     - r (number) #optional radius for rounded corners, default is 0\n     = (object) Raphaël element object with type “rect”\n     **\n     > Usage\n     | // regular rectangle\n     | var c = paper.rect(10, 10, 50, 50);\n     | // rectangle with rounded corners\n     | var c = paper.rect(40, 40, 50, 50, 10);\n    \\*/\n    paperproto.rect = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            ownAttr = serializeArgs(args),\n            attrs,\n            out;\n\n        attrs = getApplicableAttributes(group, ownAttr);\n        out = R._engine.rect(paper, attrs, group);\n\n        out.attr = customElementUpdate;\n        out.ownAttr = ownAttr;\n        out.inheritAttrFromGroup = group.inheritAttr;\n        out.customAttrFromGroup = group.customAttr;\n\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.ellipse\n     [ method ]\n     **\n     * Draws an ellipse.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate of the centre\n     - y (number) y coordinate of the centre\n     - rx (number) horizontal radius\n     - ry (number) vertical radius\n     = (object) Raphaël element object with type “ellipse”\n     **\n     > Usage\n     | var c = paper.ellipse(50, 50, 40, 20);\n    \\*/\n    paperproto.ellipse = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n            out;\n\n        attrs = getApplicableAttributes(group, attrs);\n        out = R._engine.ellipse(this, attrs, group);\n        out.attr = customElementUpdate;\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.path\n     [ method ]\n     **\n     * Creates a path element by given path data string.\n     > Parameters\n     - pathString (string) #optional path string in SVG format.\n     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:\n     | \"M10,20L30,40\"\n     * Here we can see two commands: “M”, with arguments `(10, 20)` and “L” with arguments `(30, 40)`. Upper case letter mean command is absolute, lower case—relative.\n     *\n     # <p>Here is short list of commands available, for more details see <a href=\"http://www.w3.org/TR/SVG/paths.html#PathData\" title=\"Details of a path's data attribute's format are described in the SVG specification.\">SVG path string format</a>.</p>\n     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>\n     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>\n     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>\n     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>\n     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>\n     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>\n     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>\n     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>\n     # <tr><td>Q</td><td>quadratic Bézier curveto</td><td>(x1 y1 x y)+</td></tr>\n     # <tr><td>T</td><td>smooth quadratic Bézier curveto</td><td>(x y)+</td></tr>\n     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>\n     # <tr><td>R</td><td><a href=\"http://en.wikipedia.org/wiki/Catmull–Rom_spline#Catmull.E2.80.93Rom_spline\">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>\n     * * “Catmull-Rom curveto” is a not standard SVG command and added in 2.0 to make life easier.\n     * Note: there is a special case when path consist of just three commands: “M10,10R…z”. In this case path will smoothly connects to its beginning.\n     > Usage\n     | var c = paper.path(\"M10 10L90 90\");\n     | // draw a diagonal line:\n     | // move to 10,10, line to 90,90\n     * For example of path strings, check out these icons: http://raphaeljs.com/icons/\n    \\*/\n    paperproto.path = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            paperConfig = paper.config,\n            capStyle = (paperConfig && paperConfig[\"stroke-linecap\"]) || \"butt\",\n            attrs = serializeArgs(args),\n            out;\n\n        attrs = getApplicableAttributes(group, attrs);\n        out = R._engine.path(paper, attrs, group);\n        out.attr = customElementUpdate;\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.image\n     [ method ]\n     **\n     * Embeds an image into the surface.\n     **\n     > Parameters\n     **\n     - src (string) URI of the source image\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - width (number) width of the image\n     - height (number) height of the image\n     = (object) Raphaël element object with type “image”\n     **\n     > Usage\n     | var c = paper.image(\"apple.png\", 10, 10, 80, 80);\n    \\*/\n    paperproto.image = function () {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n            out;\n\n        attrs = getApplicableAttributes(group, attrs);\n        out = R._engine.image(paper, attrs, group);\n        out.attr = customElementUpdate;\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    /*\\\n     * Paper.text\n     [ method ]\n     **\n     * Draws a text string. If you need line breaks, put “\\n” in the string.\n     **\n     > Parameters\n     **\n     - x (number) x coordinate position\n     - y (number) y coordinate position\n     - text (string) The text string to draw\n     = (object) Raphaël element object with type “text”\n     **\n     > Usage\n     | var t = paper.text(50, 50, \"Raphaël\\nkicks\\nbutt!\");\n    \\*/\n    paperproto.text = function() {\n        var paper = this,\n            args = arguments,\n            group = R._lastArgIfGroup(args, true),\n            attrs = serializeArgs(args),\n            out;\n\n        attrs = getApplicableAttributes(group, attrs);\n        out = R._engine.text(paper, attrs, group, args[1]);\n        return (paper.__set__ && paper.__set__.push(out), (paper._elementsById[out.id] = out));\n    };\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    elproto.transform = function(tstr) {\n        if (tstr == null) {\n            return this._.transform;\n        }\n        var vbs = this.paper._viewBoxShift,\n        vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n        oldt;\n\n        if (vbs) {\n            oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, this._.transform || E);\n        }\n\n        R._extractTransform(this, vbt + tstr);\n\n        var matrix = this.matrix.clone(),\n        skew = this.skew,\n        o = this.node,\n        split,\n        isGrad = ~Str(this.attrs.fill).indexOf(\"-\"),\n        isPatt = !Str(this.attrs.fill).indexOf(\"url(\");\n        matrix.translate(-.5, -.5);\n        if (isPatt || isGrad || this.type == \"image\") {\n            skew.matrix = \"1 0 0 1\";\n            skew.offset = \"0 0\";\n            split = matrix.split();\n            if ((isGrad && split.noRotation) || !split.isSimple) {\n                o.style.filter = matrix.toFilter();\n                var bb = this.getBBox(),\n                bbt = this.getBBox(1),\n                xget = bb.x2 && bbt.x2 && 'x2' || 'x',\n                yget = bb.y2 && bbt.y2 && 'y2' || 'y',\n                dx = bb[xget] - bbt[xget],\n                dy = bb[yget] - bbt[yget];\n                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);\n                setCoords(this, 1, 1, dx, dy, 0);\n            } else {\n                o.style.filter = E;\n                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);\n            }\n        } else {\n            o.style.filter = E;\n            skew.matrix = Str(matrix);\n            skew.offset = matrix.offset();\n        }\n        oldt && (this._.transform = oldt);\n\n        return this;\n    };\n    elproto.rotate = function(deg, cx, cy) {\n        var o = this;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'rotate', deg, cx, cy);\n        if (deg == null) {\n            return;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = o.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        o._.dirtyT = 1;\n        o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n        return o;\n    };\n    elproto.translate = function(dx, dy) {\n        var o = this;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'translate', dx, dy);\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        if (o._.bbox) {\n            o._.bbox.x += dx;\n            o._.bbox.y += dy;\n        }\n        o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n        return o;\n    };\n    elproto.scale = function(sx, sy, cx, cy) {\n        var o = this;\n        if (o.removed) {\n            return o;\n        }\n        updateFollowers(o, 'scale', sx, sy, cx, cy);\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n            isNaN(cx) && (cx = null);\n            isNaN(cy) && (cy = null);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            var bbox = o.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n\n        o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n        o._.dirtyT = 1;\n        return o;\n    };\n    elproto.hide = function(soft) {\n        var o = this;\n        updateFollowers(o, 'hide', soft);\n        !o.removed && (o.node.style.display = \"none\");\n        return o;\n    };\n\n    elproto.show = function(soft) {\n        var o = this;\n        updateFollowers(o, 'show', soft);\n        !o.removed && (o.node.style.display = E);\n        return o;\n    };\n    elproto._getBBox = function() {\n        var o = this;\n        if (o.removed) {\n            return {};\n        }\n        return {\n            x: o.X + (o.bbx || 0) - o.W / 2,\n            y: o.Y + (o.bby || 0) - o.H / 2,\n            width: o.W,\n            height: o.H\n        };\n    };\n    elproto.remove = function() {\n        if (this.removed || !this.parent.canvas) {\n            return;\n        }\n\n        var o = this,\n            node = R._engine.getNode(o),\n            paper = o.paper,\n            shape = o.shape,\n            i;\n\n        paper.__set__ && paper.__set__.exclude(o);\n        eve.unbind(\"raphael.*.*.\" + o.id);\n\n        shape && shape.parentNode.removeChild(shape);\n        node.parentNode && node.parentNode.removeChild(node);\n\n        while (i = o.followers.pop()) {\n            i.el.remove();\n        }\n        while (i = o.bottom) {\n            i.remove();\n        }\n\n        if (o._drag) {\n            o.undrag();\n        }\n\n        if (o.events)  {\n            while (i = o.events.pop()) {\n                i.unbind();\n            }\n        }\n\n        o.removeData();\n        delete paper._elementsById[o.id];\n        R._tear(o, o.parent);\n\n        for (var i in o) {\n            o[i] = typeof o[i] === \"function\" ? R._removedFactory(i) : null;\n        }\n        o.removed = true;\n    };\n\n    elproto.attr = function(name, value) {\n        if (this.removed) {\n            return this;\n        }\n        if (name == null) {\n            var res = {};\n            for (var a in this.attrs)\n                if (this.attrs[has](a)) {\n                    res[a] = this.attrs[a];\n                }\n            res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = this._.transform;\n            res.visibility = this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n            return res;\n        }\n        if (value == null && R.is(name, \"string\")) {\n            if (name == fillString && this.attrs.fill == \"none\" && this.attrs.gradient) {\n                return this.attrs.gradient;\n            }\n            if (name == \"visibility\") {\n                return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n            }\n            var names = name.split(separator),\n            out = {};\n            for (var i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in this.attrs) {\n                    out[name] = this.attrs[name];\n                } else if (R.is(this.ca[name], \"function\")) {\n                    out[name] = this.ca[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n        if (this.attrs && value == null && R.is(name, \"array\")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = this.attr(name[i]);\n            }\n            return out;\n        }\n        var params;\n        if (value != null) {\n            params = {};\n            params[name] = value;\n        }\n        value == null && R.is(name, \"object\") && (params = name);\n        if (R.stopEvent !== false) {\n            for (var key in params) {\n                eve(\"raphael.attr.\" + key + \".\" + this.id, this, params[key], key);\n            }\n        }\n        if (params) {\n            var todel = {};\n            for (key in this.ca) {\n                if (this.ca[key] && params[has](key) && R.is(this.ca[key], \"function\") && !this.ca['_invoked' + key]) {\n                    this.ca['_invoked' + key] = true; // prevent recursion\n                    var par = this.ca[key].apply(this, [].concat(params[key]));\n                    delete this.ca['_invoked' + key];\n\n                    for (var subkey in par) {\n                        if (par[has](subkey)) {\n                            params[subkey] = par[subkey];\n                        }\n                    }\n                    this.attrs[key] = params[key];\n                    if (par === false) {\n                        todel[key] = params[key];\n                        delete params[key];\n                    }\n                }\n            }\n\n            // this.paper.canvas.style.display = \"none\";\n            if ('text' in params && this.type == \"text\") {\n                R.is(params.text, 'array') && (params.text = params.text.join('\\n'));\n                this.textpath.string = params.text.replace(/<br\\s*?\\/?>/ig, '\\n');\n            }\n            setFillAndStroke(this, params);\n            var follower;\n            for (i = 0, ii = this.followers.length; i < ii; i++) {\n                follower = this.followers[i];\n                (follower.cb && !follower.cb.call(follower.el, params, this)) ||\n                    follower.el.attr(params);\n            }\n            for (var subkey in todel) {\n                params[subkey] = todel[subkey];\n            }\n        // this.paper.canvas.style.display = E;\n        }\n        return this;\n    };\n\n    elproto.blur = function(size) {\n        var s = this.node.runtimeStyle,\n        f = s.filter;\n        f = f.replace(blurregexp, E);\n        if (+size !== 0) {\n            this.attrs.blur = size;\n            s.filter = f + S + ms + \".Blur(pixelradius=\" + (+size || 1.5) + \")\";\n            s.margin = R.format(\"-{0}px 0 0 -{0}px\", round(+size || 1.5));\n        } else {\n            s.filter = f;\n            s.margin = 0;\n            delete this.attrs.blur;\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.on\n     [ method ]\n     **\n     * Bind handler function for a particular event to Element\n     * @param eventType - Type of event\n     * @param handler - Function to be called on the firing of the event\n    \\*/\n    elproto.on = function(eventType, handler) {\n        if (this.removed) {\n            return this;\n        }\n\n        if (eventType === 'dragstart') {\n            this.drag(null, handler);\n            return this;\n        } else if (eventType === 'dragmove') {\n            this.drag(handler);\n            return this;\n        } else if (eventType === 'dragend') {\n            this.drag(null, null, handler);\n            return this;\n        }\n        if (this.node.attachEvent) {\n            this.node.attachEvent('on'+ eventType, handler);\n        }\n        else {\n            this.node['on'+ eventType] = function() {\n                var evt = R._g.win.event;\n                evt.target = evt.srcElement;\n                handler(evt);\n            };\n        }\n        return this;\n    };\n\n    /*\\\n     * Element.off\n     [ method ]\n     **\n     * Remove handler function bind to an event of element\n     * @param eventType - Type of event\n     * @param handler - Function to be removed from event\n    \\*/\n    elproto.off = function(eventType, handler) {\n        if (this.removed) {\n            return this;\n        }\n\n        if (eventType === 'dragstart') {\n            this.undragstart();\n            return this;\n        } else if (eventType === 'dragmove') {\n            this.undragmove();\n            return this;\n        } else if (eventType === 'dragend') {\n            this.undragend();\n            return this;\n        }\n        if (this.node.attachEvent) {\n            this.node.detachEvent('on'+ eventType, handler);\n        }\n        else {\n            this.node['on'+ eventType] = null;\n        }\n        return this;\n    };\n\n    R._engine.getNode = function (el) {\n        var node = el.node || el[0].node;\n        return node.clipRect || node;\n    };\n    R._engine.getLastNode = function (el) {\n        var node = el.node || el[el.length - 1].node;\n        return node.clipRect || node;\n    };\n\n    R._engine.group = function(vml, id, group) {\n        var el = R._g.doc.createElement(\"div\"),\n            p = new Element(el, vml, group);\n\n        el.style.cssText = cssDot;\n        p._id = id || E;\n        id && (el.className = 'raphael-group-' + p.id + '-' + id);\n        (group || vml).canvas.appendChild(el);\n\n        p.type = 'group';\n        p.canvas = p.node;\n        p.transform = R._engine.group.transform;\n        p.top = null;\n        p.bottom = null;\n\n        return p;\n    };\n\n    R._engine.group.transform = function(tstr) {\n        if (tstr == null) {\n            return this._.transform;\n        }\n\n        var o = this,\n            s = o.node.style,\n            c = o.clip,\n            vbs = o.paper._viewBoxShift,\n            vbt = vbs ? \"s\" + [vbs.scale, vbs.scale] + \"-1-1t\" + [vbs.dx, vbs.dy] : E,\n            oldt,\n            matrix,\n            offset,\n            tx,\n            ty;\n\n        if (vbs) {\n            oldt = tstr = Str(tstr).replace(/\\.{3}|\\u2026/g, o._.transform || E);\n        }\n        R._extractTransform(o, vbt + tstr);\n        matrix = o.matrix;\n        offset = matrix.offset();\n        tx = toFloat(offset[0]) || 0;\n        ty = toFloat(offset[1]) || 0;\n\n        s.left = tx + \"px\";\n        s.top = ty + \"px\";\n        s.zoom = (o._.tzoom = matrix.get(0)) + E;\n\n        /** @todo try perform relative group transform, thus avoiding\n         * transform on clipping */\n        c && (s.clip = R.format(\"rect({1}px {2}px {3}px {0}px)\", [\n            c[0] - tx, c[1] - ty, c[2] - tx, c[3] - ty\n        ]));\n\n        return o;\n    };\n\n    R._engine.path = function(vml, attrs, group) {\n        var el = createNode(\"shape\");\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = vml.coordorigin;\n\n\t\tvar p = new Element(el, vml, group);\n        p.type = attrs.type || \"path\";\n\t\tp.path = [];\n        p.Path = E;\n\n\t\tattrs.type && (delete attrs.type);\n        setFillAndStroke(p, attrs);\n        applyCustomAttributes(p, attrs);\n        return p;\n    };\n\n    R._engine.rect = function(vml, attrs, group) {\n        var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h, attrs.r);\n\n\t\tattrs.path = path;\n\t\tattrs.type = \"rect\";\n\n\t\tvar res = vml.path(attrs, group),\n        a = res.attrs;\n        res.X = a.x;\n        res.Y = a.y;\n        res.W = a.width;\n        res.H = a.height;\n        a.path = path;\n\n\t\treturn res;\n    };\n    R._engine.ellipse = function(vml, attrs, group) {\n\t\tattrs.type = \"ellipse\";\n\n\t\tvar res = vml.path(attrs, group),\n\t\t\ta = res.attrs;\n        res.X = a.x - a.rx;\n        res.Y = a.y - a.ry;\n        res.W = a.rx * 2;\n        res.H = a.ry * 2;\n\n        return res;\n    };\n    R._engine.circle = function(vml, attrs, group) {\n        attrs.type = \"circle\";\n\n        var res = vml.path(attrs, group),\n\t\t\ta = res.attrs;\n\n        res.X = a.x - a.r;\n        res.Y = a.y - a.r;\n        res.W = res.H = a.r * 2;\n        return res;\n    };\n    R._engine.image = function(vml, attrs, group) {\n        var path = R._rectPath(attrs.x, attrs.y, attrs.w, attrs.h);\n\n\t\tattrs.path = path;\n\t\tattrs.type = \"image\";\n\t\tattrs.stroke = \"none\";\n        var res = vml.path(attrs, group),\n\t\t\ta = res.attrs,\n\t\t\tnode = res.node,\n\t\t\tfill = node.getElementsByTagName(fillString)[0];\n\n        a.src = attrs.src;\n        res.X = a.x = attrs.x;\n        res.Y = a.y = attrs.y;\n        res.W = a.width = attrs.w;\n        res.H = a.height = attrs.h;\n\n        fill.parentNode == node && node.removeChild(fill);\n        fill.rotate = true;\n        fill.src = a.src;\n        fill.type = \"tile\";\n        res._.fillpos = [a.x, a.y];\n        res._.fillsize = [a.w, a.h];\n        node.appendChild(fill);\n        setCoords(res, 1, 1, 0, 0, 0);\n        return res;\n    };\n    R._engine.text = function(vml, attrs, group, css) {\n        var el = createNode(\"shape\"),\n\t\t\tpath = createNode(\"path\"),\n\t\t\to = createNode(\"textpath\");\n        x = attrs.x || 0;\n        y = attrs.y || 0;\n        text = attrs.text;\n        path.v = R.format(\"m{0},{1}l{2},{1}\", round(attrs.x * zoom), round(attrs.y * zoom), round(attrs.x * zoom) + 1);\n        path.textpathok = true;\n        o.string = Str(attrs.text).replace(/<br\\s*?\\/?>/ig, '\\n');\n        o.on = true;\n        el.style.cssText = cssDot;\n        el.coordsize = zoom + S + zoom;\n        el.coordorigin = \"0 0\";\n        var p = new Element(el, vml, group);\n\n        p.shape = el;\n        p.path = path;\n        p.textpath = o;\n        p.type = \"text\";\n        p.attrs.text = Str(attrs.text || E);\n        p.attrs.x = attrs.x;\n        p.attrs.y = attrs.y;\n        p.attrs.w = 1;\n        p.attrs.h = 1;\n        css && p.css && p.css(css, undefined, true);\n        setFillAndStroke(p, attrs);\n        applyCustomAttributes(p, attrs);\n\n        el.appendChild(o);\n        el.appendChild(path);\n\n        return p;\n    };\n\n    R._engine.setSize = function(width, height) {\n        var cs = this.canvas.style;\n        this.width = width;\n        this.height = height;\n        width == +width && (width += \"px\");\n        height == +height && (height += \"px\");\n        width && (cs.width = width);\n        height && (cs.height = height);\n        cs.clip = \"rect(0 \" + cs.width + \" \" + cs.height + \" 0)\";\n        if (this._viewBox) {\n            R._engine.setViewBox.apply(this, this._viewBox);\n        }\n        return this;\n    };\n    R._engine.setViewBox = function(x, y, w, h, fit) {\n        eve(\"raphael.setViewBox\", this, this._viewBox, [x, y, w, h, fit]);\n        var width = this.width,\n        height = this.height,\n        size = 1 / mmax(w / width, h / height),\n        H, W;\n        if (fit) {\n            H = height / h;\n            W = width / w;\n            if (w * H < width) {\n                x -= (width - w * H) / 2 / H;\n            }\n            if (h * W < height) {\n                y -= (height - h * W) / 2 / W;\n            }\n        }\n        this._viewBox = [x, y, w, h, !!fit];\n        this._viewBoxShift = {\n            dx: -x,\n            dy: -y,\n            scale: size\n        };\n        this.forEach(function(el) {\n            el.transform(\"...\");\n        });\n        return this;\n    };\n    var createNode;\n    R._engine.initWin = function(win) {\n        var doc = win.document;\n        doc.createStyleSheet().addRule(\".rvml\", \"behavior:url(#default#VML)\");\n        try {\n            !doc.namespaces.rvml && doc.namespaces.add(\"rvml\", \"urn:schemas-microsoft-com:vml\");\n            createNode = R._createNode = function(tagName, attrs) {\n                var el = doc.createElement('<rvml:' + tagName + ' class=\"rvml\">'),\n                prop;\n                for (prop in attrs) {\n                    el[prop] = Str(attrs[prop]);\n                }\n                return el;\n            };\n        } catch (e) {\n            createNode = R._createNode = function(tagName, attrs) {\n                var el = doc.createElement('<' + tagName + ' xmlns=\"urn:schemas-microsoft.com:vml\" class=\"rvml\">'),\n                prop;\n                for (prop in attrs) {\n                    el[prop] = Str(attrs[prop]);\n                }\n                return el;\n            };\n        }\n    };\n    R._engine.initWin(R._g.win);\n    R._engine.create = function() {\n        var con = R._getContainer.apply(0, arguments),\n        container = con.container,\n        height = con.height,\n        s,\n        width = con.width,\n        x = con.x,\n        y = con.y;\n        if (!container) {\n            throw new Error(\"VML container not found.\");\n        }\n        var res = new R._Paper,\n        c = res.canvas = R._g.doc.createElement(\"div\"),\n        cs = c.style;\n        x = x || 0;\n        y = y || 0;\n        width = width || 512;\n        height = height || 342;\n        res.width = width;\n        res.height = height;\n        width == +width && (width += \"px\");\n        height == +height && (height += \"px\");\n        res.coordsize = zoom * 1e3 + S + zoom * 1e3;\n        res.coordorigin = \"0 0\";\n        c.id = \"raphael-paper-\" + res.id;\n        res.span = R._g.doc.createElement(\"span\");\n        res.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;\";\n        c.appendChild(res.span);\n        cs.cssText = R.format(\"top:0;left:0;width:{0};height:{1};display:inline-block;cursor:default;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden\", width, height);\n        if (container == 1) {\n            R._g.doc.body.appendChild(c);\n            cs.left = x + \"px\";\n            cs.top = y + \"px\";\n            cs.position = \"absolute\";\n        } else {\n            if (container.firstChild) {\n                container.insertBefore(c, container.firstChild);\n            } else {\n                container.appendChild(c);\n            }\n        }\n        res.renderfix = function() {\n        };\n        return res;\n    };\n    R.prototype.clear = function() {\n        var c;\n        eve(\"raphael.clear\", this);\n        while (c = this.bottom) {\n            c.remove();\n        }\n        this.canvas.innerHTML = E;\n        this.span = R._g.doc.createElement(\"span\");\n        this.span.style.cssText = \"position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;\";\n        this.canvas.appendChild(this.span);\n        this.bottom = this.top = null;\n    };\n    R.prototype.remove = function() {\n        var i;\n        eve(\"raphael.remove\", this);\n        while (i = this.bottom) {\n            i.remove();\n        }\n        this.canvas.parentNode.removeChild(this.canvas);\n        for (i in this) {\n            this[i] = typeof this[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n        return true;\n    };\n\n    var setproto = R.st;\n    for (var method in elproto)\n        if (elproto[has](method) && !setproto[has](method)) {\n            setproto[method] = (function(methodname) {\n                return function() {\n                    var arg = arguments;\n                    return this.forEach(function(el) {\n                        el[methodname].apply(el, arg);\n                    });\n                };\n            })(method);\n        }\n}\n\nexport default R\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.vml.js","/*jslint forin: true, regexp: true, todo: true, white: false, browser: true,\n sloppy: true, white: true, eqeq: false, newcap: true, nomen: true */\n\n/*global FusionCharts */\n\n/**\n * Raphael Canvas Extension\n */\n\nimport R from './raphael.core';\n\nif (R.canvas) {\n    var win = R._g.win,\n        doc = R._g.doc,\n        g = R._g,\n\n        STRING = 'string',\n        PX = 'px',\n\n        separator = /[, ]+/,\n\n        Str = win.String,\n        toInt = win.parseInt,\n        toFloat = win.parseFloat,\n\n        math = win.Math,\n        mmax = math.max,\n        mmin = math.min,\n        pi = math.PI,\n        mathFloor = math.floor,\n\n        eve = R.eve,\n        paperproto = R.fn,\n        elproto = R.el,\n        setproto = R.st,\n\n        clone = R.clone,\n        deg2rad = pi / 180,\n        rad2deg = 180 / pi,\n\n        DEFAULT_FILL = \"#fff\",\n        DEFAULT_STROKE = \"#000\",\n        has = \"hasOwnProperty\",\n        S = \" \",\n        /** @todo: detect touch */\n        supportsTouch = (('ontouchstart' in win) || (navigator.msMaxTouchPoints > 0)),\n        events = (\"click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel\").split(S),\n        noHandle = false,\n\n        $,\n        FauxNode,\n        Element,\n        draggable = [],\n        drag = [],\n        dragMove = function(e) {\n            var x = e.clientX,\n            y = e.clientY,\n            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,\n            dragi,\n            j = drag.length;\n            while (j--) {\n                dragi = drag[j];\n                if (supportsTouch) {\n                    var i = e.touches.length,\n                    touch;\n                    while (i--) {\n                        touch = e.touches[i];\n                        if (touch.identifier == dragi.el._drag.id) {\n                            x = touch.clientX;\n                            y = touch.clientY;\n                            (e.originalEvent ? e.originalEvent : e).preventDefault();\n                            break;\n                        }\n                    }\n                } else {\n                    e.preventDefault();\n                }\n\n                //var node = dragi.el.node;\n                    //o,\n                    //next = node.nextSibling,\n                    //parent = node.parentNode,\n                    //display = node.style.display;\n\n                 /** @todo: implement raphael.drag.over */\n\n                //g.win.opera && parent.removeChild(node);\n                //node.style.display = \"none\";\n                //o = dragi.el.paper.getElementByPoint(x, y);\n                //node.style.display = display;\n                //g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));\n                //o && eve(\"raphael.drag.over.\" + dragi.el.id, dragi.el, o);\n                x += scrollX;\n                y += scrollY;\n                eve(\"raphael.drag.move.\" + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);\n            }\n        },\n        dragUp = function(e) {\n            R.unmousemove(dragMove).unmouseup(dragUp);\n            var i = drag.length,\n            dragi;\n            while (i--) {\n                dragi = drag[i];\n                dragi.el._drag = {};\n                dragi.onendHandler && eve(\"raphael.drag.end.\" + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);\n            }\n            drag = [];\n        };\n\n    $ = R._createNode = function(el, attr) {\n        if (attr) {\n            if (typeof el === STRING) {\n                el = $(el);\n            }\n            for (var key in attr)\n                if (attr.hasOwnProperty(key)) {\n                    el.setAttribute(key, Str(attr[key]));\n                }\n        } else {\n            el = doc.createElement(el);\n        }\n        return el;\n    };\n\n    R._getConnectedNodes = function (node) {\n        return {\n            above: [],\n            below: []\n        };\n    };\n\n    R._getTargetNode = function (coords) {\n        var x = coords[0],\n            y = coords[1];\n\n\n    };\n\n    R._containerEventHandler = function (event) {\n        event = event || win.event;\n\n        if (noHandle) {\n            return;\n        }\n\n        /** @todo: do not use offsetX and offsetY */\n        var x = event.offsetX,//mathFloor(event.pageX || (event.clientX + doc.body.scrollLeft + doc.documentElement.scrollLeft) || 0),\n            y = event.offsetY,//mathFloor(event.pageY || (event.clientY + doc.body.scrollTop + doc.documentElement.scrollTop) || 0),\n            type = event.type,\n            node = R._getTargetNode([x, y]);\n\n        //console.log(type + \":: x: \" + x + \" y: \" + y);\n\n        /*\n        if (typeof node.listeners[type] === 'function') {\n            node.listeners[type].call(node, e);\n        }*/\n\n    };\n\n\n\n\n\n    FauxNode =  function (parent) {\n        this.type = \"basic\";\n\n        this.owner = parent;\n\n        // Element reference needed to get attrs so that there is no need to\n        // maintain a redundant copy.\n        this._rElement = null;\n\n        // False if this element does not need mouse interactivity.\n        this.mouseInteractions = false;\n        this.matrix = null;\n\n        // An outline path that will be the outline of the shape or in case of\n        // text the rect that bounds the text.\n        this.outlinePath = null;\n\n        this.conf = {};\n    };\n\n    FauxNode.prototype = {\n\n        constructor: FauxNode,\n\n        /**\n         * This method does the complete rendering of the element, including\n         * (re)setting the bbox and image map.\n         *\n         * @returns {_L10.FauxNode.prototype}\n         */\n        render: function () {\n\n            var o = this;\n\n            o.draw();\n            o.setBBox();\n\n            return o;\n        },\n\n        /**\n         * Applies the transforms and clipping to the context and draws the\n         * element.\n         *\n         * @returns {undefined}\n         */\n        draw: function () {\n            var o = this,\n                ctx = o.context,\n                el = o._rElement,\n                m = el.matrix,\n                isClipped = o.isClipped,\n                attrs = o.validateAttrs(),\n                cr,\n                end;\n\n\n            // After the validation the attributes need to be set to the element\n            // as validateAttrs works on a copy of the attrs object.\n            el.attrs = attrs;\n\n            ctx.save();\n\n            ctx.fillStyle = attrs.fill;\n            ctx.strokeStyle = attrs.stroke;\n            ctx.lineWidth = attrs['stroke-width'];\n\n            // Applying the clip before the context is transformed as is the case\n            // in case of SVG.\n            if (cr = attrs['clip-rect']) {\n                cr = cr.split(\" \");\n                ctx.rect(cr[0], cr[1], cr[2], cr[3]);\n                ctx.clip();\n                isClipped = o.isClipped = true;\n            }\n\n            o.applyTransform(m);\n\n            o.paint();\n\n            ctx.restore();\n        },\n\n        /**\n         * Parse the attributes provided to paint the element shape using the\n         * canvas context.\n         *\n         * Overridden by individual derived FauxNodes\n         */\n        paint: function () {\n        },\n\n        /**\n         * The redraw of the FauxNodes is to be handled by the CanvasObjectModel\n         * instance as it involves redrawing all the elements corresponsing to\n         * that canvas in the proper order.\n         */\n        redraw: function () {\n            this.COMInstance.redraw(this);\n        },\n\n        /**\n         * Clears the rectangle corresponding to the bounding box of the node.\n         */\n        clear: function () {\n            var o = this,\n                ctx = o.context,\n                bbox = o._bbox;\n\n            /** @todo: while clearing the stroke-width also needs to be accounted for. */\n            if (bbox) {\n                ctx.clearRect(bbox.x, bbox.y, bbox.width, bbox.height);\n            }\n        },\n\n        /**\n         * Creates the area node in the image map so that mouse interactivity\n         * can be emulated using it.\n         */\n        addMouseInteractivity: function () {\n            var o = this,\n                attrs = o._rElement.attrs,\n                bbox = o._bbox,\n                map = o.owner.wrapper._map,\n                shape = (o.type === 'circle') ? 'circle' : 'rect',\n                coords = (shape === 'circle') ? [attrs.cx, attrs.cy, attrs.r].join(\",\")\n                    : [bbox.x, bbox.y, bbox.x2, bbox.y2].join(\",\"),\n                area,\n                end;\n\n                area = $('area', {shape: shape, coords: coords});\n                if (map.firstChild) {\n                    map.insertBefore(area, map.firstChild);\n                }\n                else {\n                    map.appendChild(area);\n                }\n\n                /** @todo: should be put this check here */\n                o._mouseArea = area;\n\n                // Needed for paths.\n                o.eventListeners = {};\n        },\n\n\n        /**\n         * Update the coords of the area node (image map) corresponding to the FauxNode\n         * after it has been modified by changing attributes.\n         */\n        updateMapAreaCoords: function () {\n            var o = this,\n                oArea = o._mouseArea,\n                bbox = o._bbox;\n\n            if (oArea) {\n                //o.context.strokeRect(bbox.x, bbox.y, bbox.width, bbox.height);\n                if (o instanceof CircleFauxNode) {\n                    var r = bbox.width / 2;\n                    oArea.setAttribute('coords',\n                        [bbox.x + r, bbox.y + r, r].join(\",\"));\n                }\n                else {\n                    oArea.setAttribute('coords',\n                        [bbox.x, bbox.y, bbox.x2, bbox.y2].join(\",\"));\n                }\n            }\n        },\n\n        /**\n         * Applies the transform given the transformation matrix to the context.\n         *\n         * @param {type} matrix\n         * @param {type} bbox\n         * @param {type} dontsetbbox\n         *\n         * @returns {_L10.FauxNode.prototype.transformBBox.tbox}\n         */\n        applyTransform: function (m) {\n            var o = this,\n                ctx = o.context,\n                split;\n\n            if (m) {\n                split = m.split();\n                ctx.translate(split.dx, split.dy);\n                !split.noRotation && ctx.rotate(deg2rad * split.rotate);\n                ctx.scale(split.scalex, split.scaley);\n            }\n        },\n\n        /**\n         *\n         */\n        setBBox: function () {\n            var o = this,\n                el = o._rElement,\n                m = el.matrix,\n                parent = o.owner,\n                pm = parent.getTransformMatrix && parent.getTransformMatrix();\n\n            if (pm) {\n                pm = pm.clone();\n                pm.add(m);\n                m = pm;\n            }\n\n            if (o.outlinePath) {\n                o._bbox = R.pathBBox(R.transformPath(o.outlinePath, m.toTransformString()).toString());\n            }\n            else {\n                o.setShapeBBox(m);\n            }\n\n            o._mouseArea && o.updateMapAreaCoords();\n        },\n\n        getBBox: function () {\n            return this._bbox;\n        },\n\n        drawPath: function (path) {\n            var o = this,\n                ctx = o.context,\n                len = (path && path.length) || 0,\n                pp = PathParser,\n                i = 0,\n                command,\n                x,\n                y,\n                end;\n\n            // The PathParser object has been borrowed from canvg. All 3rd party attributions implied.\n            pp.reset();\n            pp.setTokens(path);\n\n            //var bb = new BoundingBox();\n            if (ctx != null) {\n                ctx.beginPath();\n            }\n\n            while (!pp.isEnd()) {\n                pp.nextCommand();\n                switch (pp.command) {\n                    case 'M':\n                    case 'm':\n                        var p = pp.getAsCurrentPoint();\n                        pp.addMarker(p);\n                        //bb.addPoint(p.x, p.y);\n                        if (ctx != null) {\n                            ctx.moveTo(p.x, p.y);\n                        }\n                        pp.start = pp.current;\n                        while (!pp.isCommandOrEnd()) {\n                            var p = pp.getAsCurrentPoint();\n                            pp.addMarker(p, pp.start);\n                            //bb.addPoint(p.x, p.y);\n                            if (ctx != null) {\n                                ctx.lineTo(p.x, p.y);\n                            }\n                        }\n                        break;\n                    case 'L':\n                    case 'l':\n                        while (!pp.isCommandOrEnd()) {\n                            var c = pp.current;\n                            var p = pp.getAsCurrentPoint();\n                            pp.addMarker(p, c);\n                            //bb.addPoint(p.x, p.y);\n                            if (ctx != null) {\n                                ctx.lineTo(p.x, p.y);\n                            }\n                        }\n                        break;\n                    case 'H':\n                    case 'h':\n                        while (!pp.isCommandOrEnd()) {\n                            var newP = new Point((pp.isRelativeCommand() ? pp.current.x : 0) + pp.getScalar(), pp.current.y);\n                            pp.addMarker(newP, pp.current);\n                            pp.current = newP;\n                            //bb.addPoint(pp.current.x, pp.current.y);\n                            if (ctx != null) {\n                                ctx.lineTo(pp.current.x, pp.current.y);\n                            }\n                        }\n                        break;\n                    case 'V':\n                    case 'v':\n                        while (!pp.isCommandOrEnd()) {\n                            var newP = new Point(pp.current.x, (pp.isRelativeCommand() ? pp.current.y : 0) + pp.getScalar());\n                            pp.addMarker(newP, pp.current);\n                            pp.current = newP;\n                            //bb.addPoint(pp.current.x, pp.current.y);\n                            if (ctx != null) {\n                                ctx.lineTo(pp.current.x, pp.current.y);\n                            }\n                        }\n                        break;\n                    case 'C':\n                    case 'c':\n                        while (!pp.isCommandOrEnd()) {\n                            var curr = pp.current;\n                            var p1 = pp.getPoint();\n                            var cntrl = pp.getAsControlPoint();\n                            var cp = pp.getAsCurrentPoint();\n                            pp.addMarker(cp, cntrl, p1);\n                            //bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            if (ctx != null) {\n                                ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            }\n                        }\n                        break;\n                    case 'S':\n                    case 's':\n                        while (!pp.isCommandOrEnd()) {\n                            var curr = pp.current;\n                            var p1 = pp.getReflectedControlPoint();\n                            var cntrl = pp.getAsControlPoint();\n                            var cp = pp.getAsCurrentPoint();\n                            pp.addMarker(cp, cntrl, p1);\n                            //bb.addBezierCurve(curr.x, curr.y, p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            if (ctx != null) {\n                                ctx.bezierCurveTo(p1.x, p1.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            }\n                        }\n                        break;\n                    case 'Q':\n                    case 'q':\n                        while (!pp.isCommandOrEnd()) {\n                            var curr = pp.current;\n                            var cntrl = pp.getAsControlPoint();\n                            var cp = pp.getAsCurrentPoint();\n                            pp.addMarker(cp, cntrl, cntrl);\n                            //bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n                        }\n                        break;\n                    case 'T':\n                    case 't':\n                        while (!pp.isCommandOrEnd()) {\n                            var curr = pp.current;\n                            var cntrl = pp.getReflectedControlPoint();\n                            pp.control = cntrl;\n                            var cp = pp.getAsCurrentPoint();\n                            pp.addMarker(cp, cntrl, cntrl);\n                            //bb.addQuadraticCurve(curr.x, curr.y, cntrl.x, cntrl.y, cp.x, cp.y);\n                            if (ctx != null) ctx.quadraticCurveTo(cntrl.x, cntrl.y, cp.x, cp.y);\n                        }\n                        break;\n                    case 'A':\n                    case 'a':\n                        while (!pp.isCommandOrEnd()) {\n                            var curr = pp.current;\n                            var rx = pp.getScalar();\n                            var ry = pp.getScalar();\n                            var xAxisRotation = pp.getScalar() * (Math.PI / 180.0);\n                            var largeArcFlag = pp.getScalar();\n                            var sweepFlag = pp.getScalar();\n                            var cp = pp.getAsCurrentPoint();\n\n                            // Conversion from endpoint to center parameterization\n                            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n                            // x1', y1'\n                            var currp = new Point(\n                                Math.cos(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.sin(xAxisRotation) * (curr.y - cp.y) / 2.0,\n                                -Math.sin(xAxisRotation) * (curr.x - cp.x) / 2.0 + Math.cos(xAxisRotation) * (curr.y - cp.y) / 2.0\n                            );\n                            // adjust radii\n                            var l = Math.pow(currp.x,2)/Math.pow(rx,2)+Math.pow(currp.y,2)/Math.pow(ry,2);\n                            if (l > 1) {\n                                rx *= Math.sqrt(l);\n                                ry *= Math.sqrt(l);\n                            }\n                            // cx', cy'\n                            var s = (largeArcFlag == sweepFlag ? -1 : 1) * Math.sqrt(\n                                ((Math.pow(rx,2)*Math.pow(ry,2))-(Math.pow(rx,2)*Math.pow(currp.y,2))-(Math.pow(ry,2)*Math.pow(currp.x,2))) /\n                                (Math.pow(rx,2)*Math.pow(currp.y,2)+Math.pow(ry,2)*Math.pow(currp.x,2))\n                            );\n                            if (isNaN(s)) s = 0;\n                            var cpp = new Point(s * rx * currp.y / ry, s * -ry * currp.x / rx);\n                            // cx, cy\n                            var centp = new Point(\n                                (curr.x + cp.x) / 2.0 + Math.cos(xAxisRotation) * cpp.x - Math.sin(xAxisRotation) * cpp.y,\n                                (curr.y + cp.y) / 2.0 + Math.sin(xAxisRotation) * cpp.x + Math.cos(xAxisRotation) * cpp.y\n                            );\n                            // vector magnitude\n                            var m = function(v) { return Math.sqrt(Math.pow(v[0],2) + Math.pow(v[1],2)); }\n                            // ratio between two vectors\n                            var r = function(u, v) { return (u[0]*v[0]+u[1]*v[1]) / (m(u)*m(v)) }\n                            // angle between two vectors\n                            var a = function(u, v) { return (u[0]*v[1] < u[1]*v[0] ? -1 : 1) * Math.acos(r(u,v)); }\n                            // initial angle\n                            var a1 = a([1,0], [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry]);\n                            // angle delta\n                            var u = [(currp.x-cpp.x)/rx,(currp.y-cpp.y)/ry];\n                            var v = [(-currp.x-cpp.x)/rx,(-currp.y-cpp.y)/ry];\n                            var ad = a(u, v);\n                            if (r(u,v) <= -1) ad = Math.PI;\n                            if (r(u,v) >= 1) ad = 0;\n\n                            // for markers\n                            var dir = 1 - sweepFlag ? 1.0 : -1.0;\n                            var ah = a1 + dir * (ad / 2.0);\n                            var halfWay = new Point(\n                                centp.x + rx * Math.cos(ah),\n                                centp.y + ry * Math.sin(ah)\n                            );\n                            pp.addMarkerAngle(halfWay, ah - dir * Math.PI / 2);\n                            pp.addMarkerAngle(cp, ah - dir * Math.PI);\n\n                            //bb.addPoint(cp.x, cp.y); // TODO: this is too naive, make it better\n                            if (ctx != null) {\n                                var r = rx > ry ? rx : ry;\n                                var sx = rx > ry ? 1 : rx / ry;\n                                var sy = rx > ry ? ry / rx : 1;\n\n                                ctx.translate(centp.x, centp.y);\n                                ctx.rotate(xAxisRotation);\n                                ctx.scale(sx, sy);\n                                ctx.arc(0, 0, r, a1, a1 + ad, 1 - sweepFlag);\n                                ctx.scale(1/sx, 1/sy);\n                                ctx.rotate(-xAxisRotation);\n                                ctx.translate(-centp.x, -centp.y);\n                            }\n                        }\n                        break;\n                    case 'Z':\n                    case 'z':\n                        if (ctx != null) ctx.closePath();\n                        pp.current = pp.start;\n                }\n            }\n\n            o.outlinePath = path;\n\n            return o;\n        },\n\n        /**\n         * Methods to add and remove event listeners emulating the DOM of\n         * standard browsers (and also the non-standard one).\n         */\n        addEventListener: function () {\n            var o = this,\n                args = arguments,\n                eventName = args && args[0],\n                handler = args && args[1],\n                area,\n                checkPathHandler,\n                end;\n\n            if (!o._mouseArea) {\n                o.addMouseInteractivity();\n            }\n\n            area = o._mouseArea;\n\n            if (typeof eventName === 'string' && typeof handler === 'function') {\n                /*\n                 * If the shape has an associated path then we need to check if\n                 * the mouse is within the co-ordinates of the path.\n                 */\n                if (o._path) {\n\n                    /*\n                     * If the event being listened to is mouseover, mouseout or\n                     * mousemove then the mouse position has to be constantly\n                     * monitored and the event handler called explicitly when\n                     * appropriate.\n                     */\n                    if (eventName === 'mouseover' || eventName === 'mouseout' || eventName === 'mousemove') {\n\n                        if (!o._mousemoveAdded) {\n                            var startListening = (function (node) {\n\n                                var isInside = false,\n                                    isOutside = true,\n                                    transition = false;\n\n                                return function (event) {\n                                    /** @todo: replace layerX and layerY with\n                                     * standard ways of determining mouse position.\n                                     */\n                                    var x = event.layerX,\n                                        y = event.layerY;\n\n                                    transition = false;\n                                    /*\n                                     * Check if the current position of the mouse\n                                     * pointer lies within the path or not.\n                                     */\n                                    if (R.isPointInsidePath(node._transformPath, x, y)) {\n                                    /*\n                                     * @todo: fix isPointInsidePath to return the\n                                     * proper result when the mouse pointer is on\n                                     * the same horizontal/vertical lines as one\n                                     * of the vertices of the path.\n                                     */\n                                        isInside = true;\n                                        if (isOutside) {\n                                            isOutside = false;\n                                            transition = true;\n                                        }\n                                    }\n                                    else {\n                                        isOutside = true;\n                                        if (isInside) {\n                                            isInside = false;\n                                            transition = true;\n                                        }\n                                    }\n\n                                    // Based on the state of the flags, fire the\n                                    // appropriate event handlers.\n                                    if (isOutside && transition && node.eventListeners['mouseout']) {\n                                        node.eventListeners['mouseout'].apply(this, arguments);\n                                    }\n                                    if (isInside) {\n                                        if (transition && node.eventListeners['mouseover']) {\n                                            node.eventListeners['mouseover'].apply(this, arguments);\n                                        }\n                                        if (node.eventListeners['mousemove']) {\n                                            node.eventListeners['mousemove'].apply(this, arguments);\n                                        }\n                                    }\n                                };\n                            })(o);\n\n                            area.addEventListener('mousemove', startListening, false);\n                            o._mousemoveAdded = true;\n                        }\n\n                        o.eventListeners[eventName] = handler;\n                    }\n                    else {\n                        var checkPathHandler = (function (node, handler) {\n                            return function (event) {\n                                if (R.isPointInsidePath(node._path, event.layerX, event.layerY)) {\n                                    handler.apply(this, arguments);\n                                }\n                            };\n                        }(o, handler));\n\n                        area.addEventListener(eventName, checkPathHandler, false);\n                    }\n                }\n                else {\n                    area.addEventListener(eventName, handler, false);\n                }\n            }\n        },\n\n        removeEventListener: function () {\n            var o = this,\n                args = arguments,\n                eventName = args && args[0],\n                handler = args && args[1],\n                area,\n                end;\n\n            if (!o._mouseArea) {\n                return;\n            }\n            area = o._mouseArea;\n\n            if (typeof eventName === 'string' && typeof handler === 'function') {\n                area.removeEventListener(eventName, handler);\n            }\n        },\n\n        attachEvent: function () {\n        },\n\n        detachEvent: function () {\n        },\n\n        validateAttrs: function (attrs) {\n\n            var o = this,\n                elAttrs = clone(o._rElement.attrs),\n                attr,\n                val;\n\n            if (attrs === null) {\n                if (o._isValid) {\n                    return elAttrs;\n                }\n                else {\n                    o._isValid = true;\n                }\n            }\n\n            attrs = attrs || elAttrs;\n\n            for (attr in attrs) {\n                val = attrs[attr];\n\n                switch (attr) {\n\n                    default:\n                        continue;\n                }\n            }\n\n            return attrs;\n        },\n\n        attrs: function () {\n        }\n    };\n\n\n\n\n    var NodeListItem = function (node) {\n            this.node = node;\n            this.next = null;\n            this.prev = null;\n        },\n\n        NodeList = function () {\n            this.top = null;\n            this.bottom = null;\n        };\n\n    NodeList.prototype = {\n\n        constructor: NodeList,\n\n        add: function (node) {\n\n            node = new NodeListItem(node);\n\n            if (!this.bottom) {\n                this.bottom = node;\n            }\n            if (this.top) {\n                this.top.next = node;\n            }\n            node.next = null;\n            node.prev = this.top;\n\n            this.top = node;\n        },\n\n        addList: function (list) {\n            if (!this.bottom) {\n                this.bottom = list.bottom;\n            }\n\n            if (this.top) {\n                this.top.next = list.bottom;\n                list.bottom.prev = this.top;\n            }\n\n            this.top = list.top;\n        },\n\n        toFront: function (node) {\n            if (this.top === node) {\n                return false;\n            }\n\n            if (this.bottom === node) {\n                this.bottom = node.next;\n            }\n\n            //var map = node.node.canvas._map,\n            //    area = node.node._mouseArea;\n\n            node.prev && (node.prev.next = node.next);\n            node.next && (node.next.prev = node.prev);\n\n            this.top.next = node;\n            node.prev = this.top;\n            node.next = null;\n\n            this.top = node;\n\n            /*if (map.firstChild) {\n                map.insertBefore(area, map.firstChild);\n            }\n            else {\n                map.appendChild(area);\n            }\n\n            node.redraw();*/\n        },\n\n        toBack: function (node) {\n            if (this.bottom === node) {\n                return false;\n            }\n\n            if (this.top === node) {\n                this.top = node.prev;\n            }\n\n            //var map = node.canvas._map,\n            //    area = node._mouseArea;\n\n            node.prev && (node.prev.next = node.next);\n            node.next && (node.next.prev = node.prev);\n\n            this.bottom.prev = node;\n            node.prev = null;\n            node.next = this.bottom;\n\n            this.bottom = node;\n\n            /*map.appendChild(area);\n\n            node.redraw();*/\n        },\n\n        insertBefore: function () {\n        },\n\n        insertAfter: function () {\n        },\n\n        each: function (fn, args) {\n            var item = this.bottom;\n\n            while (item) {\n                fn.apply(item.node, args);\n                item = item.next;\n            }\n        },\n\n        iterate: function (fn, args) {\n            var item = this.bottom,\n                retVal = true;\n\n            while (item) {\n                retVal = fn.apply(item.node, args);\n\n                if (retVal === false) {\n                    break;\n                }\n\n                item = item.next;\n            }\n        },\n\n        dispose: function () {\n\n            this.each(function () {\n                this.node.dispose && this.node.dispose();\n            });\n\n            this.top = null;\n            this.bottom = null;\n        },\n    };\n\n    /**\n     *\n        ncowner, a NodeCollection that corresponds to the collection of which\n        the layer neing created  is a part\n\n        above, a NodeCollection iterator, that indicated the collection the layer has to be rendered. If\n        not provided then this is the first layer of ncowner.\n     */\n    var CanvasLayer = function (ncowner, canvas) {\n        this.items = new NodeList();\n\n        this.owner = ncowner;\n        //this.above = above;\n        this.element = null;\n\n        if (canvas) {\n            this.element = canvas;\n        }\n        else {\n            this.init();\n        }\n    };\n\n    CanvasLayer.prototype = {\n        constructor: CanvasLayer,\n\n        appendChild: function () {\n            var o = this,\n                ownerWrapper = o.owner.wrapper,\n                ele = this.element;\n\n            if (ownerWrapper._image) {\n                ownerWrapper.insertBefore(ele, ownerWrapper._image);\n            }\n            else {\n                ownerWrapper.appendChild(ele);\n            }\n        },\n\n        insertBefore: function () {\n\n        },\n\n        insertAfter: function () {\n\n        },\n\n        init: function () {\n            this.element = $(\"canvas\");\n            // CHECKPOINT: width and height in %?\n            $(this.element, {\n                width: this.owner.wrapper.offsetWidth,\n                height: this.owner.wrapper.offsetHeight\n            });\n\n            this.element.style.cssText = \"position:absolute;left:0;top:0;\";\n\n            this.appendChild();\n        },\n\n        getCanvas: function () {\n            return this.element;\n        },\n\n        getContext: function () {\n            return this.element.getContext('2d');\n        },\n\n        addToLayer: function (node) {\n            this.items.add(node);\n        },\n\n        mergeWithLayerOnTop: function (layerObj) {\n            this.items.addList(layerObj.items);\n            layerObj.dispose(true);\n        },\n\n        mergeWithLayerOnBottom: function (layerObj) {\n            layerObj.items.addList(this.items);\n            this.items = layerObj.items;\n            layerObj.dispose(true);\n        },\n\n        dispose: function (softDispose) {\n\n            if (!softDispose) {\n                this.items.each(function () {\n                    this.dispose();\n                });\n            }\n\n            this.items = null;\n            this.owner = null;\n\n            this.element.parentNode.removeChild(this.element);\n            this.element = null;\n        }\n    };\n\n    var NodeCollection = function (parent, wrapper, canvas) {\n\n        this.nodeItems =  new NodeList();\n        this.collectionItems = new NodeList();\n        this.layerItems = new NodeList();\n\n        this.owner = this.parent = parent;\n        this.layerOnTop = null;\n\n        this.currentLayer = null;\n        this.baseLayer = null;\n\n        if (wrapper) {\n            this.wrapper = wrapper;\n            this.currentLayer = this.baseLayer = new CanvasLayer(this, canvas);\n        }\n        else {\n            this.init();\n        }\n    };\n\n    NodeCollection.prototype = {\n        constructor: NodeCollection,\n\n        init: function () {\n\n            var o = this,\n                parent = o.parent,\n                imageMap = parent.wrapper._image,\n                wrapper = $(\"div\");\n\n            // Hacky but need a refernce to the image map to addEventListeners.\n            wrapper.style.cssText = \"width:100%;height:100%;position:absolute;left:0;top:0;\";\n\n            wrapper._map = parent.wrapper._map;\n\n            if (imageMap) {\n                parent.wrapper.insertBefore(wrapper, imageMap);\n            }\n            else {\n                parent.wrapper.appendChild(wrapper);\n            }\n\n            o.wrapper = wrapper;\n            o.currentLayer = o.baseLayer = new CanvasLayer(o);\n        },\n\n        getCurrentContext: function () {\n            return this.currentLayer.getContext();\n        },\n\n        setLayerOnTop: function (layerObj) {\n            this.layerOnTop = layerObj;\n        },\n\n        getCurrentCanvas: function () {\n            return this.currentLayer.getCanvas();\n        },\n\n        addNode: function (node) {\n            this.nodeItems.add(node);\n\n            if (node.type === \"group\") {\n                this.addCollection(node);\n            }\n            else {\n                this.currentLayer.addToLayer(node);\n            }\n        },\n\n        addCollection: function (collectionNode) {\n\n            collectionNode = collectionNode || new NodeCollection(this);\n\n            this.collectionItems.add(collectionNode);\n            this.currentLayer = new CanvasLayer(this);\n            this.layerItems.add(this.currentLayer);\n            collectionNode.setLayerOnTop(this.currentLayer);\n        },\n\n        dispose: function () {\n            this.nodeItems.dispose();\n            this.collectionItems.dispose();\n            this.layerItems.dispose();\n            this.owner = this.parent = null;\n\n            this.ownerLayer = null;\n            this.currentLayer = null;\n            this.baseLayer = null;\n        }\n    };\n\n    /**\n     * The CanvasObjectModel will be a layer of abstraction above the individual\n     * FauxNodes created to emulate the DOM in case of canvas rendering.\n     * The engine will be the point of contact for Raphael._engine that will be\n     * the direct consumer of the FauxNodes.\n     */\n    var CanvasObjectModel = function (cnvs, wrpr, width, height) {\n\n        var com = this,\n            root = new NodeCollection(null, wrpr, cnvs);\n\n        //root.set\n\n        com.width = width;\n        com.height = height;\n\n        com.createNode = function (type, parent) {\n\n            parent = parent || root;\n\n            var node,\n                nodeItems = parent.nodeItems,\n                layer = parent.currentLayer,\n                canvasEle = layer.getCanvas();\n\n            switch (type) {\n                case 'rect':\n                    node = new RectFauxNode(parent);\n                    break;\n\n                case 'circle':\n                    node = new CircleFauxNode(parent);\n                    break;\n\n                case 'path':\n                    node = new PathFauxNode(parent);\n                    break;\n\n                case 'text':\n                    node = new TextFauxNode(parent);\n                    break;\n\n                case 'group':\n                    node = new GroupFauxNode(parent);\n                    parent.addCollection(node);\n                    break;\n\n                default:\n                    node = new FauxNode(canvasEle);\n            }\n\n            node.COMInstance = this;\n            nodeItems.add(node);\n            layer.addToLayer(node);\n\n            return node;\n        };\n\n        /**\n         * This method is needed to redraw a node. Redraw is to be handled at the\n         * COM level as redrawing one node needs all the (connected) nodes to be\n         * redrawn in the right order.\n         *\n         * @param {type} node The node that needs to be redrawn.\n         *\n         * @returns {undefined}\n         */\n        com.redraw = function (node) {\n\n            // Check if node is a group or a shape.\n            var nodeList,\n                childNode,\n                layer;\n\n            if (node.type === \"group\") {\n                nodeList = node.nodeItems;\n                node.render();\n            }\n            else {\n\n                layer = node.layer;\n                nodeList = layer.items;\n                childNode = nodeList.bottom;\n\n                // Clear the canvas.\n                layer.element.width = layer.element.width;\n\n                while (childNode) {\n                    fNode = childNode.node;\n                    (fNode.type !== \"group\") && fNode.render();\n                    childNode = childNode.next;\n                }\n\n            }\n\n        };\n\n        com.insertBefore = function (node) {\n\n        };\n\n        com.insertAfter = function (node) {\n\n        };\n\n        com.removeNode = function (node) {\n\n        };\n\n        com.refreshNode = function (node) {\n\n        };\n\n        com.refreshAll = function () {\n\n        };\n    };\n\n\n\n    Point = function(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    Point.prototype.angleTo = function(p) {\n        return Math.atan2(p.y - this.y, p.x - this.x);\n    }\n\n    Point.prototype.applyTransform = function(v) {\n        var xp = this.x * v[0] + this.y * v[2] + v[4];\n        var yp = this.x * v[1] + this.y * v[3] + v[5];\n        this.x = xp;\n        this.y = yp;\n    }\n\n    PathParser = new (function() {\n\n        this.tokens = null;\n\n        this.setTokens = function (d) {\n            if (typeof d === 'string') {\n                this.tokens = d.split(' ');\n            }\n            else {\n                this.tokens = d;\n            }\n        };\n\n        this.reset = function() {\n            this.i = -1;\n            this.command = '';\n            this.previousCommand = '';\n            this.start = new Point(0, 0);\n            this.control = new Point(0, 0);\n            this.current = new Point(0, 0);\n            this.points = [];\n            this.angles = [];\n        };\n\n        this.isEnd = function() {\n            return this.i >= this.tokens.length - 1;\n        }\n\n        this.isCommandOrEnd = function() {\n            if (this.isEnd()) {\n                return true;\n            }\n\n            return this.tokens[this.i + 1].toString().match(/^[A-Za-z]$/) != null;\n        }\n\n        this.isRelativeCommand = function() {\n            switch(this.command)\n            {\n                case 'm':\n                case 'l':\n                case 'h':\n                case 'v':\n                case 'c':\n                case 's':\n                case 'q':\n                case 't':\n                case 'a':\n                case 'z':\n                    return true;\n                    break;\n            }\n            return false;\n        }\n\n        this.getToken = function() {\n            this.i++;\n            return this.tokens[this.i];\n        }\n\n        this.getScalar = function() {\n            return parseFloat(this.getToken());\n        }\n\n        this.nextCommand = function() {\n            this.previousCommand = this.command;\n            this.command = this.getToken();\n        }\n\n        this.getPoint = function() {\n            var p = new Point(this.getScalar(), this.getScalar());\n            return this.makeAbsolute(p);\n        }\n\n        this.getAsControlPoint = function() {\n            var p = this.getPoint();\n            this.control = p;\n            return p;\n        }\n\n        this.getAsCurrentPoint = function() {\n            var p = this.getPoint();\n            this.current = p;\n            return p;\n        }\n\n        this.getReflectedControlPoint = function() {\n            if (this.previousCommand.toLowerCase() != 'c' &&\n                this.previousCommand.toLowerCase() != 's' &&\n                this.previousCommand.toLowerCase() != 'q' &&\n                this.previousCommand.toLowerCase() != 't' ){\n                return this.current;\n            }\n\n            // reflect point\n            var p = new Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);\n            return p;\n        }\n\n        this.makeAbsolute = function(p) {\n            if (this.isRelativeCommand()) {\n                p.x += this.current.x;\n                p.y += this.current.y;\n            }\n            return p;\n        }\n\n        this.addMarker = function(p, from, priorTo) {\n            // if the last angle isn't filled in because we didn't have this point yet ...\n            if (priorTo != null && this.angles.length > 0 && this.angles[this.angles.length-1] == null) {\n                this.angles[this.angles.length-1] = this.points[this.points.length-1].angleTo(priorTo);\n            }\n            this.addMarkerAngle(p, from == null ? null : from.angleTo(p));\n        }\n\n        this.addMarkerAngle = function(p, a) {\n            this.points.push(p);\n            this.angles.push(a);\n        }\n\n        this.getMarkerPoints = function() {\n            return this.points;\n        }\n\n        this.getMarkerAngles = function() {\n            for (var i=0; i<this.angles.length; i++) {\n                if (this.angles[i] == null) {\n                    for (var j=i+1; j<this.angles.length; j++) {\n                        if (this.angles[j] != null) {\n                            this.angles[i] = this.angles[j];\n                            break;\n                        }\n                    }\n                }\n            }\n            return this.angles;\n        }\n    })();\n\n\n\n\n    /**\n     * The FauxNode is the adapter written to give DOM node like handling to the\n     * shapes that are create using canvas object model.\n     */\n\n    RectFauxNode = function (parentObj) {\n        this.type = \"rect\";\n        this._isValid = false;\n\n        this.parent = this.owner = parentObj;\n        this.context = parentObj.getCurrentContext();\n        this.layer = parentObj.currentLayer;\n    };\n\n    RectFauxNode.prototype = R.extend(new FauxNode(), {\n\n        constructor: RectFauxNode,\n\n        paint: function () {\n\n            var o = this,\n                ctx = o.context,\n                // CHECKPOINT 3. Rename validateAttrs to getValidAttrs?\n                attrs = o.validateAttrs(),\n                x = attrs.x,\n                y = attrs.y,\n                w = attrs.width,\n                h = attrs.height,\n                r = attrs.r,\n                /** @todo: provide support for rx, ry */\n                rx = r || attrs.rx,\n                ry = r || attrs.ry;\n\n            if (attrs.r) {\n                path = [\"M\", x + rx, y, \"L\", x + w - rx, y]\n                    .concat([\"A\", rx, ry, 0, 0, 1,  x + w, y + ry])\n                    .concat([\"L\", x + w, y + h - ry])\n                    .concat([\"A\", rx, ry, 0, 0, 1, x + w - rx, y + h])\n                    .concat([\"L\", x + rx, y + h])\n                    .concat([\"A\", rx, ry, 0, 0, 1, x, y + h - ry])\n                    .concat([\"L\", x, y + ry])\n                    .concat([\"A\", rx, ry, 0, 0, 1, x + rx, y, \"Z\"]);\n            }\n            else {\n                path = [\"M\", x, y, \"H\", x + w, \"V\", y + h, \"H\", x, \"V\", y, \"Z\"];\n            }\n\n            o.drawPath(path);\n\n            if (attrs['stroke-width']) {\n                var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n                if (strokeAlpha !== undefined) {\n                    ctx.globalAlpha = strokeAlpha;\n                }\n                ctx.stroke();\n            }\n            var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n            if (fillAlpha !== undefined) {\n                ctx.globalAlpha = fillAlpha;\n            }\n            ctx.fill();\n\n            return;\n        },\n\n        validateAttrs: function (attrs) {\n            var o = this,\n                elAttrs = clone(o._rElement.attrs),\n                attr,\n                val;\n\n\n            if (attrs === null) {\n                if (o._isValid) {\n                    return elAttrs;\n                }\n                else {\n                    o._isValid = true;\n                }\n            }\n\n            attrs = attrs || elAttrs;\n\n            for (attr in attrs) {\n                val = attrs[attr];\n\n                switch (attr) {\n                    case \"r\":\n                        var w = elAttrs.width,\n                            h = elAttrs.height,\n                            maxR = mmin(w, h) / 2;\n\n                        if (val > maxR) {\n                            attrs.r = maxR;\n                        }\n\n                        if (val < 0) {\n                            attrs.r = 0;\n                        }\n                        break;\n\n                    case \"width\":\n                    case \"height\":\n                        if (val < 0) {\n                            attrs[attr] = 0;\n                        };\n                        break;\n\n                    default:\n                        continue;\n                }\n            }\n\n            return attrs;\n        },\n\n        setShapeBBox: function (m) {\n            var o = this,\n                el = o._rElement,\n                attrs = el.attrs,\n                sX = m.get(0),\n                sY = m.get(3),\n                tX = m.get(4),\n                tY = m.get(5),\n                strokeW = attrs['stroke-width'];\n\n            o._bbox = {\n                x: ((attrs.x * sX) + tX) - strokeW,\n                y: ((attrs.y * sY) + tY) - strokeW,\n                width: (attrs.width * sX) + (2 * strokeW),\n                height: (attrs.height * sY) + (2 * strokeW),\n            };\n\n            o._bbox.x2 = o._bbox.x + o._bbox.width;\n            o._bbox.y2 = o._bbox.y + o._bbox.height;\n\n            o.X = o._bbox.x;\n            o.Y = o._bbox.y;\n            o.W = o._bbox.width;\n            o.H = o._bbox.height;\n        }\n    });\n\n    var CircleFauxNode = function (parentObj) {\n        this.type = \"circle\";\n        this._isValid = false;\n\n        this.parent = this.owner = parentObj;\n        this.context = parentObj.getCurrentContext();\n        this.layer = parentObj.currentLayer;\n    },\n\n    PathFauxNode = function (parentObj) {\n        this.type = \"path\";\n        this._isValid = false;\n\n        this.parent = this.owner = parentObj;\n        this.context = parentObj.getCurrentContext();\n        this.layer = parentObj.currentLayer;\n    },\n\n    TextFauxNode = function (parentObj) {\n        this.type = \"text\";\n        this._isValid = false;\n\n        this.parent = this.owner = parentObj;\n        this.context = parentObj.getCurrentContext();\n        this.layer = parentObj.currentLayer;\n    },\n\n    GroupFauxNode = function (parent, width, height) {\n\n        this.type = \"group\";\n\n        this.nodeItems =  new NodeList();\n        this.collectionItems = new NodeList();\n        this.layerItems = new NodeList();\n\n        this.owner = this.parent = parent;\n        this.layerOnTop = parent.currentLayer;\n\n        this.currentLayer = null;\n        this.baseLayer = null;\n\n        this.init();\n    };\n\n    CircleFauxNode.prototype = R.extend(new FauxNode(), {\n\n        constructor: CircleFauxNode,\n\n        paint: function () {\n            var o = this,\n                ctx = o.context,\n                attrs = o.validateAttrs(),\n                x = attrs.cx,\n                y = attrs.cy,\n                r = attrs.r,\n                /** @todo: provide support for rx, ry */\n                rx = r || attrs.rx,\n                ry = r || attrs.ry;\n\n            if (attrs.r) {\n\n                o.drawPath([\"M\", x + r, y, \"A\", rx, ry, 0, 1, 0, x - r, y, \"A\", rx, ry, 0, 1, 0, x + r, y, \"Z\"]);\n\n                if (attrs['stroke-width']) {\n                    var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n                    if (strokeAlpha !== undefined) {\n                        ctx.globalAlpha = strokeAlpha;\n                    }\n                    ctx.stroke();\n                }\n                var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n                if (fillAlpha !== undefined) {\n                    ctx.globalAlpha = fillAlpha;\n                }\n                ctx.fill();\n            }\n\n            return;\n        },\n\n        setShapeBBox: function (m) {\n            var o = this,\n                el = o._rElement,\n                attrs = el.attrs,\n                sX = m.get(0),\n                sY = m.get(3),\n                tX = m.get(4),\n                tY = m.get(5),\n                strokeW = attrs['stroke-width'];\n\n            o._bbox = {\n                x: tX + ((attrs.cx - attrs.r) * sX) - strokeW,\n                y: tY + ((attrs.cy - attrs.r) * sY) - strokeW,\n                width: 2 * (strokeW + (attrs.r * sX)),\n                height: 2 * ((attrs.r * sY) + strokeW)\n            };\n\n            o._bbox.x2 = o._bbox.x + o._bbox.width;\n            o._bbox.y2 = o._bbox.y + o._bbox.height;\n\n            o.X = o._bbox.x;\n            o.Y = o._bbox.y;\n            o.W = o._bbox.width;\n            o.H = o._bbox.height;\n        }\n    });\n\n    PathFauxNode.prototype = R.extend(new FauxNode(), {\n\n        constructor: PathFauxNode,\n\n        paint: function () {\n            var o = this,\n                el = o._rElement,\n                attrs = el.attrs,\n                path = el.attr('path'),\n                m = el.matrix,\n                ctx = o.context;\n\n            // 1. Get the path from the path attribute\n            // 2. Accept paths in different array formats.\n            // 3. Optimize as this can potentially be a huge pain-point.\n            // 4. Draw path mapping M,L,H,V etc to canvas APIs\n            o.drawPath(path);\n            o._transformPath = R.transformPath(path, m.toTransformString());\n\n            var strokeAlpha = attrs['stroke-opacity'] === undefined ? attrs['opacity'] : attrs['stroke-opacity'];\n            if (strokeAlpha !== undefined) {\n                ctx.globalAlpha = strokeAlpha;\n            }\n            ctx.stroke();\n            var fillAlpha = attrs['fill-opacity'] === undefined ? attrs['opacity'] : attrs['fill-opacity'];\n            if (fillAlpha !== undefined) {\n                ctx.globalAlpha = fillAlpha;\n            }\n            ctx.fill();\n\n            return;\n        }\n    });\n\n    TextFauxNode.prototype = R.extend(new FauxNode(), {\n\n        constructor: TextFauxNode,\n\n        paint: function () {\n            var o = this,\n                el = o._rElement,\n                attrs = el.attr(),\n                text = attrs['text'],\n                stroke = attrs['stroke'],\n                valign = attrs['vertical-align'],\n                halign = attrs['text-anchor'],\n                x = attrs['x'],\n                y = attrs['y'],\n                m = el.matrix,\n                ctx = o.context,\n                path;\n\n            // apply the font styles, if any\n\n            // find the dimensions of the text using the given styles.\n            // All the dimensions should be present in the attrs user provided OR default.\n            var fontSize = attrs['font-size'] || 10,\n                lineHeight = attrs['line-height'] || toInt(fontSize, 10) * 1.2,\n                fontArr = [\"normal\", fontSize, attrs['font']];\n\n            // draw the text.\n            ctx.fillStyle = stroke;\n            ctx.font = fontArr.join(\" \");\n\n            if (text) {\n                var texts = Str(text).split(/\\n|<br\\s*?\\/?>/ig),\n                    totalHeight = texts.length * lineHeight,\n                    totalWidth = -Infinity,\n                    startX = Infinity,\n                    startY,\n                    width,\n                    textX,\n                    textY;\n\n                if (valign === \"top\") {\n                    startY = y + lineHeight;\n                }\n                else if (valign === \"middle\") {\n                    startY = y - (totalHeight / 2) + (lineHeight / 2);\n                }\n                else { // valign is bottom.\n                    startY = y - totalHeight + lineHeight;\n                }\n\n                for (var i = 0, ii = texts.length; i < ii; i += 1) {\n\n                    text = texts[i];\n                    textY = startY + (lineHeight * i);\n                    width = ctx.measureText(text).width;\n\n                    if (halign === \"start\") {\n                        textX = x;\n                    }\n                    else if (halign === \"middle\") {\n                        textX = x - (width / 2);\n                    }\n                    else {\n                        textX = x - width;\n                    }\n\n                    totalWidth = mmax(totalWidth, width);\n                    startX = mmin(startX, textX);\n\n                    ctx.fillText(text, textX, textY);\n                }\n\n                el._textdirty = false;\n            }\n\n            o.outlinePath = [\n                \"M\",\n                startX,\n                startY - (lineHeight / 1.4),\n                \"H\",\n                startX + totalWidth,\n                \"V\",\n                startY - lineHeight + totalHeight,\n                \"H\",\n                startX,\n                \"V\",\n                startY - (lineHeight / 1.4)\n            ];\n\n            return;\n        }\n    });\n\n    GroupFauxNode.prototype = R.extend(R.extend(new FauxNode, NodeCollection.prototype), {\n\n        constructor: GroupFauxNode,\n\n        draw: function () {\n\n            // Clear the group canvas first.\n            this.layerItems.each(function () {\n                this.element.width = this.element.width;\n            });\n\n            FauxNode.prototype.draw.apply(this, arguments);\n        },\n\n        /**\n         * This method does the complete rendering of the element, including\n         * (re)setting the bbox and image map.\n         *\n         * @returns {_L10.FauxNode.prototype}\n         */\n        render: function () {\n\n            var o = this;\n\n            o.draw();\n            o.setBBox();\n\n            return o;\n        },\n\n        paint: function () {\n            var o = this,\n                list = o.nodeList,\n                el = o._rElement,\n                canvas = o.canvas,\n                attrs = el.attrs,\n                childNode = list.bottom;\n\n            /** @todo: Clean this up */\n            if (attrs.opacity !== undefined) {\n                this.layerItems.each(function () {\n                    this.getContext().globalAlpha = attrs.opacity;\n                });\n            }\n\n            while (childNode) {\n                childNode.render();\n                childNode = childNode.next;\n            }\n        },\n\n        setBBox: function () {\n\n        },\n\n        addMouseInteractivity: function () {\n        },\n\n        applyTransform: function (m) {\n            var o = this,\n                parent = o.parent,\n                parentMatrix = parent.getTransformMatrix && parent.getTransformMatrix();\n\n            // Parent is a group element with a transformation applied to it.\n            if (parentMatrix) {\n                o.matrixApplied = parentMatrix.clone();\n                o.matrixApplied.add(m.a, m.b, m.c, m.d, m.e, m.f);\n            }\n            else {\n                o.matrixApplied = m;\n            }\n\n            this.layerItems.each(function () {\n                FauxNode.prototype.applyTransform.apply(this, [o.matrixApplied]);\n            })\n        },\n\n        getTransformMatrix: function () {\n            return this.matrixApplied;\n        }\n    });\n\n    Element = function (node, paper, group) {\n        var o = this,\n            parent = group || paper;\n\n        o.node = o[0] = node;\n        node.raphael = true;\n        node.raphaelid = o.id = R._oid++;\n        node._rElement = o;\n\n        o.X = 0;\n        o.Y = 0;\n\n        o.attrs = o.attrs || {};\n        o.styles = o.styles || {};\n        o.followers = o.followers || [];\n\n        o.paper = paper;\n        o.com = parent.com;\n\n        o.ca = o.customAttributes = o.customAttributes ||\n            new paper._CustomAttributes();\n\n        o.matrix = R.matrix();\n        o._ = {\n            transform: [],\n            sx: 1,\n            sy: 1,\n            dx: 0,\n            dy: 0,\n            deg: 0\n        };\n\n        o.parent = parent;\n        !parent.bottom && (parent.bottom = o);\n\n        o.prev = parent.top || null;\n        parent.top && (parent.top.next = o);\n        parent.top = o;\n        o.next = null;\n    };\n\n    Element.prototype = elproto;\n    elproto.constructor = Element;\n\n    var\n        repaint = function (el, finalAttrs, positionChanged, dimensionChanged) {\n\n            var node = getNode(el),\n                preC = R._getConnectedNodes(node),\n                attrs = el.attrs,\n                elAbove = preC.above,\n                elBelow = preC.below,\n                len,\n                attr,\n                i;\n\n           for (attr in finalAttrs) {\n                attrs[attr] = finalAttrs[attr];\n            }\n\n            node.redraw();\n        },\n\n        setFillAndStroke = function (el, params) {\n\n            var attrs = el.attrs,\n                node = el.node,\n                finalAttrs = {},\n                att,\n                val,\n                needsRepaint = false,\n                positionChanged = false,\n                dimensionChanged = false,\n                i;\n\n            for (att in params) {\n                if (params[has](att)) {\n                    if (!R._availableAttrs[has](att)) {\n                        continue;\n                    }\n                    val = params[att];\n\n                    switch (att) {\n\n                        case 'fill-opacity':\n                        case 'opacity':\n                        case 'stroke-opcaity':\n                        case 'stroke':\n                        case 'fill':\n                            finalAttrs[att] = val;\n                            needsRepaint = true;\n                            break;\n\n                        case 'stroke-width':\n                        case \"cx\":\n                        case \"cy\":\n                        case \"x\":\n                        case \"y\":\n                            finalAttrs[att] = val;\n                            positionChanged = true;\n                            break;\n\n                        case \"width\":\n                        case \"height\":\n                            finalAttrs[att] = val;\n                            dimensionChanged = true;\n                            break;\n\n                        case \"clip-rect\":\n                            finalAttrs[att] = val;\n                            needsRepaint = true;\n                            break;\n\n                        case \"font-size\":\n                        case \"font\":\n                        case \"vertical-align\":\n                        case \"text-anchor\":\n                            finalAttrs[att] = val;\n                            needsRepaint = true;\n\n                        default:\n                            continue;\n                    }\n                }\n            }\n\n            tuneText(el, params, finalAttrs);\n\n            finalAttrs = node.validateAttrs(finalAttrs);\n\n            if (needsRepaint || positionChanged || dimensionChanged) {\n                repaint(el, finalAttrs, positionChanged, dimensionChanged);\n            }\n        },\n\n        leading = 1.2,\n\n        tuneText = function(el, params, finalAttrs) {\n            if (el.type != \"text\" || !(params[has](\"text\") || params[has](\"font\") ||\n                    params[has](\"font-size\") || params[has](\"x\") || params[has](\"y\") ||\n                    params[has](\"line-height\") || params[has](\"vertical-align\"))) {\n                return;\n            }\n\n            var a = el.attr(),\n                fontSize = params['font-size'] || a['font-size'] || 10,\n                lineHeight = toFloat(params['line-height'] || a['line-height']) || toInt(fontSize, 10) * leading,\n                valign = params[\"vertical-align\"] || a[\"vertical-align\"] || \"middle\";\n\n            if (isNaN(lineHeight)) {\n                lineHeight = fontSize * leading;\n            }\n\n            finalAttrs['font-size'] = toInt(fontSize, 10) + \"px\";\n            finalAttrs['font'] = params['font'] || a['font'] || 'Verdana';\n            finalAttrs['vertical-align'] = valign;\n            finalAttrs['x'] = params['x'] || a['x'] || 0;\n            finalAttrs['y'] = params['y'] || a['y'] || 0;\n            finalAttrs['line-height'] = toInt(lineHeight, 10);\n            finalAttrs['text-anchor'] = params['text-anchor'] || a['text-anchor'] || 'middle';\n        };\n\n    R._engine.initWin = function (win) {\n        win = win;\n        doc = win.document;\n    };\n\n    R._engine.setSize = function (w, h) {\n        var paper = this,\n            cs = paper.canvas.style;\n\n        cs.width = (paper.width = (+w || paper.width)) + PX;\n        cs.height = (paper.height = (+h || paper.height)) + PX;\n        /** @todo call setViewBox from setSize() */\n        return paper;\n    };\n    /** @todo implement setViewBox() */\n    R._engine.create = function () {\n        var con = R._getContainer.apply(0, arguments) || {},\n            container = con.container,\n            x = con.x,\n            y = con.y,\n            width = con.width,\n            height = con.height,\n            //handler = R._containerEventHandler,\n            wrapper,\n            cssText,\n            image,\n            mmap,\n            i,\n            paper,\n            canvas;\n\n        if (!container) {\n            throw new Error(\"Canvas container not found.\");\n        }\n\n        paper = new R._Paper();\n        paper.canvas = wrapper = $(\"div\");\n\n        x = (x || 0);\n        y = (y || 0);\n        paper.width = width = (width || 512);\n        paper.height = height = (height || 342);\n        paper.left = paper.top = 0;\n\n        if (container == 1) {\n           wrapper.style.cssText = cssText +\n                    R.format(\";width:100%;height:100%;position:absolute;left:{0}px;top:{1}px;\", [x, y]);\n            doc.body.appendChild(wrapper);\n        }\n        else {\n            wrapper.style.cssText = cssText + \";width:100%;height:100%;position:absolute\";\n            if (container.firstChild) {\n                container.insertBefore(wrapper, container.firstChild);\n            }\n            else {\n                container.appendChild(wrapper);\n            }\n        }\n\n        cssText = \"overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);\" +\n            \"-webkit-user-select:none;-moz-user-select:-moz-none;\" +\n            \"-khtml-user-select:none;-ms-user-select:none;user-select:none;\" +\n            \"-o-user-select:none;cursor:default;\" +\n            R.format(\"width:{0}px;height:{1}px;\", [width, height]);\n\n        // Create the canvas element and set it to occupy full space. Retain a\n        // reference to its context.\n        canvas = $(\"canvas\");\n        canvas.style.cssText = \"position:absolute;left:0;top:0\";\n        canvas.setAttribute('width', paper.width);\n        canvas.setAttribute('height', paper.height);\n\n        paper.com = new CanvasObjectModel(canvas, wrapper, paper.width, paper.height);\n\n        wrapper.appendChild(canvas);\n\n        image = $(\"img\");\n\n        // Easter egg idea! :)\n        image.src = \"image1.png\";\n\n        image.style.cssText = \"opacity: 0;z-index: 100;background: transparent;position: absolute;left: 0;top: 0;width: \"+width+\"px;height: \"+height+\"px\";\n        wrapper.appendChild(image);\n\n        mmap = $(\"map\");\n\n        mmap.setAttribute(\"name\", \"mousemap\");\n        mmap.setAttribute(\"id\", \"mousemap\"); // Needed for FF.\n\n        wrapper.appendChild(mmap);\n\n        image.setAttribute(\"usemap\",\"#mousemap\");\n        wrapper._image = image;\n        wrapper._map = mmap;\n\n        return paper;\n    };\n\n    var getNode = R._engine.getNode = function (el) {\n        return el.node || el[0].node;\n    };\n\n    R._engine.getLastNode = function (el) {\n        return el.node || el[el.length - 1].node;\n    };\n\n    R._engine.rect = function(paper, x, y, w, h, r, group) {\n\n        var node = paper.com.createNode('rect', group && group.node),\n            el = new Element(node, paper, group),\n            attrs = el.attrs;\n\n        attrs.x = x;\n        attrs.y = y;\n        attrs.width = w;\n        attrs.height = h;\n        attrs.fill = \"#fff\";\n        attrs.stroke = \"#000\";\n        attrs['stroke-width'] = 1;\n        attrs.r = r || 0;\n        attrs.rx = r || 0;\n        attrs.ry = r || 0;\n\n        el.type = \"rect\";\n\n        node.render();\n        return el;\n    };\n\n    R._engine.circle = function(paper, x, y, r, group) {\n        var node = paper.com.createNode('circle', group && group.node),\n            el = new Element(node, paper, group),\n            attrs = el.attrs;\n\n        attrs.cx = x;\n        attrs.cy = y;\n        attrs.r = r;\n        attrs.fill = 'none';\n        attrs.stroke = '#000';\n        attrs['stroke-width'] = 1;\n\n        el.type = \"circle\";\n\n        node.render();\n        return el;\n    };\n\n    R._engine.ellipse = function(paper, x, y, rx, ry, group) {\n        var node = new FauxNode(),\n            el = new Element(node, paper, group);\n\n        el.type = \"ellipse\";\n        return el;\n    };\n\n    R._engine.image = function(paper, src, x, y, w, h, group) {\n        var node = new FauxNode(),\n            el = new Element(node, paper, group);\n\n        el.type = \"image\";\n        return el;\n    };\n\n    R._engine.text = function(paper, x, y, text, group) {\n        var node = paper.com.createNode('text', group && group.node),\n            el = new Element(node, paper, group),\n            attrs = el.attrs;\n\n        attrs.x = x;\n        attrs.y = y;\n        attrs.text = text;\n        attrs.fill = 'none';\n        attrs.stroke = '#000';\n        attrs.font = 'Verdana';\n        attrs['font-size'] = '12px';\n        attrs['vertical-align'] = 'middle';\n        attrs['text-anchor'] = 'middle'\n\n        el.type = \"text\";\n        node.render();\n        return el;\n    };\n\n    R._engine.path = function(pathString, paper, group) {\n        var node = paper.com.createNode('path', group && group.node),\n            el = new Element(node, paper, group),\n            attrs = el.attrs;\n\n        attrs.path = pathString;\n        attrs.fill = \"#fff\";\n        attrs.stroke = \"#000\";\n        attrs['stroke-width'] = 1;\n\n        el.type = \"path\";\n\n        node.render();\n\n        return el;\n    };\n\n    R._engine.group = function (paper, id, group) {\n\n        var node = paper.com.createNode('group', group && group.node),\n            el = new Element(node, paper, group),\n            wrapper = node.wrapper;\n\n        id && wrapper.setAttribute('class', ['red', id].join('-'));\n\n        el.canvas = wrapper;\n\n        //(group && group.canvas.appendChild(wrapper)) || paper.canvas.appendChild(wrapper);\n\n        el.type = \"group\";\n        return el;\n    };\n\n    elproto._getBBox = function() {\n        if (this.removed) {\n            return {};\n        }\n\n        return {\n            x: this.X + (this.bbx || 0) - this.W / 2,\n            y: this.Y + (this.bby || 0) - this.H / 2,\n            width: this.W,\n            height: this.H\n        };\n    };\n\n    /***** ELEMENT REORDERING / RESTRUCTING *****/\n\n    elproto.toFront = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = o.node,\n            parent = o.parent,\n            parentNode = thisNode.owner,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._tofront(o, parent)) {\n            if (elproto.type === \"group\") {\n                parent.canvas.appendChild(thisNode);\n            }\n            else {\n                parentNode.nodeList.tofront(thisNode);\n            }\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n\n        return o;\n    };\n\n    elproto.toBack = function() {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = o.node,\n            parent = o.parent,\n            parentNode = thisNode.owner,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (R._toback(o, parent)) {\n            if (elproto.type === \"group\") {\n                parent.canvas.appendChild(thisNode);\n            }\n            else {\n                parentNode.nodeList.toback(thisNode);\n            }\n        }\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk && follower.el[follower.stalk](o);\n        }\n\n\n        return o;\n    };\n\n    elproto.insertAfter = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = o.node,\n            thatNode = element.node,\n            parentNode = thatNode.owner,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (thatNode.next) {\n            parentNode.nodeList.insertBefore(thisNode, thatNode.next);\n        }\n        else {\n            parentNode.appendChild(thisNode);\n        }\n\n        R._insertafter(o, element, o.parent, element.parent);\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n\n        return o;\n    };\n\n    elproto.insertBefore = function(element) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n            thisNode = o.node,\n            thatNode = element.node,\n            parentNode = thatNode.owner,\n            followers = o.followers,\n            follower,\n            i,\n            ii;\n\n        if (thatNode) {\n            parentNode.nodeList.insertBefore(thisNode, thatNode);\n        }\n        else {\n            parentNode.appendChild(thisNode);\n        }\n\n        R._insertafter(o, element, o.parent, element.parent);\n\n        for (i = 0, ii = followers.length; i < ii; i++) {\n            (follower = followers[i]).stalk &&\n                follower.el[follower.stalk](element);\n        }\n\n        return o;\n    };\n\n    elproto.appendChild = function(element) {\n        return this;\n    };\n\n    elproto.removeChild = function(element) {\n        return this;\n    };\n\n    /***** ELEMENT REORDERING / RESTRUCTING *****/\n\n\n\n    elproto.attr = function(name, value) {\n        if (this.removed) {\n            return this;\n        }\n\n        var o = this,\n\n            attrs = o.attrs,\n            ca = o.ca,\n            names,\n            params,\n            par,\n\n            res,\n            key,\n            out,\n\n            subkey,\n            delkeys,\n\n            follower,\n            ii,\n            i;\n\n        // fetch a copy of all attributes\n        if (name == null) {\n            res = {};\n            for (key in attrs) if (attrs.hasOwnProperty(key)) {\n                res[key] = attrs[key];\n            }\n            res.gradient && res.fill == \"none\" && (res.fill = res.gradient) && delete res.gradient;\n            res.transform = o._.transform;\n            /** @todo res.visibility = o.node.style.display === \"none\" ? \"hidden\" : \"visible\"; */\n            return res;\n        }\n\n        // fetch a single value\n        if (value == null && R.is(name, \"string\")) {\n            if (name == \"fill\" && attrs.fill == \"none\" && attrs.gradient) {\n                return attrs.gradient;\n            }\n            if (name == \"transform\") {\n                return o._.transform;\n            }\n            /** @todo if (name == \"visibility\") {\n                return this.node.style.display === \"none\" ? \"hidden\" : \"visible\";\n            }*/\n\n            names = name.split(separator),\n            out = {};\n\n            for (i = 0, ii = names.length; i < ii; i++) {\n                name = names[i];\n                if (name in attrs) {\n                    out[name] = attrs[name];\n                }\n                else if (R.is(ca[name], \"function\")) {\n                    out[name] = ca[name].def;\n                } else {\n                    out[name] = R._availableAttrs[name];\n                }\n            }\n            return ii - 1 ? out : out[names[0]];\n        }\n\n        // fetch specific attributes\n        if (value == null && R.is(name, \"array\")) {\n            out = {};\n            for (i = 0, ii = name.length; i < ii; i++) {\n                out[name[i]] = o.attr(name[i]);\n            }\n            return out;\n        }\n\n        // prepare setter params\n        if (value != null) {\n            params = {};\n            params[name] = value;\n        }\n        else if (name != null && R.is(name, \"object\")) {\n            params = name;\n        }\n\n        if (R.stopEvent !== false) {\n            for (key in params) {\n                eve(\"raphael.attr.\" + key + \".\" + o.id, o, params[key], key);\n            }\n        }\n\n        delkeys = {};\n        for (key in ca) {\n\n            if (ca[key] && params.hasOwnProperty(key) &&\n                    R.is(ca[key], \"function\") && !ca['_invoked' + key]) {\n\n                ca['_invoked'+key] = true; // prevent recursion\n                par = ca[key].apply(o, [].concat(params[key]));\n                delete ca['_invoked'+key];\n\n                for (subkey in par) {\n                    if (par.hasOwnProperty(subkey)) {\n                         params[subkey] = par[subkey];\n                    }\n                }\n                attrs[key] = params[key];\n                if (par === false) {\n                    delkeys[key] = params[key];\n                    delete params[key];\n                }\n            }\n        }\n\n        setFillAndStroke(this, params);\n\n        for (i = 0, ii = o.followers.length; i < ii; i++) {\n            follower = o.followers[i];\n            (follower.cb && !follower.cb.call(follower.el, params, o)) ||\n                follower.el.attr(params);\n        }\n\n        for (subkey in delkeys) {\n            params[subkey] = delkeys[subkey];\n        }\n        return this;\n    };\n\n\n\n\n    /**************** Drag *********************/\n    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {\n\n        function start(e) {\n            (e.originalEvent || e).preventDefault();\n            var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,\n            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;\n            this._drag.x = e.clientX + scrollX;\n            this._drag.y = e.clientY + scrollY;\n            this._drag.id = e.identifier;\n            !drag.length && R.mousemove(dragMove).mouseup(dragUp);\n            drag.push({\n                el: this,\n                move_scope: move_scope,\n                start_scope: start_scope,\n                end_scope: end_scope,\n                onmoveHandler: onmove,\n                onstartHandler: onstart,\n                onendHandler: onend\n            });\n            onstart && eve.on(\"raphael.drag.start.\" + this.id, onstart);\n            onmove && eve.on(\"raphael.drag.move.\" + this.id, onmove);\n            onend && eve.on(\"raphael.drag.end.\" + this.id, onend);\n            onstart && eve(\"raphael.drag.start.\" + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);\n        }\n        this._drag = {};\n        draggable.push({\n            el: this,\n            start: start\n        });\n        this.mousedown(start);\n        return this;\n    }\n\n    elproto.undrag = function() {\n        var i = draggable.length;\n        while (i--)\n            if (draggable[i].el == this) {\n                this.unmousedown(draggable[i].start);\n                draggable.splice(i, 1);\n                eve.unbind(\"raphael.drag.*.\" + this.id);\n            }\n        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);\n    };\n\n\n    /***************** Drag *****************/\n    /************ TRANSFORMATIONS *************/\n\n\n\n    elproto.rotate = function(deg, cx, cy) {\n\n        var o = this,\n            bbox;\n        if (o.removed) {\n            return o;\n        }\n        deg = Str(deg).split(separator);\n        if (deg.length - 1) {\n            cx = toFloat(deg[1]);\n            cy = toFloat(deg[2]);\n        }\n        deg = toFloat(deg[0]);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            bbox = o.getBBox(1);\n            cx = bbox.x + bbox.width / 2;\n            cy = bbox.y + bbox.height / 2;\n        }\n        o.transform(o._.transform.concat([[\"r\", deg, cx, cy]]));\n        return o;\n    };\n\n    elproto.scale = function(sx, sy, cx, cy) {\n        var o = this,\n            bbox;\n        if (o.removed) {\n            return o;\n        }\n        sx = Str(sx).split(separator);\n        if (sx.length - 1) {\n            sy = toFloat(sx[1]);\n            cx = toFloat(sx[2]);\n            cy = toFloat(sx[3]);\n        }\n        sx = toFloat(sx[0]);\n        (sy == null) && (sy = sx);\n        (cy == null) && (cx = cy);\n        if (cx == null || cy == null) {\n            bbox = o.getBBox(1);\n        }\n        cx = cx == null ? bbox.x + bbox.width / 2 : cx;\n        cy = cy == null ? bbox.y + bbox.height / 2 : cy;\n        o.transform(o._.transform.concat([[\"s\", sx, sy, cx, cy]]));\n\n        return o;\n    };\n\n    elproto.translate = function(dx, dy) {\n        var o = this;\n        if (o.removed) {\n            return o;\n        }\n        dx = Str(dx).split(separator);\n        if (dx.length - 1) {\n            dy = toFloat(dx[1]);\n        }\n        dx = toFloat(dx[0]) || 0;\n        dy = +dy || 0;\n        o.transform(o._.transform.concat([[\"t\", dx, dy]]));\n\n        return o;\n    };\n\n    elproto.transform = function(tstr) {\n\n        var o = this,\n            _ = o._,\n            sw;\n\n        if (tstr === null) {\n            return _.transform;\n        }\n\n        R._extractTransform(o, tstr);\n\n        /** @todo: what changes to be made here in the context of canvas */\n        /*o.clip && !_.clipispath && $(o.clip, {\n            transform: o.matrix.invert()\n        });\n        o.pattern && updatePosition(o); */\n        if (_.sx != 1 || _.sy != 1) {\n            sw = o.attrs[has](\"stroke-width\") ? o.attrs[\"stroke-width\"] : 1;\n            o.attr({\n                \"stroke-width\": sw\n            });\n        }\n\n        o.node && o.node.redraw();\n\n        return o;\n    };\n\n    /************ TRANSFORMATIONS *************/\n\n\n    elproto.hide = function() {\n        return this;\n    };\n\n    elproto.show = function() {\n        return this;\n    };\n\n    elproto.blur = function(size) {\n        return this;\n    };\n\n    elproto.on = function(eventType, handler) {\n        var el = this,\n            listeners = el.listeners;\n\n        if (!listeners) {\n            listeners = el.listeners = {};\n        }\n\n        if (!listeners[eventType]) {\n            listeners[eventType] = [];\n        }\n\n        listeners[eventType].push(handler);\n    };\n\n    elproto.remove = function() {\n        return this;\n    };\n\n\n\n\n    paperproto.clear = function () {\n        eve(\"raphael.clear\", this);\n        return this;\n    };\n\n    paperproto.remove = function () {\n        if (this.removed) {\n            return;\n        }\n\n        var paper = this,\n            canvas = paper.canvas,\n            pn = canvas.parentNode,\n            i;\n\n        eve(\"raphael.remove\", paper);\n        pn.removeChild(canvas);\n\n        for (i in paper) {\n            paper[i] = typeof paper[i] == \"function\" ? R._removedFactory(i) : null;\n        }\n\n        this.removed = true;\n    };\n\n    R.toString = function () {\n        return \"Your browser supports canvas.\\nYou are running RedRaphael \" +\n                R.version;\n    };\n\n    for (var method in elproto) {\n        if (elproto.hasOwnProperty(method) &&\n            !setproto.hasOwnProperty(method)) {\n        setproto[method] = (function (methodname) {\n            return function () {\n                var arg = arguments;\n                return this.forEach(function (el) {\n                    el[methodname].apply(el, arg);\n                });\n            };\n        })(method);\n    }\n    };\n}\n\nexport default R\n\n\n\n// WEBPACK FOOTER //\n// ./source/raphael.canvas.js"],"sourceRoot":""}